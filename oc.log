2017-03-30 14:18:11,005 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-30 14:18:11,007 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-30 14:18:11,024 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-30 14:18:11,024 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 14:18:11,034 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490908691, 'registration_client_uri': 'https://localhost:8040/registration?client_id=9H4IMiPbyYVL', 'registration_access_token': '4xg4llxtn8zu926IoKMAvrfXTbMK5djD', 'client_salt': 'CO9r4wev', 'client_id': '9H4IMiPbyYVL', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1490995091}
2017-03-30 14:18:11,035 oic.utils.keyio:DEBUG loading keys for issuer: 9H4IMiPbyYVL
2017-03-30 14:18:11,035 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 14:18:11,035 oic.oic.provider:DEBUG found 0 keys for client_id=9H4IMiPbyYVL
2017-03-30 14:18:11,036 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490908691, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=9H4IMiPbyYVL', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': '4xg4llxtn8zu926IoKMAvrfXTbMK5djD', 'response_types': [u'code'], 'client_id': '9H4IMiPbyYVL', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1490995091}
2017-03-30 14:18:22,662 oic.oauth2.provider:DEBUG Request: 'nonce=D83RqqsdEI5AeoIRJ4iP1mfvDc0drYW3&acr_values=SAML&state=lREMRzm4QSRTR6oze8jWYotNrNszaY9b&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=9H4IMiPbyYVL&scope=openid+profile+email+address+phone'
2017-03-30 14:18:22,662 oic.oic:DEBUG Found 3 verify keys
2017-03-30 14:18:22,664 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'D83RqqsdEI5AeoIRJ4iP1mfvDc0drYW3', 'acr_values': 'SAML', 'state': 'lREMRzm4QSRTR6oze8jWYotNrNszaY9b', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': '9H4IMiPbyYVL', 'scope': 'openid profile email address phone'}
2017-03-30 14:18:22,669 oic.oic.provider:INFO authorization_request: {'nonce': 'D83RqqsdEI5AeoIRJ4iP1mfvDc0drYW3', 'acr_values': 'SAML', 'state': 'lREMRzm4QSRTR6oze8jWYotNrNszaY9b', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': '9H4IMiPbyYVL', 'scope': 'openid profile email address phone'}
2017-03-30 14:18:22,669 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-30 14:18:22,669 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-30 14:18:22,669 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-30 14:18:22,670 oic.oauth2.provider:INFO No active authentication
2017-03-30 14:18:22,670 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=D83RqqsdEI5AeoIRJ4iP1mfvDc0drYW3&acr_values=SAML&state=lREMRzm4QSRTR6oze8jWYotNrNszaY9b&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=9H4IMiPbyYVL&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-30 14:18:22,723 root:DEBUG unknown side: favicon.ico
2017-03-30 14:20:58,966 oic.utils.authn.user:DEBUG verify(query=nonce%3DD83RqqsdEI5AeoIRJ4iP1mfvDc0drYW3%26acr_values%3DSAML%26state%3DlREMRzm4QSRTR6oze8jWYotNrNszaY9b%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3D9H4IMiPbyYVL%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-03-30 14:20:58,966 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=D83RqqsdEI5AeoIRJ4iP1mfvDc0drYW3&acr_values=SAML&state=lREMRzm4QSRTR6oze8jWYotNrNszaY9b&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=9H4IMiPbyYVL&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-03-30 14:20:58,966 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-03-30 14:20:58,970 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'D83RqqsdEI5AeoIRJ4iP1mfvDc0drYW3'], u'acr_values': [u'SAML'], u'state': [u'lREMRzm4QSRTR6oze8jWYotNrNszaY9b'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'9H4IMiPbyYVL'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-03-30 14:20:58,977 oic.oauth2.provider:DEBUG Request: 'nonce=D83RqqsdEI5AeoIRJ4iP1mfvDc0drYW3&acr_values=SAML&state=lREMRzm4QSRTR6oze8jWYotNrNszaY9b&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=9H4IMiPbyYVL&upm_answer=true&scope=openid+profile+email+address+phone'
2017-03-30 14:20:58,978 oic.oic:DEBUG Found 3 verify keys
2017-03-30 14:20:58,978 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'D83RqqsdEI5AeoIRJ4iP1mfvDc0drYW3', 'acr_values': 'SAML', 'state': 'lREMRzm4QSRTR6oze8jWYotNrNszaY9b', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': '9H4IMiPbyYVL', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-30 14:20:58,978 oic.oic.provider:INFO authorization_request: {'nonce': 'D83RqqsdEI5AeoIRJ4iP1mfvDc0drYW3', 'acr_values': 'SAML', 'state': 'lREMRzm4QSRTR6oze8jWYotNrNszaY9b', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': '9H4IMiPbyYVL', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-30 14:20:58,979 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-30 14:20:58,979 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-30 14:20:58,979 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-30 14:20:58,979 oic.oauth2.provider:INFO No active authentication
2017-03-30 14:20:58,979 oic.oic.provider:DEBUG - authenticated -
2017-03-30 14:20:58,979 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-03-30 14:20:58,980 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['debe8ee9a15d6e4db33bbb4ca6a99dd0ad5d59b839711adc5dd86337']}
2017-03-30 14:20:58,980 oic.oauth2.provider:DEBUG - in authenticated() -
2017-03-30 14:20:58,980 oic.oauth2.provider:DEBUG response type: ['code']
2017-03-30 14:20:58,981 oicServer:ERROR 'newstr' object has no attribute 'items'
Traceback (most recent call last):
  File "./server.py", line 314, in application
    return callback(environ, start_response)
  File "./server.py", line 199, in authorization
    self.oas.authorization_endpoint, logger=logger)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/utils/http_util.py", line 411, in wsgi_wrapper
    args = func(**kwargs)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oic/provider.py", line 773, in authorization_endpoint
    return self.authz_part2(authnres["user"], areq, sid, cookie=cookie)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oic/provider.py", line 776, in authz_part2
    result = self._complete_authz(user, areq, sid, **kwargs)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oauth2/provider.py", line 724, in _complete_authz
    _c.load(_kaka)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/Cookie.py", line 643, in load
    for k, v in rawdata.items():
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/future/types/newstr.py", line 331, in __getattribute__
    return super(newstr, self).__getattribute__(name)
AttributeError: 'newstr' object has no attribute 'items'
2017-03-30 14:30:03,616 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-30 14:30:03,617 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-30 14:30:03,635 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-30 14:30:03,635 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 14:30:03,645 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490909403, 'registration_client_uri': 'https://localhost:8040/registration?client_id=LDVl8uTQZPcv', 'registration_access_token': 'QOwxW61jFFCbGqh1EDkAfXU5Rwd2kZ2w', 'client_salt': 'ePtpKFzr', 'client_id': 'LDVl8uTQZPcv', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1490995803}
2017-03-30 14:30:03,645 oic.utils.keyio:DEBUG loading keys for issuer: LDVl8uTQZPcv
2017-03-30 14:30:03,645 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 14:30:03,645 oic.oic.provider:DEBUG found 0 keys for client_id=LDVl8uTQZPcv
2017-03-30 14:30:03,646 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490909403, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=LDVl8uTQZPcv', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'QOwxW61jFFCbGqh1EDkAfXU5Rwd2kZ2w', 'response_types': [u'code'], 'client_id': 'LDVl8uTQZPcv', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1490995803}
2017-03-30 14:30:35,398 oic.oauth2.provider:DEBUG Request: 'nonce=D83RqqsdEI5AeoIRJ4iP1mfvDc0drYW3&acr_values=SAML&state=lREMRzm4QSRTR6oze8jWYotNrNszaY9b&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=9H4IMiPbyYVL&scope=openid+profile+email+address+phone'
2017-03-30 14:30:35,398 oic.oic:DEBUG Found 2 verify keys
2017-03-30 14:30:35,399 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'D83RqqsdEI5AeoIRJ4iP1mfvDc0drYW3', 'acr_values': 'SAML', 'state': 'lREMRzm4QSRTR6oze8jWYotNrNszaY9b', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': '9H4IMiPbyYVL', 'scope': 'openid profile email address phone'}
2017-03-30 14:30:35,405 oic.oic.provider:INFO authorization_request: {'nonce': 'D83RqqsdEI5AeoIRJ4iP1mfvDc0drYW3', 'acr_values': 'SAML', 'state': 'lREMRzm4QSRTR6oze8jWYotNrNszaY9b', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': '9H4IMiPbyYVL', 'scope': 'openid profile email address phone'}
2017-03-30 14:30:35,405 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-30 14:30:35,405 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-30 14:30:35,405 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-30 14:30:35,405 oic.oauth2.provider:INFO No active authentication
2017-03-30 14:30:35,405 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=D83RqqsdEI5AeoIRJ4iP1mfvDc0drYW3&acr_values=SAML&state=lREMRzm4QSRTR6oze8jWYotNrNszaY9b&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=9H4IMiPbyYVL&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-30 14:30:46,223 oic.utils.authn.user:DEBUG verify(query=nonce%3DD83RqqsdEI5AeoIRJ4iP1mfvDc0drYW3%26acr_values%3DSAML%26state%3DlREMRzm4QSRTR6oze8jWYotNrNszaY9b%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3D9H4IMiPbyYVL%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-03-30 14:30:46,223 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=D83RqqsdEI5AeoIRJ4iP1mfvDc0drYW3&acr_values=SAML&state=lREMRzm4QSRTR6oze8jWYotNrNszaY9b&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=9H4IMiPbyYVL&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-03-30 14:30:46,224 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-03-30 14:30:46,227 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'D83RqqsdEI5AeoIRJ4iP1mfvDc0drYW3'], u'acr_values': [u'SAML'], u'state': [u'lREMRzm4QSRTR6oze8jWYotNrNszaY9b'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'9H4IMiPbyYVL'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-03-30 14:30:46,235 oic.oauth2.provider:DEBUG Request: 'nonce=D83RqqsdEI5AeoIRJ4iP1mfvDc0drYW3&acr_values=SAML&state=lREMRzm4QSRTR6oze8jWYotNrNszaY9b&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=9H4IMiPbyYVL&upm_answer=true&scope=openid+profile+email+address+phone'
2017-03-30 14:30:46,235 oic.oic:DEBUG Found 2 verify keys
2017-03-30 14:30:46,235 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'D83RqqsdEI5AeoIRJ4iP1mfvDc0drYW3', 'acr_values': 'SAML', 'state': 'lREMRzm4QSRTR6oze8jWYotNrNszaY9b', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': '9H4IMiPbyYVL', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-30 14:30:46,236 oic.oic.provider:INFO authorization_request: {'nonce': 'D83RqqsdEI5AeoIRJ4iP1mfvDc0drYW3', 'acr_values': 'SAML', 'state': 'lREMRzm4QSRTR6oze8jWYotNrNszaY9b', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': '9H4IMiPbyYVL', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-30 14:30:46,236 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-30 14:30:46,236 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-30 14:30:46,236 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-30 14:30:46,236 oic.oauth2.provider:INFO No active authentication
2017-03-30 14:30:46,236 oic.oic.provider:DEBUG - authenticated -
2017-03-30 14:30:46,236 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-03-30 14:30:46,237 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['ed1ce7af45e37e34b5c151fcc5c6e9d22b83c79c6b289b6084e3669e']}
2017-03-30 14:30:46,237 oic.oauth2.provider:DEBUG - in authenticated() -
2017-03-30 14:30:46,237 oic.oauth2.provider:DEBUG response type: ['code']
2017-03-30 14:30:46,239 oicServer:ERROR 'newstr' object has no attribute 'items'
Traceback (most recent call last):
  File "./server.py", line 316, in application
    return callback(environ, start_response)
  File "./server.py", line 199, in authorization
    self.oas.authorization_endpoint, logger=logger)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/utils/http_util.py", line 411, in wsgi_wrapper
    args = func(**kwargs)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oic/provider.py", line 773, in authorization_endpoint
    return self.authz_part2(authnres["user"], areq, sid, cookie=cookie)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oic/provider.py", line 776, in authz_part2
    result = self._complete_authz(user, areq, sid, **kwargs)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oauth2/provider.py", line 724, in _complete_authz
    _c.load(_kaka)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/Cookie.py", line 643, in load
    for k, v in rawdata.items():
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/future/types/newstr.py", line 331, in __getattribute__
    return super(newstr, self).__getattribute__(name)
AttributeError: 'newstr' object has no attribute 'items'
2017-03-30 14:34:13,844 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-30 14:34:13,846 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-30 14:34:13,863 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-30 14:34:13,863 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 14:34:13,873 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490909653, 'registration_client_uri': 'https://localhost:8040/registration?client_id=nqTLUROfAzle', 'registration_access_token': 'RHpvr1JUEdfnC6l1zYVWfehBxP41pfKe', 'client_salt': '7yqVAN2F', 'client_id': 'nqTLUROfAzle', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1490996053}
2017-03-30 14:34:13,873 oic.utils.keyio:DEBUG loading keys for issuer: nqTLUROfAzle
2017-03-30 14:34:13,874 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 14:34:13,874 oic.oic.provider:DEBUG found 0 keys for client_id=nqTLUROfAzle
2017-03-30 14:34:13,875 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490909653, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=nqTLUROfAzle', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'RHpvr1JUEdfnC6l1zYVWfehBxP41pfKe', 'response_types': [u'code'], 'client_id': 'nqTLUROfAzle', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1490996053}
2017-03-30 14:34:28,235 oic.oauth2.provider:DEBUG Request: 'nonce=HrruRQ4KTDVIdPJFgysMNcHzYHSHHIuH&acr_values=SAML&state=VC2FEMjGakr7KVg7FH0DTsGwqhrb27yI&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=nqTLUROfAzle&scope=openid+profile+email+address+phone'
2017-03-30 14:34:28,236 oic.oic:DEBUG Found 3 verify keys
2017-03-30 14:34:28,236 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'HrruRQ4KTDVIdPJFgysMNcHzYHSHHIuH', 'acr_values': 'SAML', 'state': 'VC2FEMjGakr7KVg7FH0DTsGwqhrb27yI', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'nqTLUROfAzle', 'scope': 'openid profile email address phone'}
2017-03-30 14:34:28,242 oic.oic.provider:INFO authorization_request: {'nonce': 'HrruRQ4KTDVIdPJFgysMNcHzYHSHHIuH', 'acr_values': 'SAML', 'state': 'VC2FEMjGakr7KVg7FH0DTsGwqhrb27yI', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'nqTLUROfAzle', 'scope': 'openid profile email address phone'}
2017-03-30 14:34:28,242 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-30 14:34:28,243 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-30 14:34:28,243 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-30 14:34:28,243 oic.oauth2.provider:INFO No active authentication
2017-03-30 14:34:28,243 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=HrruRQ4KTDVIdPJFgysMNcHzYHSHHIuH&acr_values=SAML&state=VC2FEMjGakr7KVg7FH0DTsGwqhrb27yI&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=nqTLUROfAzle&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-30 14:34:45,664 oic.utils.authn.user:DEBUG verify(query=nonce%3DHrruRQ4KTDVIdPJFgysMNcHzYHSHHIuH%26acr_values%3DSAML%26state%3DVC2FEMjGakr7KVg7FH0DTsGwqhrb27yI%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3DnqTLUROfAzle%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-03-30 14:34:45,664 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=HrruRQ4KTDVIdPJFgysMNcHzYHSHHIuH&acr_values=SAML&state=VC2FEMjGakr7KVg7FH0DTsGwqhrb27yI&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=nqTLUROfAzle&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-03-30 14:34:45,664 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-03-30 14:34:45,667 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'HrruRQ4KTDVIdPJFgysMNcHzYHSHHIuH'], u'acr_values': [u'SAML'], u'state': [u'VC2FEMjGakr7KVg7FH0DTsGwqhrb27yI'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'nqTLUROfAzle'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-03-30 14:34:45,675 oic.oauth2.provider:DEBUG Request: 'nonce=HrruRQ4KTDVIdPJFgysMNcHzYHSHHIuH&acr_values=SAML&state=VC2FEMjGakr7KVg7FH0DTsGwqhrb27yI&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=nqTLUROfAzle&upm_answer=true&scope=openid+profile+email+address+phone'
2017-03-30 14:34:45,675 oic.oic:DEBUG Found 3 verify keys
2017-03-30 14:34:45,675 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'HrruRQ4KTDVIdPJFgysMNcHzYHSHHIuH', 'acr_values': 'SAML', 'state': 'VC2FEMjGakr7KVg7FH0DTsGwqhrb27yI', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'nqTLUROfAzle', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-30 14:34:45,676 oic.oic.provider:INFO authorization_request: {'nonce': 'HrruRQ4KTDVIdPJFgysMNcHzYHSHHIuH', 'acr_values': 'SAML', 'state': 'VC2FEMjGakr7KVg7FH0DTsGwqhrb27yI', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'nqTLUROfAzle', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-30 14:34:45,676 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-30 14:34:45,676 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-30 14:34:45,676 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-30 14:34:45,676 oic.oauth2.provider:INFO No active authentication
2017-03-30 14:34:45,677 oic.oic.provider:DEBUG - authenticated -
2017-03-30 14:34:45,677 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-03-30 14:34:45,677 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['5aeb411592e21599b166705a0779b2c590d580ed91c73dfece7559a6']}
2017-03-30 14:34:45,677 oic.oauth2.provider:DEBUG - in authenticated() -
2017-03-30 14:34:45,677 oic.oauth2.provider:DEBUG response type: ['code']
2017-03-30 14:34:45,679 oicServer:ERROR 'newstr' object has no attribute 'items'
Traceback (most recent call last):
  File "./server.py", line 319, in application
    return callback(environ, start_response)
  File "./server.py", line 200, in authorization
    self.oas.authorization_endpoint, logger=logger)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/utils/http_util.py", line 411, in wsgi_wrapper
    args = func(**kwargs)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oic/provider.py", line 773, in authorization_endpoint
    return self.authz_part2(authnres["user"], areq, sid, cookie=cookie)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oic/provider.py", line 776, in authz_part2
    result = self._complete_authz(user, areq, sid, **kwargs)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oauth2/provider.py", line 724, in _complete_authz
    _c.load(_kaka)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/Cookie.py", line 643, in load
    for k, v in rawdata.items():
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/future/types/newstr.py", line 331, in __getattribute__
    return super(newstr, self).__getattribute__(name)
AttributeError: 'newstr' object has no attribute 'items'
2017-03-30 14:38:04,641 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-30 14:38:04,643 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-30 14:38:04,661 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-30 14:38:04,661 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 14:38:04,671 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490909884, 'registration_client_uri': 'https://localhost:8040/registration?client_id=rvyMEdKARTQc', 'registration_access_token': 'LNZpRwwD9ilXm1RMATcvtxqe0Gt6mkVG', 'client_salt': 'K1BR4q7z', 'client_id': 'rvyMEdKARTQc', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1490996284}
2017-03-30 14:38:04,672 oic.utils.keyio:DEBUG loading keys for issuer: rvyMEdKARTQc
2017-03-30 14:38:04,672 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 14:38:04,672 oic.oic.provider:DEBUG found 0 keys for client_id=rvyMEdKARTQc
2017-03-30 14:38:04,673 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490909884, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=rvyMEdKARTQc', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'LNZpRwwD9ilXm1RMATcvtxqe0Gt6mkVG', 'response_types': [u'code'], 'client_id': 'rvyMEdKARTQc', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1490996284}
2017-03-30 14:38:15,712 oic.oauth2.provider:DEBUG Request: 'nonce=G3MFsAszG8EjGGKWnl0lB7mb8CtcIl4M&acr_values=SAML&state=PqqkXoiff1c27T3JjupHg7xhT5cS8fXw&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=rvyMEdKARTQc&scope=openid+profile+email+address+phone'
2017-03-30 14:38:15,713 oic.oic:DEBUG Found 3 verify keys
2017-03-30 14:38:15,713 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'G3MFsAszG8EjGGKWnl0lB7mb8CtcIl4M', 'acr_values': 'SAML', 'state': 'PqqkXoiff1c27T3JjupHg7xhT5cS8fXw', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'rvyMEdKARTQc', 'scope': 'openid profile email address phone'}
2017-03-30 14:38:15,719 oic.oic.provider:INFO authorization_request: {'nonce': 'G3MFsAszG8EjGGKWnl0lB7mb8CtcIl4M', 'acr_values': 'SAML', 'state': 'PqqkXoiff1c27T3JjupHg7xhT5cS8fXw', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'rvyMEdKARTQc', 'scope': 'openid profile email address phone'}
2017-03-30 14:38:15,719 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-30 14:38:15,719 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-30 14:38:15,719 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-30 14:38:15,720 oic.oauth2.provider:INFO No active authentication
2017-03-30 14:38:15,720 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=G3MFsAszG8EjGGKWnl0lB7mb8CtcIl4M&acr_values=SAML&state=PqqkXoiff1c27T3JjupHg7xhT5cS8fXw&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=rvyMEdKARTQc&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-30 14:38:23,418 oic.utils.authn.user:DEBUG verify(query=nonce%3DG3MFsAszG8EjGGKWnl0lB7mb8CtcIl4M%26acr_values%3DSAML%26state%3DPqqkXoiff1c27T3JjupHg7xhT5cS8fXw%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3DrvyMEdKARTQc%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-03-30 14:38:23,418 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=G3MFsAszG8EjGGKWnl0lB7mb8CtcIl4M&acr_values=SAML&state=PqqkXoiff1c27T3JjupHg7xhT5cS8fXw&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=rvyMEdKARTQc&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-03-30 14:38:23,418 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-03-30 14:38:23,422 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'G3MFsAszG8EjGGKWnl0lB7mb8CtcIl4M'], u'acr_values': [u'SAML'], u'state': [u'PqqkXoiff1c27T3JjupHg7xhT5cS8fXw'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'rvyMEdKARTQc'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-03-30 14:38:23,430 oic.oauth2.provider:DEBUG Request: 'nonce=G3MFsAszG8EjGGKWnl0lB7mb8CtcIl4M&acr_values=SAML&state=PqqkXoiff1c27T3JjupHg7xhT5cS8fXw&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=rvyMEdKARTQc&upm_answer=true&scope=openid+profile+email+address+phone'
2017-03-30 14:38:23,430 oic.oic:DEBUG Found 3 verify keys
2017-03-30 14:38:23,430 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'G3MFsAszG8EjGGKWnl0lB7mb8CtcIl4M', 'acr_values': 'SAML', 'state': 'PqqkXoiff1c27T3JjupHg7xhT5cS8fXw', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'rvyMEdKARTQc', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-30 14:38:23,431 oic.oic.provider:INFO authorization_request: {'nonce': 'G3MFsAszG8EjGGKWnl0lB7mb8CtcIl4M', 'acr_values': 'SAML', 'state': 'PqqkXoiff1c27T3JjupHg7xhT5cS8fXw', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'rvyMEdKARTQc', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-30 14:38:23,431 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-30 14:38:23,431 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-30 14:38:23,431 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-30 14:38:23,431 oic.oauth2.provider:INFO No active authentication
2017-03-30 14:38:23,432 oic.oic.provider:DEBUG - authenticated -
2017-03-30 14:38:23,432 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-03-30 14:38:23,432 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['1a94d9a43d321b0b906438b913d3e00030d97009dacfb065da22f59e']}
2017-03-30 14:38:23,432 oic.oauth2.provider:DEBUG - in authenticated() -
2017-03-30 14:38:23,432 oic.oauth2.provider:DEBUG response type: ['code']
2017-03-30 14:38:23,434 oicServer:ERROR 'newstr' object has no attribute 'items'
Traceback (most recent call last):
  File "./server.py", line 324, in application
    return callback(environ, start_response)
  File "./server.py", line 205, in authorization
    self.oas.authorization_endpoint, logger=logger)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/utils/http_util.py", line 411, in wsgi_wrapper
    args = func(**kwargs)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oic/provider.py", line 773, in authorization_endpoint
    return self.authz_part2(authnres["user"], areq, sid, cookie=cookie)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oic/provider.py", line 776, in authz_part2
    result = self._complete_authz(user, areq, sid, **kwargs)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oauth2/provider.py", line 724, in _complete_authz
    _c.load(_kaka)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/Cookie.py", line 643, in load
    for k, v in rawdata.items():
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/future/types/newstr.py", line 331, in __getattribute__
    return super(newstr, self).__getattribute__(name)
AttributeError: 'newstr' object has no attribute 'items'
2017-03-30 14:40:34,722 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-30 14:40:34,724 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-30 14:40:34,741 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-30 14:40:34,742 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 14:40:34,752 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490910034, 'registration_client_uri': 'https://localhost:8040/registration?client_id=P8Ju6wQJCVuK', 'registration_access_token': 'LxXvPrqjUCQt4qwMsb5IK4hvb7zFlctK', 'client_salt': '3AUCwl8x', 'client_id': 'P8Ju6wQJCVuK', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1490996434}
2017-03-30 14:40:34,752 oic.utils.keyio:DEBUG loading keys for issuer: P8Ju6wQJCVuK
2017-03-30 14:40:34,752 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 14:40:34,752 oic.oic.provider:DEBUG found 0 keys for client_id=P8Ju6wQJCVuK
2017-03-30 14:40:34,753 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490910034, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=P8Ju6wQJCVuK', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'LxXvPrqjUCQt4qwMsb5IK4hvb7zFlctK', 'response_types': [u'code'], 'client_id': 'P8Ju6wQJCVuK', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1490996434}
2017-03-30 14:40:52,330 oic.oauth2.provider:DEBUG Request: 'nonce=iri2dXjuwcSh7BiAwzn5XwaC2W3HJ2nt&acr_values=SAML&state=Cjb5XubNefeqY9k0absJI7MskX9qiwWy&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=P8Ju6wQJCVuK&scope=openid+profile+email+address+phone'
2017-03-30 14:40:52,330 oic.oic:DEBUG Found 3 verify keys
2017-03-30 14:40:52,332 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'iri2dXjuwcSh7BiAwzn5XwaC2W3HJ2nt', 'acr_values': 'SAML', 'state': 'Cjb5XubNefeqY9k0absJI7MskX9qiwWy', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'P8Ju6wQJCVuK', 'scope': 'openid profile email address phone'}
2017-03-30 14:40:52,337 oic.oic.provider:INFO authorization_request: {'nonce': 'iri2dXjuwcSh7BiAwzn5XwaC2W3HJ2nt', 'acr_values': 'SAML', 'state': 'Cjb5XubNefeqY9k0absJI7MskX9qiwWy', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'P8Ju6wQJCVuK', 'scope': 'openid profile email address phone'}
2017-03-30 14:40:52,337 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-30 14:40:52,337 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-30 14:40:52,337 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-30 14:40:52,337 oic.oauth2.provider:INFO No active authentication
2017-03-30 14:40:52,338 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/: verify', 'query': 'nonce=iri2dXjuwcSh7BiAwzn5XwaC2W3HJ2nt&acr_values=SAML&state=Cjb5XubNefeqY9k0absJI7MskX9qiwWy&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=P8Ju6wQJCVuK&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-30 14:41:01,027 root:DEBUG unknown side: : verify
2017-03-30 14:41:18,243 oic.utils.authn.user:DEBUG verify()
2017-03-30 14:41:18,243 oic.utils.authn.user:DEBUG dict: {}
2017-03-30 14:41:18,243 oic.utils.authn.user:DEBUG Password verification failed: 'password'
2017-03-30 14:42:56,185 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-30 14:42:56,187 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-30 14:42:56,204 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-30 14:42:56,204 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 14:42:56,214 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490910176, 'registration_client_uri': 'https://localhost:8040/registration?client_id=7KFr0BjHon8G', 'registration_access_token': 'JSsZaLBSUtQwgTnGJWGfpXl2LqWPHmZv', 'client_salt': 'tDedUf8N', 'client_id': '7KFr0BjHon8G', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1490996576}
2017-03-30 14:42:56,214 oic.utils.keyio:DEBUG loading keys for issuer: 7KFr0BjHon8G
2017-03-30 14:42:56,214 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 14:42:56,215 oic.oic.provider:DEBUG found 0 keys for client_id=7KFr0BjHon8G
2017-03-30 14:42:56,216 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490910176, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=7KFr0BjHon8G', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'JSsZaLBSUtQwgTnGJWGfpXl2LqWPHmZv', 'response_types': [u'code'], 'client_id': '7KFr0BjHon8G', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1490996576}
2017-03-30 14:43:12,690 oic.oauth2.provider:DEBUG Request: 'nonce=tjEHnKZKVQCGxpdezK8V5aiAnufN750B&acr_values=SAML&state=eybQ5iw96PWRjozkup6ZRclGcYrnFrmX&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=7KFr0BjHon8G&scope=openid+profile+email+address+phone'
2017-03-30 14:43:12,690 oic.oic:DEBUG Found 3 verify keys
2017-03-30 14:43:12,691 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'tjEHnKZKVQCGxpdezK8V5aiAnufN750B', 'acr_values': 'SAML', 'state': 'eybQ5iw96PWRjozkup6ZRclGcYrnFrmX', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': '7KFr0BjHon8G', 'scope': 'openid profile email address phone'}
2017-03-30 14:43:12,697 oic.oic.provider:INFO authorization_request: {'nonce': 'tjEHnKZKVQCGxpdezK8V5aiAnufN750B', 'acr_values': 'SAML', 'state': 'eybQ5iw96PWRjozkup6ZRclGcYrnFrmX', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': '7KFr0BjHon8G', 'scope': 'openid profile email address phone'}
2017-03-30 14:43:12,697 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-30 14:43:12,697 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-30 14:43:12,697 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-30 14:43:12,698 oic.oauth2.provider:INFO No active authentication
2017-03-30 14:43:12,698 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/:verify', 'query': 'nonce=tjEHnKZKVQCGxpdezK8V5aiAnufN750B&acr_values=SAML&state=eybQ5iw96PWRjozkup6ZRclGcYrnFrmX&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=7KFr0BjHon8G&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-30 14:43:23,820 root:DEBUG unknown side: :verify
2017-03-30 14:44:25,616 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-30 14:44:25,618 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-30 14:44:25,636 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-30 14:44:25,636 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 14:44:25,645 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490910265, 'registration_client_uri': 'https://localhost:8040/registration?client_id=L8So2lyS5taC', 'registration_access_token': 'syt2ZvVZs2RqX8Bri0iiwAu94Y8PQhsU', 'client_salt': 'u8464U4h', 'client_id': 'L8So2lyS5taC', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1490996665}
2017-03-30 14:44:25,646 oic.utils.keyio:DEBUG loading keys for issuer: L8So2lyS5taC
2017-03-30 14:44:25,646 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 14:44:25,646 oic.oic.provider:DEBUG found 0 keys for client_id=L8So2lyS5taC
2017-03-30 14:44:25,647 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490910265, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=L8So2lyS5taC', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'syt2ZvVZs2RqX8Bri0iiwAu94Y8PQhsU', 'response_types': [u'code'], 'client_id': 'L8So2lyS5taC', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1490996665}
2017-03-30 14:44:30,916 oic.oauth2.provider:DEBUG Request: 'nonce=gur6BCljELjsdrzxR2DksQPzDpWRRZWl&acr_values=SAML&state=qU10rCK3yXkUyGn9wKVzJzMhcDEWBGcU&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=L8So2lyS5taC&scope=openid+profile+email+address+phone'
2017-03-30 14:44:30,917 oic.oic:DEBUG Found 3 verify keys
2017-03-30 14:44:30,917 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'gur6BCljELjsdrzxR2DksQPzDpWRRZWl', 'acr_values': 'SAML', 'state': 'qU10rCK3yXkUyGn9wKVzJzMhcDEWBGcU', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'L8So2lyS5taC', 'scope': 'openid profile email address phone'}
2017-03-30 14:44:30,923 oic.oic.provider:INFO authorization_request: {'nonce': 'gur6BCljELjsdrzxR2DksQPzDpWRRZWl', 'acr_values': 'SAML', 'state': 'qU10rCK3yXkUyGn9wKVzJzMhcDEWBGcU', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'L8So2lyS5taC', 'scope': 'openid profile email address phone'}
2017-03-30 14:44:30,923 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-30 14:44:30,923 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-30 14:44:30,923 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-30 14:44:30,923 oic.oauth2.provider:INFO No active authentication
2017-03-30 14:44:30,924 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=gur6BCljELjsdrzxR2DksQPzDpWRRZWl&acr_values=SAML&state=qU10rCK3yXkUyGn9wKVzJzMhcDEWBGcU&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=L8So2lyS5taC&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-30 14:44:37,901 oic.utils.authn.user:DEBUG verify(query=nonce%3Dgur6BCljELjsdrzxR2DksQPzDpWRRZWl%26acr_values%3DSAML%26state%3DqU10rCK3yXkUyGn9wKVzJzMhcDEWBGcU%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3DL8So2lyS5taC%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-03-30 14:44:37,901 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=gur6BCljELjsdrzxR2DksQPzDpWRRZWl&acr_values=SAML&state=qU10rCK3yXkUyGn9wKVzJzMhcDEWBGcU&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=L8So2lyS5taC&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-03-30 14:44:37,901 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-03-30 14:44:37,905 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'gur6BCljELjsdrzxR2DksQPzDpWRRZWl'], u'acr_values': [u'SAML'], u'state': [u'qU10rCK3yXkUyGn9wKVzJzMhcDEWBGcU'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'L8So2lyS5taC'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-03-30 14:44:37,913 oic.oauth2.provider:DEBUG Request: 'nonce=gur6BCljELjsdrzxR2DksQPzDpWRRZWl&acr_values=SAML&state=qU10rCK3yXkUyGn9wKVzJzMhcDEWBGcU&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=L8So2lyS5taC&upm_answer=true&scope=openid+profile+email+address+phone'
2017-03-30 14:44:37,913 oic.oic:DEBUG Found 3 verify keys
2017-03-30 14:44:37,913 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'gur6BCljELjsdrzxR2DksQPzDpWRRZWl', 'acr_values': 'SAML', 'state': 'qU10rCK3yXkUyGn9wKVzJzMhcDEWBGcU', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'L8So2lyS5taC', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-30 14:44:37,914 oic.oic.provider:INFO authorization_request: {'nonce': 'gur6BCljELjsdrzxR2DksQPzDpWRRZWl', 'acr_values': 'SAML', 'state': 'qU10rCK3yXkUyGn9wKVzJzMhcDEWBGcU', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'L8So2lyS5taC', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-30 14:44:37,914 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-30 14:44:37,914 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-30 14:44:37,914 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-30 14:44:37,915 oic.oauth2.provider:INFO No active authentication
2017-03-30 14:44:37,915 oic.oic.provider:DEBUG - authenticated -
2017-03-30 14:44:37,915 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-03-30 14:44:37,915 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['d5dffb1f747467b6819c478f3b1d49116169304893e5b7d96aec3961']}
2017-03-30 14:44:37,915 oic.oauth2.provider:DEBUG - in authenticated() -
2017-03-30 14:44:37,915 oic.oauth2.provider:DEBUG response type: ['code']
2017-03-30 14:44:37,917 oicServer:ERROR 'newstr' object has no attribute 'items'
Traceback (most recent call last):
  File "./server.py", line 324, in application
    return callback(environ, start_response)
  File "./server.py", line 205, in authorization
    self.oas.authorization_endpoint, logger=logger)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/utils/http_util.py", line 411, in wsgi_wrapper
    args = func(**kwargs)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oic/provider.py", line 773, in authorization_endpoint
    return self.authz_part2(authnres["user"], areq, sid, cookie=cookie)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oic/provider.py", line 776, in authz_part2
    result = self._complete_authz(user, areq, sid, **kwargs)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oauth2/provider.py", line 724, in _complete_authz
    _c.load(_kaka)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/Cookie.py", line 643, in load
    for k, v in rawdata.items():
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/future/types/newstr.py", line 331, in __getattribute__
    return super(newstr, self).__getattribute__(name)
AttributeError: 'newstr' object has no attribute 'items'
2017-03-30 15:57:41,396 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-30 15:57:41,397 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-30 15:57:41,414 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-30 15:57:41,415 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 15:57:41,425 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490914661, 'registration_client_uri': 'https://localhost:8040/registration?client_id=eXlX2DAwFTgg', 'registration_access_token': 'yTayf7eGuuJOMr5wjeECXyEM3ULBaMWO', 'client_salt': 'uGND2rAh', 'client_id': 'eXlX2DAwFTgg', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491001061}
2017-03-30 15:57:41,425 oic.utils.keyio:DEBUG loading keys for issuer: eXlX2DAwFTgg
2017-03-30 15:57:41,425 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 15:57:41,425 oic.oic.provider:DEBUG found 0 keys for client_id=eXlX2DAwFTgg
2017-03-30 15:57:41,427 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490914661, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=eXlX2DAwFTgg', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'yTayf7eGuuJOMr5wjeECXyEM3ULBaMWO', 'response_types': [u'code'], 'client_id': 'eXlX2DAwFTgg', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491001061}
2017-03-30 16:01:00,420 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-30 16:01:00,422 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-30 16:01:00,439 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-30 16:01:00,439 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 16:01:00,448 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490914860, 'registration_client_uri': 'https://localhost:8040/registration?client_id=GSIDOhWxELdM', 'registration_access_token': 'ClwWFfsif18Tqnbx7tGZy37s6CgbK8pF', 'client_salt': 'nZPiyho3', 'client_id': 'GSIDOhWxELdM', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491001260}
2017-03-30 16:01:00,449 oic.utils.keyio:DEBUG loading keys for issuer: GSIDOhWxELdM
2017-03-30 16:01:00,449 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 16:01:00,449 oic.oic.provider:DEBUG found 0 keys for client_id=GSIDOhWxELdM
2017-03-30 16:01:00,450 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490914860, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=GSIDOhWxELdM', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'ClwWFfsif18Tqnbx7tGZy37s6CgbK8pF', 'response_types': [u'code'], 'client_id': 'GSIDOhWxELdM', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491001260}
2017-03-30 16:05:55,086 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-30 16:05:55,088 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-30 16:05:55,104 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-30 16:05:55,105 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 16:05:55,108 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490915155, 'registration_client_uri': 'https://localhost:8040/registration?client_id=qCnITUsJ1LU7', 'registration_access_token': 'Sf6ppnTj6lmnKQGGcGPU3o7r5XCuhK2i', 'client_salt': '8vHkuvDT', 'client_id': 'qCnITUsJ1LU7', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491001555}
2017-03-30 16:05:55,109 oic.utils.keyio:DEBUG loading keys for issuer: qCnITUsJ1LU7
2017-03-30 16:05:55,109 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 16:05:55,109 oic.oic.provider:DEBUG found 0 keys for client_id=qCnITUsJ1LU7
2017-03-30 16:05:55,110 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490915155, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=qCnITUsJ1LU7', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'Sf6ppnTj6lmnKQGGcGPU3o7r5XCuhK2i', 'response_types': [u'code'], 'client_id': 'qCnITUsJ1LU7', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491001555}
2017-03-30 16:06:42,333 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-30 16:06:42,334 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-30 16:06:42,350 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-30 16:06:42,350 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 16:06:42,352 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490915202, 'registration_client_uri': 'https://localhost:8040/registration?client_id=lxa2Icl9UASf', 'registration_access_token': 'HSOVF4mgTekukwJXxZ9XG7vSlldeCQIi', 'client_salt': 'CphlJLAQ', 'client_id': 'lxa2Icl9UASf', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491001602}
2017-03-30 16:06:42,352 oic.utils.keyio:DEBUG loading keys for issuer: lxa2Icl9UASf
2017-03-30 16:06:42,352 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 16:06:42,352 oic.oic.provider:DEBUG found 0 keys for client_id=lxa2Icl9UASf
2017-03-30 16:06:42,352 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490915202, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=lxa2Icl9UASf', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'HSOVF4mgTekukwJXxZ9XG7vSlldeCQIi', 'response_types': [u'code'], 'client_id': 'lxa2Icl9UASf', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491001602}
2017-03-30 16:13:26,782 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-30 16:13:26,784 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-30 16:13:26,823 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-30 16:13:26,824 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 16:13:26,828 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490915606, 'registration_client_uri': 'https://localhost:8040/registration?client_id=j8E8F6eYsvxG', 'registration_access_token': 'mNHKownYWZcuEhg7PhyWT8xOnVm7kFE0', 'client_salt': 'R0EnEjHG', 'client_id': 'j8E8F6eYsvxG', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491002006}
2017-03-30 16:13:26,828 oic.utils.keyio:DEBUG loading keys for issuer: j8E8F6eYsvxG
2017-03-30 16:13:26,828 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 16:13:26,828 oic.oic.provider:DEBUG found 0 keys for client_id=j8E8F6eYsvxG
2017-03-30 16:13:26,829 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490915606, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=j8E8F6eYsvxG', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'mNHKownYWZcuEhg7PhyWT8xOnVm7kFE0', 'response_types': [u'code'], 'client_id': 'j8E8F6eYsvxG', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491002006}
2017-03-30 16:14:44,950 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-30 16:14:44,952 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-30 16:14:44,965 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-30 16:14:44,966 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 16:14:44,975 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490915684, 'registration_client_uri': 'https://localhost:8040/registration?client_id=WKWujcE6hraW', 'registration_access_token': 'f1Ibfsfmf6kGeMuMHsZqtleMz3C4SpVa', 'client_salt': '215fYCzA', 'client_id': 'WKWujcE6hraW', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491002084}
2017-03-30 16:14:44,975 oic.utils.keyio:DEBUG loading keys for issuer: WKWujcE6hraW
2017-03-30 16:14:44,975 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 16:14:44,975 oic.oic.provider:DEBUG found 0 keys for client_id=WKWujcE6hraW
2017-03-30 16:14:44,976 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490915684, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=WKWujcE6hraW', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'f1Ibfsfmf6kGeMuMHsZqtleMz3C4SpVa', 'response_types': [u'code'], 'client_id': 'WKWujcE6hraW', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491002084}
2017-03-30 16:17:08,739 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-30 16:17:08,741 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-30 16:17:08,758 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-30 16:17:08,758 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 16:17:08,768 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490915828, 'registration_client_uri': 'https://localhost:8040/registration?client_id=khTwsg3GhO7D', 'registration_access_token': 'EJuRjxAYx7fwgjT5klcMDdUNlQbt3pIN', 'client_salt': 'ccrqd1OD', 'client_id': 'khTwsg3GhO7D', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491002228}
2017-03-30 16:17:08,768 oic.utils.keyio:DEBUG loading keys for issuer: khTwsg3GhO7D
2017-03-30 16:17:08,769 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 16:17:08,769 oic.oic.provider:DEBUG found 0 keys for client_id=khTwsg3GhO7D
2017-03-30 16:17:08,770 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490915828, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=khTwsg3GhO7D', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'EJuRjxAYx7fwgjT5klcMDdUNlQbt3pIN', 'response_types': [u'code'], 'client_id': 'khTwsg3GhO7D', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491002228}
2017-03-30 16:21:55,120 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-30 16:21:55,122 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-30 16:21:55,139 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-30 16:21:55,139 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 16:21:55,143 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490916115, 'registration_client_uri': 'https://localhost:8040/registration?client_id=DMpesWIVVGJH', 'registration_access_token': 'ktSO1BtymPDDWwxXXaPyNrMFjbVe5Gsl', 'client_salt': 'Yk3dLoGz', 'client_id': 'DMpesWIVVGJH', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491002515}
2017-03-30 16:21:55,143 oic.utils.keyio:DEBUG loading keys for issuer: DMpesWIVVGJH
2017-03-30 16:21:55,143 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 16:21:55,143 oic.oic.provider:DEBUG found 0 keys for client_id=DMpesWIVVGJH
2017-03-30 16:21:55,144 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490916115, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=DMpesWIVVGJH', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'ktSO1BtymPDDWwxXXaPyNrMFjbVe5Gsl', 'response_types': [u'code'], 'client_id': 'DMpesWIVVGJH', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491002515}
2017-03-30 16:28:44,043 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-30 16:28:44,045 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-30 16:28:44,062 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-30 16:28:44,062 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 16:28:44,072 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490916524, 'registration_client_uri': 'https://localhost:8040/registration?client_id=pUHoD1aWYyD1', 'registration_access_token': 's8ala7ARjD7LFDJmLuZ8HUz2LVKmsjYa', 'client_salt': 'Aalwy2jI', 'client_id': 'pUHoD1aWYyD1', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491002924}
2017-03-30 16:28:44,072 oic.utils.keyio:DEBUG loading keys for issuer: pUHoD1aWYyD1
2017-03-30 16:28:44,073 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 16:28:44,073 oic.oic.provider:DEBUG found 0 keys for client_id=pUHoD1aWYyD1
2017-03-30 16:28:44,074 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490916524, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=pUHoD1aWYyD1', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 's8ala7ARjD7LFDJmLuZ8HUz2LVKmsjYa', 'response_types': [u'code'], 'client_id': 'pUHoD1aWYyD1', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491002924}
2017-03-30 16:35:56,276 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-30 16:35:56,278 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-30 16:35:56,298 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-30 16:35:56,298 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 16:35:56,309 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490916956, 'registration_client_uri': 'https://localhost:8040/registration?client_id=C6PtqJtmGBeS', 'registration_access_token': 'L90xuqBbWMnSWjCLI23p562RM80trx0E', 'client_salt': 'm0gmPrcH', 'client_id': 'C6PtqJtmGBeS', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491003356}
2017-03-30 16:35:56,309 oic.utils.keyio:DEBUG loading keys for issuer: C6PtqJtmGBeS
2017-03-30 16:35:56,310 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 16:35:56,310 oic.oic.provider:DEBUG found 0 keys for client_id=C6PtqJtmGBeS
2017-03-30 16:35:56,311 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490916956, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=C6PtqJtmGBeS', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'L90xuqBbWMnSWjCLI23p562RM80trx0E', 'response_types': [u'code'], 'client_id': 'C6PtqJtmGBeS', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491003356}
2017-03-30 16:37:56,761 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-30 16:37:56,763 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-30 16:37:56,781 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-30 16:37:56,781 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 16:37:56,790 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490917076, 'registration_client_uri': 'https://localhost:8040/registration?client_id=FLWRyxFt0UcI', 'registration_access_token': 'XqVB1gHIu3fw0fCvY8OwoPaFUniRYcfF', 'client_salt': 'nl86MqxD', 'client_id': 'FLWRyxFt0UcI', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491003476}
2017-03-30 16:37:56,791 oic.utils.keyio:DEBUG loading keys for issuer: FLWRyxFt0UcI
2017-03-30 16:37:56,791 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 16:37:56,791 oic.oic.provider:DEBUG found 0 keys for client_id=FLWRyxFt0UcI
2017-03-30 16:37:56,792 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490917076, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=FLWRyxFt0UcI', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'XqVB1gHIu3fw0fCvY8OwoPaFUniRYcfF', 'response_types': [u'code'], 'client_id': 'FLWRyxFt0UcI', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491003476}
2017-03-30 16:38:33,662 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-30 16:38:33,664 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-30 16:38:33,681 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-30 16:38:33,681 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 16:38:33,691 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490917113, 'registration_client_uri': 'https://localhost:8040/registration?client_id=ixc1gYz45Mo5', 'registration_access_token': 'w31dS45Ze5Zd9ZNNx9fSr7JyKzj4Fihn', 'client_salt': 'qsOYLaCJ', 'client_id': 'ixc1gYz45Mo5', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491003513}
2017-03-30 16:38:33,691 oic.utils.keyio:DEBUG loading keys for issuer: ixc1gYz45Mo5
2017-03-30 16:38:33,691 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-30 16:38:33,691 oic.oic.provider:DEBUG found 0 keys for client_id=ixc1gYz45Mo5
2017-03-30 16:38:33,692 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490917113, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=ixc1gYz45Mo5', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'w31dS45Ze5Zd9ZNNx9fSr7JyKzj4Fihn', 'response_types': [u'code'], 'client_id': 'ixc1gYz45Mo5', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491003513}
2017-03-31 10:34:54,096 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-31 10:34:54,098 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-31 10:34:54,115 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-31 10:34:54,115 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 10:34:54,119 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490981694, 'registration_client_uri': 'https://localhost:8040/registration?client_id=KIbeZUx8w6tI', 'registration_access_token': 'LABC7KBlif8H8GmrHbNvUZPGX4l8Gfvz', 'client_salt': 'mcmtWy2n', 'client_id': 'KIbeZUx8w6tI', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491068094}
2017-03-31 10:34:54,119 oic.utils.keyio:DEBUG loading keys for issuer: KIbeZUx8w6tI
2017-03-31 10:34:54,120 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 10:34:54,120 oic.oic.provider:DEBUG found 0 keys for client_id=KIbeZUx8w6tI
2017-03-31 10:34:54,121 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490981694, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=KIbeZUx8w6tI', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'LABC7KBlif8H8GmrHbNvUZPGX4l8Gfvz', 'response_types': [u'code'], 'client_id': 'KIbeZUx8w6tI', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491068094}
2017-03-31 10:39:57,760 oic.oauth2.provider:DEBUG Request: 'nonce=RjBWRZmuHd7ShGMNDVDP6mSVUGpywK2H&acr_values=SAML&state=7H2m7KCR6v1AQ6uh6mPF8F62dVJBQXl6&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=KIbeZUx8w6tI&scope=openid+profile+email+address+phone'
2017-03-31 10:39:57,760 oic.oic:DEBUG Found 3 verify keys
2017-03-31 10:39:57,761 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'RjBWRZmuHd7ShGMNDVDP6mSVUGpywK2H', 'acr_values': 'SAML', 'state': '7H2m7KCR6v1AQ6uh6mPF8F62dVJBQXl6', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'KIbeZUx8w6tI', 'scope': 'openid profile email address phone'}
2017-03-31 10:39:57,767 oic.oic.provider:INFO authorization_request: {'nonce': 'RjBWRZmuHd7ShGMNDVDP6mSVUGpywK2H', 'acr_values': 'SAML', 'state': '7H2m7KCR6v1AQ6uh6mPF8F62dVJBQXl6', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'KIbeZUx8w6tI', 'scope': 'openid profile email address phone'}
2017-03-31 10:39:57,767 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 10:39:57,768 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 10:39:57,768 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 10:39:57,768 oic.oauth2.provider:INFO No active authentication
2017-03-31 10:39:57,768 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=RjBWRZmuHd7ShGMNDVDP6mSVUGpywK2H&acr_values=SAML&state=7H2m7KCR6v1AQ6uh6mPF8F62dVJBQXl6&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=KIbeZUx8w6tI&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-31 10:39:57,804 root:DEBUG unknown side: favicon.ico
2017-03-31 10:40:32,212 oic.utils.authn.user:DEBUG verify(query=nonce%3DRjBWRZmuHd7ShGMNDVDP6mSVUGpywK2H%26acr_values%3DSAML%26state%3D7H2m7KCR6v1AQ6uh6mPF8F62dVJBQXl6%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3DKIbeZUx8w6tI%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-03-31 10:40:32,212 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=RjBWRZmuHd7ShGMNDVDP6mSVUGpywK2H&acr_values=SAML&state=7H2m7KCR6v1AQ6uh6mPF8F62dVJBQXl6&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=KIbeZUx8w6tI&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-03-31 10:40:32,212 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-03-31 10:40:32,216 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'RjBWRZmuHd7ShGMNDVDP6mSVUGpywK2H'], u'acr_values': [u'SAML'], u'state': [u'7H2m7KCR6v1AQ6uh6mPF8F62dVJBQXl6'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'KIbeZUx8w6tI'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-03-31 10:40:32,223 oic.oauth2.provider:DEBUG Request: 'nonce=RjBWRZmuHd7ShGMNDVDP6mSVUGpywK2H&acr_values=SAML&state=7H2m7KCR6v1AQ6uh6mPF8F62dVJBQXl6&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=KIbeZUx8w6tI&upm_answer=true&scope=openid+profile+email+address+phone'
2017-03-31 10:40:32,223 oic.oic:DEBUG Found 3 verify keys
2017-03-31 10:40:32,224 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'RjBWRZmuHd7ShGMNDVDP6mSVUGpywK2H', 'acr_values': 'SAML', 'state': '7H2m7KCR6v1AQ6uh6mPF8F62dVJBQXl6', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'KIbeZUx8w6tI', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 10:40:32,224 oic.oic.provider:INFO authorization_request: {'nonce': 'RjBWRZmuHd7ShGMNDVDP6mSVUGpywK2H', 'acr_values': 'SAML', 'state': '7H2m7KCR6v1AQ6uh6mPF8F62dVJBQXl6', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'KIbeZUx8w6tI', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 10:40:32,225 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 10:40:32,225 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 10:40:32,225 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 10:40:32,225 oic.oauth2.provider:INFO No active authentication
2017-03-31 10:40:32,225 oic.oic.provider:DEBUG - authenticated -
2017-03-31 10:40:32,225 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-03-31 10:40:32,225 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['b0d250455c2687fb0c39d35954fa9d4525d546f209eed00bd642223e']}
2017-03-31 10:40:32,226 oic.oauth2.provider:DEBUG - in authenticated() -
2017-03-31 10:40:32,226 oic.oauth2.provider:DEBUG response type: ['code']
2017-03-31 10:40:32,230 oicServer:ERROR 'newstr' object has no attribute 'items'
Traceback (most recent call last):
  File "./server.py", line 323, in application
    return callback(environ, start_response)
  File "./server.py", line 201, in authorization
    self.oas.authorization_endpoint, logger=logger)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/utils/http_util.py", line 411, in wsgi_wrapper
    args = func(**kwargs)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oic/provider.py", line 773, in authorization_endpoint
    return self.authz_part2(authnres["user"], areq, sid, cookie=cookie)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oic/provider.py", line 776, in authz_part2
    result = self._complete_authz(user, areq, sid, **kwargs)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oauth2/provider.py", line 724, in _complete_authz
    _c.load(_kaka)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/Cookie.py", line 643, in load
    for k, v in rawdata.items():
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/future/types/newstr.py", line 331, in __getattribute__
    return super(newstr, self).__getattribute__(name)
AttributeError: 'newstr' object has no attribute 'items'
2017-03-31 10:46:29,182 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-31 10:46:29,184 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-31 10:46:29,201 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-31 10:46:29,201 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 10:46:29,211 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490982389, 'registration_client_uri': 'https://localhost:8040/registration?client_id=weYscis82Zkk', 'registration_access_token': 'qd8vsCJZuW0jjkTeMhU1aeVFG4GvIJ5w', 'client_salt': 'F16XBCOj', 'client_id': 'weYscis82Zkk', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491068789}
2017-03-31 10:46:29,211 oic.utils.keyio:DEBUG loading keys for issuer: weYscis82Zkk
2017-03-31 10:46:29,211 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 10:46:29,211 oic.oic.provider:DEBUG found 0 keys for client_id=weYscis82Zkk
2017-03-31 10:46:29,212 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490982389, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=weYscis82Zkk', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'qd8vsCJZuW0jjkTeMhU1aeVFG4GvIJ5w', 'response_types': [u'code'], 'client_id': 'weYscis82Zkk', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491068789}
2017-03-31 10:46:36,491 oic.oauth2.provider:DEBUG Request: 'nonce=p1vTbTDLWeRWgkxI8PG3n4g2mTltlbNC&acr_values=SAML&state=qGdPBJM4D2yYsiJKC8CXfXgw1rfgzrV9&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=weYscis82Zkk&scope=openid+profile+email+address+phone'
2017-03-31 10:46:36,491 oic.oic:DEBUG Found 3 verify keys
2017-03-31 10:46:36,492 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'p1vTbTDLWeRWgkxI8PG3n4g2mTltlbNC', 'acr_values': 'SAML', 'state': 'qGdPBJM4D2yYsiJKC8CXfXgw1rfgzrV9', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'weYscis82Zkk', 'scope': 'openid profile email address phone'}
2017-03-31 10:46:36,498 oic.oic.provider:INFO authorization_request: {'nonce': 'p1vTbTDLWeRWgkxI8PG3n4g2mTltlbNC', 'acr_values': 'SAML', 'state': 'qGdPBJM4D2yYsiJKC8CXfXgw1rfgzrV9', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'weYscis82Zkk', 'scope': 'openid profile email address phone'}
2017-03-31 10:46:36,498 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 10:46:36,498 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 10:46:36,498 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 10:46:36,498 oic.oauth2.provider:INFO No active authentication
2017-03-31 10:46:36,498 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=p1vTbTDLWeRWgkxI8PG3n4g2mTltlbNC&acr_values=SAML&state=qGdPBJM4D2yYsiJKC8CXfXgw1rfgzrV9&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=weYscis82Zkk&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-31 10:47:24,014 oic.utils.authn.user:DEBUG verify(query=nonce%3Dp1vTbTDLWeRWgkxI8PG3n4g2mTltlbNC%26acr_values%3DSAML%26state%3DqGdPBJM4D2yYsiJKC8CXfXgw1rfgzrV9%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3DweYscis82Zkk%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-03-31 10:47:24,015 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=p1vTbTDLWeRWgkxI8PG3n4g2mTltlbNC&acr_values=SAML&state=qGdPBJM4D2yYsiJKC8CXfXgw1rfgzrV9&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=weYscis82Zkk&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-03-31 10:47:24,015 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-03-31 10:47:24,018 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'p1vTbTDLWeRWgkxI8PG3n4g2mTltlbNC'], u'acr_values': [u'SAML'], u'state': [u'qGdPBJM4D2yYsiJKC8CXfXgw1rfgzrV9'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'weYscis82Zkk'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-03-31 10:47:24,025 oic.oauth2.provider:DEBUG Request: 'nonce=p1vTbTDLWeRWgkxI8PG3n4g2mTltlbNC&acr_values=SAML&state=qGdPBJM4D2yYsiJKC8CXfXgw1rfgzrV9&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=weYscis82Zkk&upm_answer=true&scope=openid+profile+email+address+phone'
2017-03-31 10:47:24,026 oic.oic:DEBUG Found 3 verify keys
2017-03-31 10:47:24,026 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'p1vTbTDLWeRWgkxI8PG3n4g2mTltlbNC', 'acr_values': 'SAML', 'state': 'qGdPBJM4D2yYsiJKC8CXfXgw1rfgzrV9', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'weYscis82Zkk', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 10:47:24,027 oic.oic.provider:INFO authorization_request: {'nonce': 'p1vTbTDLWeRWgkxI8PG3n4g2mTltlbNC', 'acr_values': 'SAML', 'state': 'qGdPBJM4D2yYsiJKC8CXfXgw1rfgzrV9', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'weYscis82Zkk', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 10:47:24,027 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 10:47:24,027 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 10:47:24,027 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 10:47:24,027 oic.oauth2.provider:INFO No active authentication
2017-03-31 10:47:24,027 oic.oic.provider:DEBUG - authenticated -
2017-03-31 10:47:24,028 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-03-31 10:47:24,028 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['c814575714bb10cca48c9281d335597772ba509b2f3fe04462ef20a0']}
2017-03-31 10:47:24,028 oic.oauth2.provider:DEBUG - in authenticated() -
2017-03-31 10:47:24,028 oic.oauth2.provider:DEBUG response type: ['code']
2017-03-31 10:47:24,030 oicServer:ERROR 'newstr' object has no attribute 'items'
Traceback (most recent call last):
  File "./server.py", line 323, in application
    return callback(environ, start_response)
  File "./server.py", line 201, in authorization
    self.oas.authorization_endpoint, logger=logger)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/utils/http_util.py", line 411, in wsgi_wrapper
    args = func(**kwargs)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oic/provider.py", line 773, in authorization_endpoint
    return self.authz_part2(authnres["user"], areq, sid, cookie=cookie)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oic/provider.py", line 776, in authz_part2
    result = self._complete_authz(user, areq, sid, **kwargs)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oauth2/provider.py", line 724, in _complete_authz
    _c.load(_kaka)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/Cookie.py", line 643, in load
    for k, v in rawdata.items():
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/future/types/newstr.py", line 331, in __getattribute__
    return super(newstr, self).__getattribute__(name)
AttributeError: 'newstr' object has no attribute 'items'
2017-03-31 10:55:52,283 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-31 10:55:52,285 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-31 10:55:52,299 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-31 10:55:52,299 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 10:55:52,309 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490982952, 'registration_client_uri': 'https://localhost:8040/registration?client_id=MmDrzIsmQgZi', 'registration_access_token': 'j4V9gf1TmVNjPBNkuBT6RSh6l1vZM7Ad', 'client_salt': 'AcSRj6Yn', 'client_id': 'MmDrzIsmQgZi', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491069352}
2017-03-31 10:55:52,309 oic.utils.keyio:DEBUG loading keys for issuer: MmDrzIsmQgZi
2017-03-31 10:55:52,309 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 10:55:52,309 oic.oic.provider:DEBUG found 0 keys for client_id=MmDrzIsmQgZi
2017-03-31 10:55:52,310 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490982952, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=MmDrzIsmQgZi', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'j4V9gf1TmVNjPBNkuBT6RSh6l1vZM7Ad', 'response_types': [u'code'], 'client_id': 'MmDrzIsmQgZi', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491069352}
2017-03-31 10:56:01,003 oic.oauth2.provider:DEBUG Request: 'nonce=G4ilI01YolBbThYsgHDKLTDrLnWaFTJR&acr_values=SAML&state=3XinG9ljWiJbHsnoAHHkN70aIvfZIzks&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=MmDrzIsmQgZi&scope=openid+profile+email+address+phone'
2017-03-31 10:56:01,003 oic.oic:DEBUG Found 3 verify keys
2017-03-31 10:56:01,004 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'G4ilI01YolBbThYsgHDKLTDrLnWaFTJR', 'acr_values': 'SAML', 'state': '3XinG9ljWiJbHsnoAHHkN70aIvfZIzks', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'MmDrzIsmQgZi', 'scope': 'openid profile email address phone'}
2017-03-31 10:56:01,010 oic.oic.provider:INFO authorization_request: {'nonce': 'G4ilI01YolBbThYsgHDKLTDrLnWaFTJR', 'acr_values': 'SAML', 'state': '3XinG9ljWiJbHsnoAHHkN70aIvfZIzks', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'MmDrzIsmQgZi', 'scope': 'openid profile email address phone'}
2017-03-31 10:56:01,010 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 10:56:01,010 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 10:56:01,010 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 10:56:01,010 oic.oauth2.provider:INFO No active authentication
2017-03-31 10:56:01,010 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=G4ilI01YolBbThYsgHDKLTDrLnWaFTJR&acr_values=SAML&state=3XinG9ljWiJbHsnoAHHkN70aIvfZIzks&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=MmDrzIsmQgZi&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-31 10:59:08,022 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-31 10:59:08,024 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-31 10:59:08,040 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-31 10:59:08,041 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 10:59:08,051 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490983148, 'registration_client_uri': 'https://localhost:8040/registration?client_id=zl4Tr6JxQgiU', 'registration_access_token': 'l2CbplVuglEY6l1VnM6Kfb9zl5nCOL76', 'client_salt': 'mN7mCGlX', 'client_id': 'zl4Tr6JxQgiU', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491069548}
2017-03-31 10:59:08,051 oic.utils.keyio:DEBUG loading keys for issuer: zl4Tr6JxQgiU
2017-03-31 10:59:08,051 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 10:59:08,051 oic.oic.provider:DEBUG found 0 keys for client_id=zl4Tr6JxQgiU
2017-03-31 10:59:08,053 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490983148, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=zl4Tr6JxQgiU', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'l2CbplVuglEY6l1VnM6Kfb9zl5nCOL76', 'response_types': [u'code'], 'client_id': 'zl4Tr6JxQgiU', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491069548}
2017-03-31 10:59:16,568 oic.oauth2.provider:DEBUG Request: 'nonce=hjMIcWtGFtwpXZZsZFXn6Id0OLOflXoG&acr_values=SAML&state=uFacwaawyEJM8wnkw98Zd2XvqVpl5isX&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=zl4Tr6JxQgiU&scope=openid+profile+email+address+phone'
2017-03-31 10:59:16,568 oic.oic:DEBUG Found 3 verify keys
2017-03-31 10:59:16,569 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'hjMIcWtGFtwpXZZsZFXn6Id0OLOflXoG', 'acr_values': 'SAML', 'state': 'uFacwaawyEJM8wnkw98Zd2XvqVpl5isX', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'zl4Tr6JxQgiU', 'scope': 'openid profile email address phone'}
2017-03-31 10:59:16,575 oic.oic.provider:INFO authorization_request: {'nonce': 'hjMIcWtGFtwpXZZsZFXn6Id0OLOflXoG', 'acr_values': 'SAML', 'state': 'uFacwaawyEJM8wnkw98Zd2XvqVpl5isX', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'zl4Tr6JxQgiU', 'scope': 'openid profile email address phone'}
2017-03-31 10:59:16,575 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 10:59:16,575 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 10:59:16,575 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 10:59:16,576 oic.oauth2.provider:INFO No active authentication
2017-03-31 10:59:16,576 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=hjMIcWtGFtwpXZZsZFXn6Id0OLOflXoG&acr_values=SAML&state=uFacwaawyEJM8wnkw98Zd2XvqVpl5isX&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=zl4Tr6JxQgiU&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-31 10:59:26,464 oic.utils.authn.user:DEBUG verify(query=nonce%3DhjMIcWtGFtwpXZZsZFXn6Id0OLOflXoG%26acr_values%3DSAML%26state%3DuFacwaawyEJM8wnkw98Zd2XvqVpl5isX%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3Dzl4Tr6JxQgiU%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-03-31 10:59:26,464 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=hjMIcWtGFtwpXZZsZFXn6Id0OLOflXoG&acr_values=SAML&state=uFacwaawyEJM8wnkw98Zd2XvqVpl5isX&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=zl4Tr6JxQgiU&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-03-31 10:59:26,464 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-03-31 10:59:26,467 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'hjMIcWtGFtwpXZZsZFXn6Id0OLOflXoG'], u'acr_values': [u'SAML'], u'state': [u'uFacwaawyEJM8wnkw98Zd2XvqVpl5isX'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'zl4Tr6JxQgiU'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-03-31 10:59:26,475 oic.oauth2.provider:DEBUG Request: 'nonce=hjMIcWtGFtwpXZZsZFXn6Id0OLOflXoG&acr_values=SAML&state=uFacwaawyEJM8wnkw98Zd2XvqVpl5isX&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=zl4Tr6JxQgiU&upm_answer=true&scope=openid+profile+email+address+phone'
2017-03-31 10:59:26,475 oic.oic:DEBUG Found 3 verify keys
2017-03-31 10:59:26,476 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'hjMIcWtGFtwpXZZsZFXn6Id0OLOflXoG', 'acr_values': 'SAML', 'state': 'uFacwaawyEJM8wnkw98Zd2XvqVpl5isX', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'zl4Tr6JxQgiU', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 10:59:26,476 oic.oic.provider:INFO authorization_request: {'nonce': 'hjMIcWtGFtwpXZZsZFXn6Id0OLOflXoG', 'acr_values': 'SAML', 'state': 'uFacwaawyEJM8wnkw98Zd2XvqVpl5isX', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'zl4Tr6JxQgiU', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 10:59:26,476 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 10:59:26,476 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 10:59:26,476 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 10:59:26,477 oic.oauth2.provider:INFO No active authentication
2017-03-31 10:59:26,477 oic.oic.provider:DEBUG - authenticated -
2017-03-31 10:59:26,477 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-03-31 10:59:26,477 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['6c6e0344d1aa2ccb1d8413e81fa9dc1216efc7056da6cdd5f211c26c']}
2017-03-31 10:59:26,477 oic.oauth2.provider:DEBUG - in authenticated() -
2017-03-31 10:59:26,477 oic.oauth2.provider:DEBUG response type: ['code']
2017-03-31 10:59:26,479 oicServer:ERROR 'newstr' object has no attribute 'items'
Traceback (most recent call last):
  File "./server.py", line 323, in application
    return callback(environ, start_response)
  File "./server.py", line 201, in authorization
    self.oas.authorization_endpoint, logger=logger)  # cookies required.
  File "/Users/vahid/pyProjects/pyoidc/src/oic/utils/http_util.py", line 411, in wsgi_wrapper
    args = func(**kwargs)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oic/provider.py", line 773, in authorization_endpoint
    return self.authz_part2(authnres["user"], areq, sid, cookie=cookie)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oic/provider.py", line 776, in authz_part2
    result = self._complete_authz(user, areq, sid, **kwargs)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oauth2/provider.py", line 724, in _complete_authz
    _c.load(_kaka)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/Cookie.py", line 643, in load
    for k, v in rawdata.items():
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/future/types/newstr.py", line 331, in __getattribute__
    return super(newstr, self).__getattribute__(name)
AttributeError: 'newstr' object has no attribute 'items'
2017-03-31 11:33:59,300 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-31 11:33:59,302 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-31 11:33:59,319 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-31 11:33:59,320 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 11:33:59,330 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490985239, 'registration_client_uri': 'https://localhost:8040/registration?client_id=jJnYdaKtKH14', 'registration_access_token': '5Uml9Sm5N7skXrUFmjONeNzPVV582VDC', 'client_salt': '4p2uOukt', 'client_id': 'jJnYdaKtKH14', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491071639}
2017-03-31 11:33:59,330 oic.utils.keyio:DEBUG loading keys for issuer: jJnYdaKtKH14
2017-03-31 11:33:59,330 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 11:33:59,330 oic.oic.provider:DEBUG found 0 keys for client_id=jJnYdaKtKH14
2017-03-31 11:33:59,332 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490985239, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=jJnYdaKtKH14', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': '5Uml9Sm5N7skXrUFmjONeNzPVV582VDC', 'response_types': [u'code'], 'client_id': 'jJnYdaKtKH14', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491071639}
2017-03-31 11:34:11,438 oic.oauth2.provider:DEBUG Request: 'nonce=bodqviOb3rnGqOuMJCrx1RaYZby679Po&acr_values=SAML&state=FM32m5Eh6UmiPnpWLj2qN2r3pIERbJ4h&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=jJnYdaKtKH14&scope=openid+profile+email+address+phone'
2017-03-31 11:34:11,438 oic.oic:DEBUG Found 3 verify keys
2017-03-31 11:34:11,438 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'bodqviOb3rnGqOuMJCrx1RaYZby679Po', 'acr_values': 'SAML', 'state': 'FM32m5Eh6UmiPnpWLj2qN2r3pIERbJ4h', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'jJnYdaKtKH14', 'scope': 'openid profile email address phone'}
2017-03-31 11:34:11,444 oic.oic.provider:INFO authorization_request: {'nonce': 'bodqviOb3rnGqOuMJCrx1RaYZby679Po', 'acr_values': 'SAML', 'state': 'FM32m5Eh6UmiPnpWLj2qN2r3pIERbJ4h', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'jJnYdaKtKH14', 'scope': 'openid profile email address phone'}
2017-03-31 11:34:11,445 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 11:34:11,445 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 11:34:11,445 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 11:34:11,445 oic.oauth2.provider:INFO No active authentication
2017-03-31 11:34:11,445 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=bodqviOb3rnGqOuMJCrx1RaYZby679Po&acr_values=SAML&state=FM32m5Eh6UmiPnpWLj2qN2r3pIERbJ4h&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=jJnYdaKtKH14&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-31 11:34:19,730 oic.utils.authn.user:DEBUG verify(query=nonce%3DbodqviOb3rnGqOuMJCrx1RaYZby679Po%26acr_values%3DSAML%26state%3DFM32m5Eh6UmiPnpWLj2qN2r3pIERbJ4h%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3DjJnYdaKtKH14%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-03-31 11:34:19,731 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=bodqviOb3rnGqOuMJCrx1RaYZby679Po&acr_values=SAML&state=FM32m5Eh6UmiPnpWLj2qN2r3pIERbJ4h&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=jJnYdaKtKH14&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-03-31 11:34:19,731 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-03-31 11:34:19,734 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'bodqviOb3rnGqOuMJCrx1RaYZby679Po'], u'acr_values': [u'SAML'], u'state': [u'FM32m5Eh6UmiPnpWLj2qN2r3pIERbJ4h'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'jJnYdaKtKH14'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-03-31 11:34:19,741 oic.oauth2.provider:DEBUG Request: 'nonce=bodqviOb3rnGqOuMJCrx1RaYZby679Po&acr_values=SAML&state=FM32m5Eh6UmiPnpWLj2qN2r3pIERbJ4h&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=jJnYdaKtKH14&upm_answer=true&scope=openid+profile+email+address+phone'
2017-03-31 11:34:19,741 oic.oic:DEBUG Found 3 verify keys
2017-03-31 11:34:19,742 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'bodqviOb3rnGqOuMJCrx1RaYZby679Po', 'acr_values': 'SAML', 'state': 'FM32m5Eh6UmiPnpWLj2qN2r3pIERbJ4h', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'jJnYdaKtKH14', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 11:34:19,742 oic.oic.provider:INFO authorization_request: {'nonce': 'bodqviOb3rnGqOuMJCrx1RaYZby679Po', 'acr_values': 'SAML', 'state': 'FM32m5Eh6UmiPnpWLj2qN2r3pIERbJ4h', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'jJnYdaKtKH14', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 11:34:19,743 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 11:34:19,743 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 11:34:19,743 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 11:34:19,743 oic.oauth2.provider:INFO No active authentication
2017-03-31 11:34:19,743 oic.oic.provider:DEBUG - authenticated -
2017-03-31 11:34:19,743 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-03-31 11:34:19,744 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['43575f753b2aac33bea305b5644a4c5eb60c9aaff525ca820d344819']}
2017-03-31 11:34:19,744 oic.oauth2.provider:DEBUG - in authenticated() -
2017-03-31 11:34:19,744 oic.oauth2.provider:DEBUG response type: ['code']
2017-03-31 11:34:19,745 oicServer:ERROR 'newstr' object has no attribute 'items'
Traceback (most recent call last):
  File "./server.py", line 323, in application
    return callback(environ, start_response)
  File "./server.py", line 201, in authorization
    self.oas.authorization_endpoint, logger=logger)  # cookies required.
  File "/Users/vahid/pyProjects/pyoidc/src/oic/utils/http_util.py", line 411, in wsgi_wrapper
    args = func(**kwargs)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oic/provider.py", line 773, in authorization_endpoint
    return self.authz_part2(authnres["user"], areq, sid, cookie=cookie)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oic/provider.py", line 776, in authz_part2
    result = self._complete_authz(user, areq, sid, **kwargs)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oauth2/provider.py", line 725, in _complete_authz
    _c.load(_kaka)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/Cookie.py", line 643, in load
    for k, v in rawdata.items():
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/future/types/newstr.py", line 331, in __getattribute__
    return super(newstr, self).__getattribute__(name)
AttributeError: 'newstr' object has no attribute 'items'
2017-03-31 11:37:24,913 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-31 11:37:24,915 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-31 11:37:24,932 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-31 11:37:24,932 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 11:37:24,942 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490985444, 'registration_client_uri': 'https://localhost:8040/registration?client_id=iWGqhmvxfIPL', 'registration_access_token': 'RrV9Ys2Tq0dJwjAc256vWyXeNoVMeDUp', 'client_salt': 'aUNsnfuz', 'client_id': 'iWGqhmvxfIPL', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491071844}
2017-03-31 11:37:24,942 oic.utils.keyio:DEBUG loading keys for issuer: iWGqhmvxfIPL
2017-03-31 11:37:24,942 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 11:37:24,942 oic.oic.provider:DEBUG found 0 keys for client_id=iWGqhmvxfIPL
2017-03-31 11:37:24,943 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490985444, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=iWGqhmvxfIPL', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'RrV9Ys2Tq0dJwjAc256vWyXeNoVMeDUp', 'response_types': [u'code'], 'client_id': 'iWGqhmvxfIPL', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491071844}
2017-03-31 11:37:30,699 oic.oauth2.provider:DEBUG Request: 'nonce=539TLuC9EfwhgeXLi5DFXYsGFJrMbnEI&acr_values=SAML&state=q3Ijj1cjUKuMHgejD5w1Byw0zd45IBDO&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=iWGqhmvxfIPL&scope=openid+profile+email+address+phone'
2017-03-31 11:37:30,699 oic.oic:DEBUG Found 3 verify keys
2017-03-31 11:37:30,699 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': '539TLuC9EfwhgeXLi5DFXYsGFJrMbnEI', 'acr_values': 'SAML', 'state': 'q3Ijj1cjUKuMHgejD5w1Byw0zd45IBDO', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'iWGqhmvxfIPL', 'scope': 'openid profile email address phone'}
2017-03-31 11:37:30,705 oic.oic.provider:INFO authorization_request: {'nonce': '539TLuC9EfwhgeXLi5DFXYsGFJrMbnEI', 'acr_values': 'SAML', 'state': 'q3Ijj1cjUKuMHgejD5w1Byw0zd45IBDO', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'iWGqhmvxfIPL', 'scope': 'openid profile email address phone'}
2017-03-31 11:37:30,706 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 11:37:30,706 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 11:37:30,706 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 11:37:30,706 oic.oauth2.provider:INFO No active authentication
2017-03-31 11:37:30,706 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=539TLuC9EfwhgeXLi5DFXYsGFJrMbnEI&acr_values=SAML&state=q3Ijj1cjUKuMHgejD5w1Byw0zd45IBDO&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=iWGqhmvxfIPL&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-31 11:37:35,822 oic.utils.authn.user:DEBUG verify(query=nonce%3D539TLuC9EfwhgeXLi5DFXYsGFJrMbnEI%26acr_values%3DSAML%26state%3Dq3Ijj1cjUKuMHgejD5w1Byw0zd45IBDO%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3DiWGqhmvxfIPL%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-03-31 11:37:35,822 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=539TLuC9EfwhgeXLi5DFXYsGFJrMbnEI&acr_values=SAML&state=q3Ijj1cjUKuMHgejD5w1Byw0zd45IBDO&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=iWGqhmvxfIPL&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-03-31 11:37:35,823 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-03-31 11:37:35,826 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'539TLuC9EfwhgeXLi5DFXYsGFJrMbnEI'], u'acr_values': [u'SAML'], u'state': [u'q3Ijj1cjUKuMHgejD5w1Byw0zd45IBDO'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'iWGqhmvxfIPL'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-03-31 11:37:35,833 oic.oauth2.provider:DEBUG Request: 'nonce=539TLuC9EfwhgeXLi5DFXYsGFJrMbnEI&acr_values=SAML&state=q3Ijj1cjUKuMHgejD5w1Byw0zd45IBDO&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=iWGqhmvxfIPL&upm_answer=true&scope=openid+profile+email+address+phone'
2017-03-31 11:37:35,833 oic.oic:DEBUG Found 3 verify keys
2017-03-31 11:37:35,834 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': '539TLuC9EfwhgeXLi5DFXYsGFJrMbnEI', 'acr_values': 'SAML', 'state': 'q3Ijj1cjUKuMHgejD5w1Byw0zd45IBDO', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'iWGqhmvxfIPL', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 11:37:35,834 oic.oic.provider:INFO authorization_request: {'nonce': '539TLuC9EfwhgeXLi5DFXYsGFJrMbnEI', 'acr_values': 'SAML', 'state': 'q3Ijj1cjUKuMHgejD5w1Byw0zd45IBDO', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'iWGqhmvxfIPL', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 11:37:35,834 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 11:37:35,835 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 11:37:35,835 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 11:37:35,835 oic.oauth2.provider:INFO No active authentication
2017-03-31 11:37:35,835 oic.oic.provider:DEBUG - authenticated -
2017-03-31 11:37:35,835 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-03-31 11:37:35,835 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['921bc2b6056050cf807ab5acf0ac4637ae87a3d3f6949950fe3dc086']}
2017-03-31 11:37:35,835 oic.oauth2.provider:DEBUG - in authenticated() -
2017-03-31 11:37:35,835 oic.oauth2.provider:DEBUG response type: ['code']
2017-03-31 11:37:35,837 oicServer:ERROR 'newstr' object has no attribute 'items'
Traceback (most recent call last):
  File "./server.py", line 323, in application
    return callback(environ, start_response)
  File "./server.py", line 201, in authorization
    self.oas.authorization_endpoint, logger=logger)  # cookies required.
  File "/Users/vahid/pyProjects/pyoidc/src/oic/utils/http_util.py", line 411, in wsgi_wrapper
    args = func(**kwargs)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oic/provider.py", line 773, in authorization_endpoint
    return self.authz_part2(authnres["user"], areq, sid, cookie=cookie)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oic/provider.py", line 776, in authz_part2
    result = self._complete_authz(user, areq, sid, **kwargs)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oauth2/provider.py", line 725, in _complete_authz
    _c.load(_kaka)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/Cookie.py", line 643, in load
    for k, v in rawdata.items():
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/future/types/newstr.py", line 331, in __getattribute__
    return super(newstr, self).__getattribute__(name)
AttributeError: 'newstr' object has no attribute 'items'
2017-03-31 11:39:24,783 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-31 11:39:24,785 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-31 11:39:24,803 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-31 11:39:24,803 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 11:39:24,813 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490985564, 'registration_client_uri': 'https://localhost:8040/registration?client_id=JilyvyAop8tD', 'registration_access_token': 'USoLRCUGj1NEiT1iGNdC0kM66aQSplRt', 'client_salt': 'Z4Yc6EyN', 'client_id': 'JilyvyAop8tD', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491071964}
2017-03-31 11:39:24,814 oic.utils.keyio:DEBUG loading keys for issuer: JilyvyAop8tD
2017-03-31 11:39:24,814 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 11:39:24,814 oic.oic.provider:DEBUG found 0 keys for client_id=JilyvyAop8tD
2017-03-31 11:39:24,815 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490985564, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=JilyvyAop8tD', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'USoLRCUGj1NEiT1iGNdC0kM66aQSplRt', 'response_types': [u'code'], 'client_id': 'JilyvyAop8tD', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491071964}
2017-03-31 11:39:31,081 oic.oauth2.provider:DEBUG Request: 'nonce=iIrRyBLuHeZxZMQIP6C4wNCvqJTSBNkH&acr_values=SAML&state=rTNfV9m8NSQ8Rr0EXWz9OyfFft72gaQJ&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=JilyvyAop8tD&scope=openid+profile+email+address+phone'
2017-03-31 11:39:31,081 oic.oic:DEBUG Found 3 verify keys
2017-03-31 11:39:31,081 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'iIrRyBLuHeZxZMQIP6C4wNCvqJTSBNkH', 'acr_values': 'SAML', 'state': 'rTNfV9m8NSQ8Rr0EXWz9OyfFft72gaQJ', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'JilyvyAop8tD', 'scope': 'openid profile email address phone'}
2017-03-31 11:39:31,082 oic.oic.provider:INFO authorization_request: {'nonce': 'iIrRyBLuHeZxZMQIP6C4wNCvqJTSBNkH', 'acr_values': 'SAML', 'state': 'rTNfV9m8NSQ8Rr0EXWz9OyfFft72gaQJ', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'JilyvyAop8tD', 'scope': 'openid profile email address phone'}
2017-03-31 11:39:31,082 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 11:39:31,082 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 11:39:31,082 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 11:39:31,083 oic.oauth2.provider:INFO No active authentication
2017-03-31 11:39:31,083 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=iIrRyBLuHeZxZMQIP6C4wNCvqJTSBNkH&acr_values=SAML&state=rTNfV9m8NSQ8Rr0EXWz9OyfFft72gaQJ&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=JilyvyAop8tD&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-31 11:39:36,649 oic.utils.authn.user:DEBUG verify(query=nonce%3DiIrRyBLuHeZxZMQIP6C4wNCvqJTSBNkH%26acr_values%3DSAML%26state%3DrTNfV9m8NSQ8Rr0EXWz9OyfFft72gaQJ%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3DJilyvyAop8tD%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-03-31 11:39:36,650 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=iIrRyBLuHeZxZMQIP6C4wNCvqJTSBNkH&acr_values=SAML&state=rTNfV9m8NSQ8Rr0EXWz9OyfFft72gaQJ&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=JilyvyAop8tD&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-03-31 11:39:36,650 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-03-31 11:39:36,654 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'iIrRyBLuHeZxZMQIP6C4wNCvqJTSBNkH'], u'acr_values': [u'SAML'], u'state': [u'rTNfV9m8NSQ8Rr0EXWz9OyfFft72gaQJ'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'JilyvyAop8tD'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-03-31 11:39:36,660 oic.oauth2.provider:DEBUG Request: 'nonce=iIrRyBLuHeZxZMQIP6C4wNCvqJTSBNkH&acr_values=SAML&state=rTNfV9m8NSQ8Rr0EXWz9OyfFft72gaQJ&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=JilyvyAop8tD&upm_answer=true&scope=openid+profile+email+address+phone'
2017-03-31 11:39:36,660 oic.oic:DEBUG Found 3 verify keys
2017-03-31 11:39:36,661 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'iIrRyBLuHeZxZMQIP6C4wNCvqJTSBNkH', 'acr_values': 'SAML', 'state': 'rTNfV9m8NSQ8Rr0EXWz9OyfFft72gaQJ', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'JilyvyAop8tD', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 11:39:36,661 oic.oic.provider:INFO authorization_request: {'nonce': 'iIrRyBLuHeZxZMQIP6C4wNCvqJTSBNkH', 'acr_values': 'SAML', 'state': 'rTNfV9m8NSQ8Rr0EXWz9OyfFft72gaQJ', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'JilyvyAop8tD', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 11:39:36,662 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 11:39:36,662 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 11:39:36,662 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 11:39:36,662 oic.oauth2.provider:INFO No active authentication
2017-03-31 11:39:36,662 oic.oic.provider:DEBUG - authenticated -
2017-03-31 11:39:36,662 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-03-31 11:39:36,663 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['b7bb0f4c37ac6a66f10d9c37aea4f663eef23a540a53537bcc1c824c']}
2017-03-31 11:39:36,663 oic.oauth2.provider:DEBUG - in authenticated() -
2017-03-31 11:39:36,663 oic.oauth2.provider:DEBUG response type: ['code']
2017-03-31 11:39:36,664 oicServer:ERROR 'newstr' object has no attribute 'items'
Traceback (most recent call last):
  File "./server.py", line 323, in application
    return callback(environ, start_response)
  File "./server.py", line 201, in authorization
    self.oas.authorization_endpoint, logger=logger)  # cookies required.
  File "/Users/vahid/pyProjects/pyoidc/src/oic/utils/http_util.py", line 411, in wsgi_wrapper
    args = func(**kwargs)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oic/provider.py", line 773, in authorization_endpoint
    return self.authz_part2(authnres["user"], areq, sid, cookie=cookie)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oic/provider.py", line 776, in authz_part2
    result = self._complete_authz(user, areq, sid, **kwargs)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oauth2/provider.py", line 727, in _complete_authz
    _c.load(_kaka)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/Cookie.py", line 643, in load
    for k, v in rawdata.items():
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/future/types/newstr.py", line 331, in __getattribute__
    return super(newstr, self).__getattribute__(name)
AttributeError: 'newstr' object has no attribute 'items'
2017-03-31 11:46:58,184 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-31 11:46:58,186 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-31 11:46:58,204 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-31 11:46:58,204 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 11:46:58,214 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490986018, 'registration_client_uri': 'https://localhost:8040/registration?client_id=fnIK3EzWDIOk', 'registration_access_token': '8pYsJjYiKGBplWbodWNPO0DwzwckkB4n', 'client_salt': 'M2w8YV0W', 'client_id': 'fnIK3EzWDIOk', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491072418}
2017-03-31 11:46:58,215 oic.utils.keyio:DEBUG loading keys for issuer: fnIK3EzWDIOk
2017-03-31 11:46:58,215 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 11:46:58,215 oic.oic.provider:DEBUG found 0 keys for client_id=fnIK3EzWDIOk
2017-03-31 11:46:58,216 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490986018, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=fnIK3EzWDIOk', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': '8pYsJjYiKGBplWbodWNPO0DwzwckkB4n', 'response_types': [u'code'], 'client_id': 'fnIK3EzWDIOk', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491072418}
2017-03-31 11:47:04,039 oic.oauth2.provider:DEBUG Request: 'nonce=y2ylEyGjDVgWjFAVHmy5YubgIJh9JVAL&acr_values=SAML&state=iT0ufZKdvcWC5qx2mbkq1VLZuQljbIyZ&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=fnIK3EzWDIOk&scope=openid+profile+email+address+phone'
2017-03-31 11:47:04,039 oic.oic:DEBUG Found 3 verify keys
2017-03-31 11:47:04,040 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'y2ylEyGjDVgWjFAVHmy5YubgIJh9JVAL', 'acr_values': 'SAML', 'state': 'iT0ufZKdvcWC5qx2mbkq1VLZuQljbIyZ', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'fnIK3EzWDIOk', 'scope': 'openid profile email address phone'}
2017-03-31 11:47:04,046 oic.oic.provider:INFO authorization_request: {'nonce': 'y2ylEyGjDVgWjFAVHmy5YubgIJh9JVAL', 'acr_values': 'SAML', 'state': 'iT0ufZKdvcWC5qx2mbkq1VLZuQljbIyZ', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'fnIK3EzWDIOk', 'scope': 'openid profile email address phone'}
2017-03-31 11:47:04,046 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 11:47:04,046 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 11:47:04,046 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 11:47:04,046 oic.oauth2.provider:INFO No active authentication
2017-03-31 11:47:04,047 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=y2ylEyGjDVgWjFAVHmy5YubgIJh9JVAL&acr_values=SAML&state=iT0ufZKdvcWC5qx2mbkq1VLZuQljbIyZ&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=fnIK3EzWDIOk&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-31 11:47:09,450 oic.utils.authn.user:DEBUG verify(query=nonce%3Dy2ylEyGjDVgWjFAVHmy5YubgIJh9JVAL%26acr_values%3DSAML%26state%3DiT0ufZKdvcWC5qx2mbkq1VLZuQljbIyZ%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3DfnIK3EzWDIOk%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-03-31 11:47:09,450 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=y2ylEyGjDVgWjFAVHmy5YubgIJh9JVAL&acr_values=SAML&state=iT0ufZKdvcWC5qx2mbkq1VLZuQljbIyZ&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=fnIK3EzWDIOk&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-03-31 11:47:09,450 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-03-31 11:47:09,454 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'y2ylEyGjDVgWjFAVHmy5YubgIJh9JVAL'], u'acr_values': [u'SAML'], u'state': [u'iT0ufZKdvcWC5qx2mbkq1VLZuQljbIyZ'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'fnIK3EzWDIOk'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-03-31 11:47:09,464 oic.oauth2.provider:DEBUG Request: 'nonce=y2ylEyGjDVgWjFAVHmy5YubgIJh9JVAL&acr_values=SAML&state=iT0ufZKdvcWC5qx2mbkq1VLZuQljbIyZ&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=fnIK3EzWDIOk&upm_answer=true&scope=openid+profile+email+address+phone'
2017-03-31 11:47:09,464 oic.oic:DEBUG Found 3 verify keys
2017-03-31 11:47:09,465 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'y2ylEyGjDVgWjFAVHmy5YubgIJh9JVAL', 'acr_values': 'SAML', 'state': 'iT0ufZKdvcWC5qx2mbkq1VLZuQljbIyZ', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'fnIK3EzWDIOk', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 11:47:09,466 oic.oic.provider:INFO authorization_request: {'nonce': 'y2ylEyGjDVgWjFAVHmy5YubgIJh9JVAL', 'acr_values': 'SAML', 'state': 'iT0ufZKdvcWC5qx2mbkq1VLZuQljbIyZ', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'fnIK3EzWDIOk', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 11:47:09,466 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 11:47:09,466 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 11:47:09,466 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 11:47:09,466 oic.oauth2.provider:INFO No active authentication
2017-03-31 11:47:09,466 oic.oic.provider:DEBUG - authenticated -
2017-03-31 11:47:09,466 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-03-31 11:47:09,467 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['0176d11fe0e6f167fddb9c661d19d6b07b1ff7971b6a5ccc3c56f4a7']}
2017-03-31 11:47:09,467 oic.oauth2.provider:DEBUG - in authenticated() -
2017-03-31 11:47:09,467 oic.oauth2.provider:DEBUG response type: ['code']
2017-03-31 11:47:09,468 oicServer:ERROR 'newstr' object has no attribute 'items'
Traceback (most recent call last):
  File "./server.py", line 323, in application
    return callback(environ, start_response)
  File "./server.py", line 201, in authorization
    self.oas.authorization_endpoint, logger=logger)  # cookies required.
  File "/Users/vahid/pyProjects/pyoidc/src/oic/utils/http_util.py", line 411, in wsgi_wrapper
    args = func(**kwargs)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oic/provider.py", line 773, in authorization_endpoint
    return self.authz_part2(authnres["user"], areq, sid, cookie=cookie)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oic/provider.py", line 776, in authz_part2
    result = self._complete_authz(user, areq, sid, **kwargs)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oauth2/provider.py", line 731, in _complete_authz
    _c.load(_kaka)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/Cookie.py", line 643, in load
    for k, v in rawdata.items():
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/future/types/newstr.py", line 331, in __getattribute__
    return super(newstr, self).__getattribute__(name)
AttributeError: 'newstr' object has no attribute 'items'
2017-03-31 12:03:11,415 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-31 12:03:11,417 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-31 12:03:11,434 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-31 12:03:11,434 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 12:03:11,444 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490986991, 'registration_client_uri': 'https://localhost:8040/registration?client_id=hkLl2jvB3Y0B', 'registration_access_token': 'rpOasFXseOXWQiw2RWT4z01TcFHKmJx4', 'client_salt': 'GgE48hR1', 'client_id': 'hkLl2jvB3Y0B', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491073391}
2017-03-31 12:03:11,444 oic.utils.keyio:DEBUG loading keys for issuer: hkLl2jvB3Y0B
2017-03-31 12:03:11,444 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 12:03:11,445 oic.oic.provider:DEBUG found 0 keys for client_id=hkLl2jvB3Y0B
2017-03-31 12:03:11,446 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490986991, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=hkLl2jvB3Y0B', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'rpOasFXseOXWQiw2RWT4z01TcFHKmJx4', 'response_types': [u'code'], 'client_id': 'hkLl2jvB3Y0B', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491073391}
2017-03-31 12:03:20,404 oic.oauth2.provider:DEBUG Request: 'nonce=8a57iSPQwXpUY5xZkcbGmlmgF8FnAmgH&acr_values=SAML&state=GR1MlYxHW7nBiglGS7P4bRiDWdaSAA4T&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=hkLl2jvB3Y0B&scope=openid+profile+email+address+phone'
2017-03-31 12:03:20,404 oic.oic:DEBUG Found 3 verify keys
2017-03-31 12:03:20,405 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': '8a57iSPQwXpUY5xZkcbGmlmgF8FnAmgH', 'acr_values': 'SAML', 'state': 'GR1MlYxHW7nBiglGS7P4bRiDWdaSAA4T', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'hkLl2jvB3Y0B', 'scope': 'openid profile email address phone'}
2017-03-31 12:03:20,407 oic.oic.provider:INFO authorization_request: {'nonce': '8a57iSPQwXpUY5xZkcbGmlmgF8FnAmgH', 'acr_values': 'SAML', 'state': 'GR1MlYxHW7nBiglGS7P4bRiDWdaSAA4T', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'hkLl2jvB3Y0B', 'scope': 'openid profile email address phone'}
2017-03-31 12:03:20,407 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 12:03:20,407 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 12:03:20,407 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 12:03:20,408 oic.oauth2.provider:INFO No active authentication
2017-03-31 12:03:20,408 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=8a57iSPQwXpUY5xZkcbGmlmgF8FnAmgH&acr_values=SAML&state=GR1MlYxHW7nBiglGS7P4bRiDWdaSAA4T&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=hkLl2jvB3Y0B&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-31 12:03:30,218 oic.utils.authn.user:DEBUG verify(query=nonce%3D8a57iSPQwXpUY5xZkcbGmlmgF8FnAmgH%26acr_values%3DSAML%26state%3DGR1MlYxHW7nBiglGS7P4bRiDWdaSAA4T%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3DhkLl2jvB3Y0B%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-03-31 12:03:30,218 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=8a57iSPQwXpUY5xZkcbGmlmgF8FnAmgH&acr_values=SAML&state=GR1MlYxHW7nBiglGS7P4bRiDWdaSAA4T&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=hkLl2jvB3Y0B&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-03-31 12:03:30,218 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-03-31 12:03:30,222 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'8a57iSPQwXpUY5xZkcbGmlmgF8FnAmgH'], u'acr_values': [u'SAML'], u'state': [u'GR1MlYxHW7nBiglGS7P4bRiDWdaSAA4T'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'hkLl2jvB3Y0B'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-03-31 12:03:30,229 oic.oauth2.provider:DEBUG Request: 'nonce=8a57iSPQwXpUY5xZkcbGmlmgF8FnAmgH&acr_values=SAML&state=GR1MlYxHW7nBiglGS7P4bRiDWdaSAA4T&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=hkLl2jvB3Y0B&upm_answer=true&scope=openid+profile+email+address+phone'
2017-03-31 12:03:30,229 oic.oic:DEBUG Found 3 verify keys
2017-03-31 12:03:30,230 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': '8a57iSPQwXpUY5xZkcbGmlmgF8FnAmgH', 'acr_values': 'SAML', 'state': 'GR1MlYxHW7nBiglGS7P4bRiDWdaSAA4T', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'hkLl2jvB3Y0B', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 12:03:30,230 oic.oic.provider:INFO authorization_request: {'nonce': '8a57iSPQwXpUY5xZkcbGmlmgF8FnAmgH', 'acr_values': 'SAML', 'state': 'GR1MlYxHW7nBiglGS7P4bRiDWdaSAA4T', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'hkLl2jvB3Y0B', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 12:03:30,231 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 12:03:30,231 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 12:03:30,231 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 12:03:30,231 oic.oauth2.provider:INFO No active authentication
2017-03-31 12:03:30,231 oic.oic.provider:DEBUG - authenticated -
2017-03-31 12:03:30,231 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-03-31 12:03:30,232 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['c6edbd6517f908eb7ba3cf1553701f6f4751adf077ee71b10af3f1b2']}
2017-03-31 12:03:30,232 oic.oauth2.provider:DEBUG - in authenticated() -
2017-03-31 12:03:30,232 oic.oauth2.provider:DEBUG response type: ['code']
2017-03-31 12:03:30,233 oicServer:ERROR 'newstr' object has no attribute 'items'
Traceback (most recent call last):
  File "./server.py", line 323, in application
    return callback(environ, start_response)
  File "./server.py", line 201, in authorization
    self.oas.authorization_endpoint, logger=logger)  # cookies required.
  File "/Users/vahid/pyProjects/pyoidc/src/oic/utils/http_util.py", line 411, in wsgi_wrapper
    args = func(**kwargs)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oic/provider.py", line 773, in authorization_endpoint
    return self.authz_part2(authnres["user"], areq, sid, cookie=cookie)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oic/provider.py", line 776, in authz_part2
    result = self._complete_authz(user, areq, sid, **kwargs)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oauth2/provider.py", line 732, in _complete_authz
    _c.load(_kaka)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/Cookie.py", line 643, in load
    for k, v in rawdata.items():
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/future/types/newstr.py", line 331, in __getattribute__
    return super(newstr, self).__getattribute__(name)
AttributeError: 'newstr' object has no attribute 'items'
2017-03-31 12:13:12,512 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-31 12:13:12,514 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-31 12:13:12,531 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-31 12:13:12,532 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 12:13:12,542 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490987592, 'registration_client_uri': 'https://localhost:8040/registration?client_id=y22k3aIB0fBq', 'registration_access_token': 'Im7VBO4bfDk9FplQHQir0P4RxuJynzXi', 'client_salt': 'dzmeDoPE', 'client_id': 'y22k3aIB0fBq', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491073992}
2017-03-31 12:13:12,542 oic.utils.keyio:DEBUG loading keys for issuer: y22k3aIB0fBq
2017-03-31 12:13:12,542 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 12:13:12,542 oic.oic.provider:DEBUG found 0 keys for client_id=y22k3aIB0fBq
2017-03-31 12:13:12,543 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490987592, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=y22k3aIB0fBq', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'Im7VBO4bfDk9FplQHQir0P4RxuJynzXi', 'response_types': [u'code'], 'client_id': 'y22k3aIB0fBq', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491073992}
2017-03-31 12:13:22,872 oic.oauth2.provider:DEBUG Request: 'nonce=4VRiNYTfIl77Hx7ECwUtrIRD9eBP32Th&acr_values=SAML&state=rARJ9wKQGmYwTyk4iUHQhcCAfHuwVWhc&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=y22k3aIB0fBq&scope=openid+profile+email+address+phone'
2017-03-31 12:13:22,872 oic.oic:DEBUG Found 3 verify keys
2017-03-31 12:13:22,872 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': '4VRiNYTfIl77Hx7ECwUtrIRD9eBP32Th', 'acr_values': 'SAML', 'state': 'rARJ9wKQGmYwTyk4iUHQhcCAfHuwVWhc', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'y22k3aIB0fBq', 'scope': 'openid profile email address phone'}
2017-03-31 12:13:22,878 oic.oic.provider:INFO authorization_request: {'nonce': '4VRiNYTfIl77Hx7ECwUtrIRD9eBP32Th', 'acr_values': 'SAML', 'state': 'rARJ9wKQGmYwTyk4iUHQhcCAfHuwVWhc', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'y22k3aIB0fBq', 'scope': 'openid profile email address phone'}
2017-03-31 12:13:22,879 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 12:13:22,879 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 12:13:22,879 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 12:13:22,879 oic.oauth2.provider:INFO No active authentication
2017-03-31 12:13:22,879 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=4VRiNYTfIl77Hx7ECwUtrIRD9eBP32Th&acr_values=SAML&state=rARJ9wKQGmYwTyk4iUHQhcCAfHuwVWhc&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=y22k3aIB0fBq&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-31 12:13:29,039 oic.utils.authn.user:DEBUG verify(query=nonce%3D4VRiNYTfIl77Hx7ECwUtrIRD9eBP32Th%26acr_values%3DSAML%26state%3DrARJ9wKQGmYwTyk4iUHQhcCAfHuwVWhc%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3Dy22k3aIB0fBq%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-03-31 12:13:29,039 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=4VRiNYTfIl77Hx7ECwUtrIRD9eBP32Th&acr_values=SAML&state=rARJ9wKQGmYwTyk4iUHQhcCAfHuwVWhc&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=y22k3aIB0fBq&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-03-31 12:13:29,039 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-03-31 12:13:29,042 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'4VRiNYTfIl77Hx7ECwUtrIRD9eBP32Th'], u'acr_values': [u'SAML'], u'state': [u'rARJ9wKQGmYwTyk4iUHQhcCAfHuwVWhc'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'y22k3aIB0fBq'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-03-31 12:13:29,049 oic.oauth2.provider:DEBUG Request: 'nonce=4VRiNYTfIl77Hx7ECwUtrIRD9eBP32Th&acr_values=SAML&state=rARJ9wKQGmYwTyk4iUHQhcCAfHuwVWhc&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=y22k3aIB0fBq&upm_answer=true&scope=openid+profile+email+address+phone'
2017-03-31 12:13:29,049 oic.oic:DEBUG Found 3 verify keys
2017-03-31 12:13:29,050 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': '4VRiNYTfIl77Hx7ECwUtrIRD9eBP32Th', 'acr_values': 'SAML', 'state': 'rARJ9wKQGmYwTyk4iUHQhcCAfHuwVWhc', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'y22k3aIB0fBq', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 12:13:29,050 oic.oic.provider:INFO authorization_request: {'nonce': '4VRiNYTfIl77Hx7ECwUtrIRD9eBP32Th', 'acr_values': 'SAML', 'state': 'rARJ9wKQGmYwTyk4iUHQhcCAfHuwVWhc', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'y22k3aIB0fBq', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 12:13:29,051 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 12:13:29,051 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 12:13:29,051 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 12:13:29,051 oic.oauth2.provider:INFO No active authentication
2017-03-31 12:13:29,051 oic.oic.provider:DEBUG - authenticated -
2017-03-31 12:13:29,051 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-03-31 12:13:29,052 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['a2394c60855f8ebea711218f744a55fce76afd21a30a752b5bfd57a0']}
2017-03-31 12:13:29,052 oic.oauth2.provider:DEBUG - in authenticated() -
2017-03-31 12:13:29,052 oic.oauth2.provider:DEBUG response type: ['code']
2017-03-31 12:13:29,054 oicServer:ERROR 'newstr' object has no attribute 'items'
Traceback (most recent call last):
  File "./server.py", line 323, in application
    return callback(environ, start_response)
  File "./server.py", line 201, in authorization
    self.oas.authorization_endpoint, logger=logger)  # cookies required.
  File "/Users/vahid/pyProjects/pyoidc/src/oic/utils/http_util.py", line 411, in wsgi_wrapper
    args = func(**kwargs)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oic/provider.py", line 773, in authorization_endpoint
    return self.authz_part2(authnres["user"], areq, sid, cookie=cookie)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oic/provider.py", line 776, in authz_part2
    result = self._complete_authz(user, areq, sid, **kwargs)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oauth2/provider.py", line 733, in _complete_authz
    _c.load(_kaka)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/Cookie.py", line 643, in load
    for k, v in rawdata.items():
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/future/types/newstr.py", line 331, in __getattribute__
    return super(newstr, self).__getattribute__(name)
AttributeError: 'newstr' object has no attribute 'items'
2017-03-31 12:16:00,831 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-31 12:16:00,833 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-31 12:16:00,850 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-31 12:16:00,850 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 12:16:00,860 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490987760, 'registration_client_uri': 'https://localhost:8040/registration?client_id=crTCB6K73MSV', 'registration_access_token': 'ZLqw7w3IanpJ0woNxlSZasAxVZ3uuvLL', 'client_salt': 'ASJK0jba', 'client_id': 'crTCB6K73MSV', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491074160}
2017-03-31 12:16:00,860 oic.utils.keyio:DEBUG loading keys for issuer: crTCB6K73MSV
2017-03-31 12:16:00,860 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 12:16:00,860 oic.oic.provider:DEBUG found 0 keys for client_id=crTCB6K73MSV
2017-03-31 12:16:00,861 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490987760, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=crTCB6K73MSV', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'ZLqw7w3IanpJ0woNxlSZasAxVZ3uuvLL', 'response_types': [u'code'], 'client_id': 'crTCB6K73MSV', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491074160}
2017-03-31 12:16:06,317 oic.oauth2.provider:DEBUG Request: 'nonce=R83zI80iGUxl7ERjGVE4xnTIhUDHdHGS&acr_values=SAML&state=mqAy6LMFEMAOfoGjZ2xZ7jw8vLg58fbk&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=crTCB6K73MSV&scope=openid+profile+email+address+phone'
2017-03-31 12:16:06,317 oic.oic:DEBUG Found 3 verify keys
2017-03-31 12:16:06,318 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'R83zI80iGUxl7ERjGVE4xnTIhUDHdHGS', 'acr_values': 'SAML', 'state': 'mqAy6LMFEMAOfoGjZ2xZ7jw8vLg58fbk', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'crTCB6K73MSV', 'scope': 'openid profile email address phone'}
2017-03-31 12:16:06,324 oic.oic.provider:INFO authorization_request: {'nonce': 'R83zI80iGUxl7ERjGVE4xnTIhUDHdHGS', 'acr_values': 'SAML', 'state': 'mqAy6LMFEMAOfoGjZ2xZ7jw8vLg58fbk', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'crTCB6K73MSV', 'scope': 'openid profile email address phone'}
2017-03-31 12:16:06,324 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 12:16:06,324 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 12:16:06,324 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 12:16:06,324 oic.oauth2.provider:INFO No active authentication
2017-03-31 12:16:06,325 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=R83zI80iGUxl7ERjGVE4xnTIhUDHdHGS&acr_values=SAML&state=mqAy6LMFEMAOfoGjZ2xZ7jw8vLg58fbk&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=crTCB6K73MSV&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-31 12:16:14,999 oic.utils.authn.user:DEBUG verify(query=nonce%3DR83zI80iGUxl7ERjGVE4xnTIhUDHdHGS%26acr_values%3DSAML%26state%3DmqAy6LMFEMAOfoGjZ2xZ7jw8vLg58fbk%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3DcrTCB6K73MSV%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-03-31 12:16:14,999 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=R83zI80iGUxl7ERjGVE4xnTIhUDHdHGS&acr_values=SAML&state=mqAy6LMFEMAOfoGjZ2xZ7jw8vLg58fbk&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=crTCB6K73MSV&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-03-31 12:16:14,999 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-03-31 12:16:15,003 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'R83zI80iGUxl7ERjGVE4xnTIhUDHdHGS'], u'acr_values': [u'SAML'], u'state': [u'mqAy6LMFEMAOfoGjZ2xZ7jw8vLg58fbk'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'crTCB6K73MSV'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-03-31 12:16:15,010 oic.oauth2.provider:DEBUG Request: 'nonce=R83zI80iGUxl7ERjGVE4xnTIhUDHdHGS&acr_values=SAML&state=mqAy6LMFEMAOfoGjZ2xZ7jw8vLg58fbk&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=crTCB6K73MSV&upm_answer=true&scope=openid+profile+email+address+phone'
2017-03-31 12:16:15,010 oic.oic:DEBUG Found 3 verify keys
2017-03-31 12:16:15,011 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'R83zI80iGUxl7ERjGVE4xnTIhUDHdHGS', 'acr_values': 'SAML', 'state': 'mqAy6LMFEMAOfoGjZ2xZ7jw8vLg58fbk', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'crTCB6K73MSV', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 12:16:15,011 oic.oic.provider:INFO authorization_request: {'nonce': 'R83zI80iGUxl7ERjGVE4xnTIhUDHdHGS', 'acr_values': 'SAML', 'state': 'mqAy6LMFEMAOfoGjZ2xZ7jw8vLg58fbk', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'crTCB6K73MSV', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 12:16:15,011 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 12:16:15,011 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 12:16:15,011 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 12:16:15,012 oic.oauth2.provider:INFO No active authentication
2017-03-31 12:16:15,012 oic.oic.provider:DEBUG - authenticated -
2017-03-31 12:16:15,012 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-03-31 12:16:15,012 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['3d24e908c527a5bc28218e5359c1753d5849432ced58331bc9b6c3f7']}
2017-03-31 12:16:15,012 oic.oauth2.provider:DEBUG - in authenticated() -
2017-03-31 12:16:15,012 oic.oauth2.provider:DEBUG response type: ['code']
2017-03-31 12:16:15,013 oic.oic.provider:INFO authorization response: {'iss': 'https://localhost:8040/', 'scope': 'openid profile email address phone', 'state': 'mqAy6LMFEMAOfoGjZ2xZ7jw8vLg58fbk', 'code': '<REDACTED>', 'client_id': 'crTCB6K73MSV'}
2017-03-31 12:16:15,014 oic.oic.provider:DEBUG Redirected to: '{base}authz_cb?iss=https%3A%2F%2Flocalhost%3A8040%2F&scope=openid+profile+email+address+phone&state=mqAy6LMFEMAOfoGjZ2xZ7jw8vLg58fbk&code=<REDACTED>&client_id=crTCB6K73MSV' (<type 'unicode'>)
2017-03-31 12:16:15,018 root:DEBUG unknown side: {base}authz_cb
2017-03-31 12:21:55,970 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-31 12:21:55,972 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-31 12:21:55,988 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-31 12:21:55,989 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 12:21:55,998 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490988115, 'registration_client_uri': 'https://localhost:8040/registration?client_id=SLAOTjeasVDQ', 'registration_access_token': 'SxW6XhhIcWch2Ok75Qwi6OpRSaXmfxbY', 'client_salt': 'zGFQTJZK', 'client_id': 'SLAOTjeasVDQ', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491074515}
2017-03-31 12:21:55,999 oic.utils.keyio:DEBUG loading keys for issuer: SLAOTjeasVDQ
2017-03-31 12:21:55,999 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 12:21:55,999 oic.oic.provider:DEBUG found 0 keys for client_id=SLAOTjeasVDQ
2017-03-31 12:21:56,000 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490988115, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=SLAOTjeasVDQ', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'SxW6XhhIcWch2Ok75Qwi6OpRSaXmfxbY', 'response_types': [u'code'], 'client_id': 'SLAOTjeasVDQ', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491074515}
2017-03-31 12:22:03,733 oic.oauth2.provider:DEBUG Request: 'nonce=GNxNg8yHcBRW44RUXD7q3GRNCP8RstrJ&acr_values=SAML&state=Jl0sYFrwk6DPsq9uDmflnjBQdIR1tVOE&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=SLAOTjeasVDQ&scope=openid+profile+email+address+phone'
2017-03-31 12:22:03,734 oic.oic:DEBUG Found 3 verify keys
2017-03-31 12:22:03,734 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'GNxNg8yHcBRW44RUXD7q3GRNCP8RstrJ', 'acr_values': 'SAML', 'state': 'Jl0sYFrwk6DPsq9uDmflnjBQdIR1tVOE', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'SLAOTjeasVDQ', 'scope': 'openid profile email address phone'}
2017-03-31 12:22:03,740 oic.oic.provider:INFO authorization_request: {'nonce': 'GNxNg8yHcBRW44RUXD7q3GRNCP8RstrJ', 'acr_values': 'SAML', 'state': 'Jl0sYFrwk6DPsq9uDmflnjBQdIR1tVOE', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'SLAOTjeasVDQ', 'scope': 'openid profile email address phone'}
2017-03-31 12:22:03,740 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 12:22:03,740 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 12:22:03,741 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 12:22:03,741 oic.oauth2.provider:INFO No active authentication
2017-03-31 12:22:03,741 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=GNxNg8yHcBRW44RUXD7q3GRNCP8RstrJ&acr_values=SAML&state=Jl0sYFrwk6DPsq9uDmflnjBQdIR1tVOE&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=SLAOTjeasVDQ&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-31 12:22:09,261 oic.utils.authn.user:DEBUG verify(query=nonce%3DGNxNg8yHcBRW44RUXD7q3GRNCP8RstrJ%26acr_values%3DSAML%26state%3DJl0sYFrwk6DPsq9uDmflnjBQdIR1tVOE%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3DSLAOTjeasVDQ%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-03-31 12:22:09,261 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=GNxNg8yHcBRW44RUXD7q3GRNCP8RstrJ&acr_values=SAML&state=Jl0sYFrwk6DPsq9uDmflnjBQdIR1tVOE&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=SLAOTjeasVDQ&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-03-31 12:22:09,261 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-03-31 12:22:09,265 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'GNxNg8yHcBRW44RUXD7q3GRNCP8RstrJ'], u'acr_values': [u'SAML'], u'state': [u'Jl0sYFrwk6DPsq9uDmflnjBQdIR1tVOE'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'SLAOTjeasVDQ'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-03-31 12:22:09,272 oic.oauth2.provider:DEBUG Request: 'nonce=GNxNg8yHcBRW44RUXD7q3GRNCP8RstrJ&acr_values=SAML&state=Jl0sYFrwk6DPsq9uDmflnjBQdIR1tVOE&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=SLAOTjeasVDQ&upm_answer=true&scope=openid+profile+email+address+phone'
2017-03-31 12:22:09,272 oic.oic:DEBUG Found 3 verify keys
2017-03-31 12:22:09,272 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'GNxNg8yHcBRW44RUXD7q3GRNCP8RstrJ', 'acr_values': 'SAML', 'state': 'Jl0sYFrwk6DPsq9uDmflnjBQdIR1tVOE', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'SLAOTjeasVDQ', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 12:22:09,273 oic.oic.provider:INFO authorization_request: {'nonce': 'GNxNg8yHcBRW44RUXD7q3GRNCP8RstrJ', 'acr_values': 'SAML', 'state': 'Jl0sYFrwk6DPsq9uDmflnjBQdIR1tVOE', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'SLAOTjeasVDQ', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 12:22:09,273 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 12:22:09,273 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 12:22:09,274 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 12:22:09,274 oic.oauth2.provider:INFO No active authentication
2017-03-31 12:22:09,274 oic.oic.provider:DEBUG - authenticated -
2017-03-31 12:22:09,274 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-03-31 12:22:09,274 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['30ad97ac8734f6d9eaf345419fff5688494357ed4329d8301a22c5dc']}
2017-03-31 12:22:09,274 oic.oauth2.provider:DEBUG - in authenticated() -
2017-03-31 12:22:09,274 oic.oauth2.provider:DEBUG response type: ['code']
2017-03-31 12:22:09,276 oicServer:ERROR 'newstr' object has no attribute 'items'
Traceback (most recent call last):
  File "./server.py", line 323, in application
    return callback(environ, start_response)
  File "./server.py", line 201, in authorization
    self.oas.authorization_endpoint, logger=logger)  # cookies required.
  File "/Users/vahid/pyProjects/pyoidc/src/oic/utils/http_util.py", line 411, in wsgi_wrapper
    args = func(**kwargs)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oic/provider.py", line 773, in authorization_endpoint
    return self.authz_part2(authnres["user"], areq, sid, cookie=cookie)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oic/provider.py", line 776, in authz_part2
    result = self._complete_authz(user, areq, sid, **kwargs)
  File "/Users/vahid/pyProjects/pyoidc/src/oic/oauth2/provider.py", line 736, in _complete_authz
    _c.load(_kaka)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/Cookie.py", line 643, in load
    for k, v in rawdata.items():
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/future/types/newstr.py", line 331, in __getattribute__
    return super(newstr, self).__getattribute__(name)
AttributeError: 'newstr' object has no attribute 'items'
2017-03-31 12:28:36,175 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-31 12:28:36,176 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-31 12:28:36,194 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-31 12:28:36,194 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 12:28:36,204 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490988516, 'registration_client_uri': 'https://localhost:8040/registration?client_id=Jj7AHMaCOKL1', 'registration_access_token': 'dYdP3E9AGMIaD1QhxcFSj6yOxzWfFcEe', 'client_salt': 'xZ2RsGcQ', 'client_id': 'Jj7AHMaCOKL1', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491074916}
2017-03-31 12:28:36,204 oic.utils.keyio:DEBUG loading keys for issuer: Jj7AHMaCOKL1
2017-03-31 12:28:36,205 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 12:28:36,205 oic.oic.provider:DEBUG found 0 keys for client_id=Jj7AHMaCOKL1
2017-03-31 12:28:36,206 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490988516, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=Jj7AHMaCOKL1', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'dYdP3E9AGMIaD1QhxcFSj6yOxzWfFcEe', 'response_types': [u'code'], 'client_id': 'Jj7AHMaCOKL1', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491074916}
2017-03-31 12:28:44,426 oic.oauth2.provider:DEBUG Request: 'nonce=5GSmWolgE571qxIXD2jYlfgb7OvTsNMp&acr_values=SAML&state=1psuxzovWTbGDufmRDDaaPiLxOkricSC&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=Jj7AHMaCOKL1&scope=openid+profile+email+address+phone'
2017-03-31 12:28:44,426 oic.oic:DEBUG Found 3 verify keys
2017-03-31 12:28:44,426 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': '5GSmWolgE571qxIXD2jYlfgb7OvTsNMp', 'acr_values': 'SAML', 'state': '1psuxzovWTbGDufmRDDaaPiLxOkricSC', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'Jj7AHMaCOKL1', 'scope': 'openid profile email address phone'}
2017-03-31 12:28:44,432 oic.oic.provider:INFO authorization_request: {'nonce': '5GSmWolgE571qxIXD2jYlfgb7OvTsNMp', 'acr_values': 'SAML', 'state': '1psuxzovWTbGDufmRDDaaPiLxOkricSC', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'Jj7AHMaCOKL1', 'scope': 'openid profile email address phone'}
2017-03-31 12:28:44,433 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 12:28:44,433 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 12:28:44,433 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 12:28:44,433 oic.oauth2.provider:INFO No active authentication
2017-03-31 12:28:44,433 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=5GSmWolgE571qxIXD2jYlfgb7OvTsNMp&acr_values=SAML&state=1psuxzovWTbGDufmRDDaaPiLxOkricSC&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=Jj7AHMaCOKL1&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-31 12:28:50,858 oic.utils.authn.user:DEBUG verify(query=nonce%3D5GSmWolgE571qxIXD2jYlfgb7OvTsNMp%26acr_values%3DSAML%26state%3D1psuxzovWTbGDufmRDDaaPiLxOkricSC%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3DJj7AHMaCOKL1%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-03-31 12:28:50,858 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=5GSmWolgE571qxIXD2jYlfgb7OvTsNMp&acr_values=SAML&state=1psuxzovWTbGDufmRDDaaPiLxOkricSC&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=Jj7AHMaCOKL1&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-03-31 12:28:50,858 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-03-31 12:28:50,862 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'5GSmWolgE571qxIXD2jYlfgb7OvTsNMp'], u'acr_values': [u'SAML'], u'state': [u'1psuxzovWTbGDufmRDDaaPiLxOkricSC'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'Jj7AHMaCOKL1'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-03-31 12:28:50,869 oic.oauth2.provider:DEBUG Request: 'nonce=5GSmWolgE571qxIXD2jYlfgb7OvTsNMp&acr_values=SAML&state=1psuxzovWTbGDufmRDDaaPiLxOkricSC&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=Jj7AHMaCOKL1&upm_answer=true&scope=openid+profile+email+address+phone'
2017-03-31 12:28:50,870 oic.oic:DEBUG Found 3 verify keys
2017-03-31 12:28:50,870 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': '5GSmWolgE571qxIXD2jYlfgb7OvTsNMp', 'acr_values': 'SAML', 'state': '1psuxzovWTbGDufmRDDaaPiLxOkricSC', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'Jj7AHMaCOKL1', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 12:28:50,870 oic.oic.provider:INFO authorization_request: {'nonce': '5GSmWolgE571qxIXD2jYlfgb7OvTsNMp', 'acr_values': 'SAML', 'state': '1psuxzovWTbGDufmRDDaaPiLxOkricSC', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'Jj7AHMaCOKL1', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 12:28:50,871 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 12:28:50,871 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 12:28:50,871 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 12:28:50,871 oic.oauth2.provider:INFO No active authentication
2017-03-31 12:28:50,871 oic.oic.provider:DEBUG - authenticated -
2017-03-31 12:28:50,871 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-03-31 12:28:50,872 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['53fbb2f373161c562f824d4c6e49cbdaaeafa722e6a272c2dcd720e9']}
2017-03-31 12:28:50,872 oic.oauth2.provider:DEBUG - in authenticated() -
2017-03-31 12:28:50,872 oic.oauth2.provider:DEBUG response type: ['code']
2017-03-31 12:28:50,872 oic.oic.provider:INFO authorization response: {'iss': 'https://localhost:8040/', 'scope': 'openid profile email address phone', 'state': '1psuxzovWTbGDufmRDDaaPiLxOkricSC', 'code': '<REDACTED>', 'client_id': 'Jj7AHMaCOKL1'}
2017-03-31 12:28:50,874 oic.oic.provider:DEBUG Redirected to: '{base}authz_cb?iss=https%3A%2F%2Flocalhost%3A8040%2F&scope=openid+profile+email+address+phone&state=1psuxzovWTbGDufmRDDaaPiLxOkricSC&code=<REDACTED>&client_id=Jj7AHMaCOKL1' (<type 'unicode'>)
2017-03-31 12:28:50,878 root:DEBUG unknown side: {base}authz_cb
2017-03-31 12:32:07,984 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-31 12:32:07,986 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-31 12:32:08,003 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-31 12:32:08,004 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 12:32:08,014 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490988728, 'registration_client_uri': 'https://localhost:8040/registration?client_id=D0Xi1C1KXFSa', 'registration_access_token': 'uPyiHVDTMX58uSCb5NTWwuVlUIh529sm', 'client_salt': 'MSoJ9V5S', 'client_id': 'D0Xi1C1KXFSa', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491075128}
2017-03-31 12:32:08,014 oic.utils.keyio:DEBUG loading keys for issuer: D0Xi1C1KXFSa
2017-03-31 12:32:08,014 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 12:32:08,014 oic.oic.provider:DEBUG found 0 keys for client_id=D0Xi1C1KXFSa
2017-03-31 12:32:08,015 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490988728, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=D0Xi1C1KXFSa', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'uPyiHVDTMX58uSCb5NTWwuVlUIh529sm', 'response_types': [u'code'], 'client_id': 'D0Xi1C1KXFSa', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491075128}
2017-03-31 12:32:15,143 oic.oauth2.provider:DEBUG Request: 'nonce=j0GVaDnvZzwLT7sQv5aMJ5xK44MSNEaU&acr_values=SAML&state=3z6EozqYJDhaAx9Hf8ZU5g0Bb5U1Lemn&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=D0Xi1C1KXFSa&scope=openid+profile+email+address+phone'
2017-03-31 12:32:15,143 oic.oic:DEBUG Found 3 verify keys
2017-03-31 12:32:15,144 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'j0GVaDnvZzwLT7sQv5aMJ5xK44MSNEaU', 'acr_values': 'SAML', 'state': '3z6EozqYJDhaAx9Hf8ZU5g0Bb5U1Lemn', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'D0Xi1C1KXFSa', 'scope': 'openid profile email address phone'}
2017-03-31 12:32:15,149 oic.oic.provider:INFO authorization_request: {'nonce': 'j0GVaDnvZzwLT7sQv5aMJ5xK44MSNEaU', 'acr_values': 'SAML', 'state': '3z6EozqYJDhaAx9Hf8ZU5g0Bb5U1Lemn', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'D0Xi1C1KXFSa', 'scope': 'openid profile email address phone'}
2017-03-31 12:32:15,150 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 12:32:15,150 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 12:32:15,150 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 12:32:15,150 oic.oauth2.provider:INFO No active authentication
2017-03-31 12:32:15,150 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=j0GVaDnvZzwLT7sQv5aMJ5xK44MSNEaU&acr_values=SAML&state=3z6EozqYJDhaAx9Hf8ZU5g0Bb5U1Lemn&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=D0Xi1C1KXFSa&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-31 12:32:19,445 oic.utils.authn.user:DEBUG verify(query=nonce%3Dj0GVaDnvZzwLT7sQv5aMJ5xK44MSNEaU%26acr_values%3DSAML%26state%3D3z6EozqYJDhaAx9Hf8ZU5g0Bb5U1Lemn%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3DD0Xi1C1KXFSa%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-03-31 12:32:19,446 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=j0GVaDnvZzwLT7sQv5aMJ5xK44MSNEaU&acr_values=SAML&state=3z6EozqYJDhaAx9Hf8ZU5g0Bb5U1Lemn&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=D0Xi1C1KXFSa&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-03-31 12:32:19,446 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-03-31 12:32:19,449 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'j0GVaDnvZzwLT7sQv5aMJ5xK44MSNEaU'], u'acr_values': [u'SAML'], u'state': [u'3z6EozqYJDhaAx9Hf8ZU5g0Bb5U1Lemn'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'D0Xi1C1KXFSa'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-03-31 12:32:19,457 oic.oauth2.provider:DEBUG Request: 'nonce=j0GVaDnvZzwLT7sQv5aMJ5xK44MSNEaU&acr_values=SAML&state=3z6EozqYJDhaAx9Hf8ZU5g0Bb5U1Lemn&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=D0Xi1C1KXFSa&upm_answer=true&scope=openid+profile+email+address+phone'
2017-03-31 12:32:19,457 oic.oic:DEBUG Found 3 verify keys
2017-03-31 12:32:19,457 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'j0GVaDnvZzwLT7sQv5aMJ5xK44MSNEaU', 'acr_values': 'SAML', 'state': '3z6EozqYJDhaAx9Hf8ZU5g0Bb5U1Lemn', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'D0Xi1C1KXFSa', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 12:32:19,458 oic.oic.provider:INFO authorization_request: {'nonce': 'j0GVaDnvZzwLT7sQv5aMJ5xK44MSNEaU', 'acr_values': 'SAML', 'state': '3z6EozqYJDhaAx9Hf8ZU5g0Bb5U1Lemn', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'D0Xi1C1KXFSa', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 12:32:19,458 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 12:32:19,458 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 12:32:19,458 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 12:32:19,458 oic.oauth2.provider:INFO No active authentication
2017-03-31 12:32:19,458 oic.oic.provider:DEBUG - authenticated -
2017-03-31 12:32:19,459 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-03-31 12:32:19,459 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['3cdb6284216a2645b65ab6740a66069895ede09e0424f6198af3dc56']}
2017-03-31 12:32:19,459 oic.oauth2.provider:DEBUG - in authenticated() -
2017-03-31 12:32:19,459 oic.oauth2.provider:DEBUG response type: ['code']
2017-03-31 12:32:19,459 oic.oic.provider:INFO authorization response: {'iss': 'https://localhost:8040/', 'scope': 'openid profile email address phone', 'state': '3z6EozqYJDhaAx9Hf8ZU5g0Bb5U1Lemn', 'code': '<REDACTED>', 'client_id': 'D0Xi1C1KXFSa'}
2017-03-31 12:32:19,461 oic.oic.provider:DEBUG Redirected to: '{base}authz_cb?iss=https%3A%2F%2Flocalhost%3A8040%2F&scope=openid+profile+email+address+phone&state=3z6EozqYJDhaAx9Hf8ZU5g0Bb5U1Lemn&code=b<REDACTED>&client_id=D0Xi1C1KXFSa' (<type 'unicode'>)
2017-03-31 12:32:19,465 root:DEBUG unknown side: {base}authz_cb
2017-03-31 14:41:01,338 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-31 14:41:01,340 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-31 14:41:01,357 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-31 14:41:01,358 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 14:41:01,368 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490996461, 'registration_client_uri': 'https://localhost:8040/registration?client_id=uS5em2wfxMp9', 'registration_access_token': 'zpGAK5Bg0VwEn6ahChM7P3V2inWMFLrZ', 'client_salt': 'l34D5u6a', 'client_id': 'uS5em2wfxMp9', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491082861}
2017-03-31 14:41:01,368 oic.utils.keyio:DEBUG loading keys for issuer: uS5em2wfxMp9
2017-03-31 14:41:01,368 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 14:41:01,369 oic.oic.provider:DEBUG found 0 keys for client_id=uS5em2wfxMp9
2017-03-31 14:41:01,370 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490996461, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=uS5em2wfxMp9', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'zpGAK5Bg0VwEn6ahChM7P3V2inWMFLrZ', 'response_types': [u'code'], 'client_id': 'uS5em2wfxMp9', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491082861}
2017-03-31 14:44:44,430 oic.oauth2.provider:DEBUG Request: 'nonce=iqOqDlJJtgisdjPnWdiJiSbu7KTMIpFu&acr_values=SAML&state=kFhS6d9foEMBupADIe3fxB1gOdh7XL3E&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=uS5em2wfxMp9&scope=openid+profile+email+address+phone'
2017-03-31 14:44:44,430 oic.oic:DEBUG Found 3 verify keys
2017-03-31 14:44:44,430 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'iqOqDlJJtgisdjPnWdiJiSbu7KTMIpFu', 'acr_values': 'SAML', 'state': 'kFhS6d9foEMBupADIe3fxB1gOdh7XL3E', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'uS5em2wfxMp9', 'scope': 'openid profile email address phone'}
2017-03-31 14:44:44,436 oic.oic.provider:INFO authorization_request: {'nonce': 'iqOqDlJJtgisdjPnWdiJiSbu7KTMIpFu', 'acr_values': 'SAML', 'state': 'kFhS6d9foEMBupADIe3fxB1gOdh7XL3E', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'uS5em2wfxMp9', 'scope': 'openid profile email address phone'}
2017-03-31 14:44:44,437 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 14:44:44,437 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 14:44:44,437 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 14:44:44,437 oic.oauth2.provider:INFO No active authentication
2017-03-31 14:44:44,437 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=iqOqDlJJtgisdjPnWdiJiSbu7KTMIpFu&acr_values=SAML&state=kFhS6d9foEMBupADIe3fxB1gOdh7XL3E&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=uS5em2wfxMp9&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-31 14:44:50,045 oic.utils.authn.user:DEBUG verify(query=nonce%3DiqOqDlJJtgisdjPnWdiJiSbu7KTMIpFu%26acr_values%3DSAML%26state%3DkFhS6d9foEMBupADIe3fxB1gOdh7XL3E%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3DuS5em2wfxMp9%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-03-31 14:44:50,046 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=iqOqDlJJtgisdjPnWdiJiSbu7KTMIpFu&acr_values=SAML&state=kFhS6d9foEMBupADIe3fxB1gOdh7XL3E&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=uS5em2wfxMp9&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-03-31 14:44:50,046 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-03-31 14:44:50,049 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'iqOqDlJJtgisdjPnWdiJiSbu7KTMIpFu'], u'acr_values': [u'SAML'], u'state': [u'kFhS6d9foEMBupADIe3fxB1gOdh7XL3E'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'uS5em2wfxMp9'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-03-31 14:44:50,056 oic.oauth2.provider:DEBUG Request: 'nonce=iqOqDlJJtgisdjPnWdiJiSbu7KTMIpFu&acr_values=SAML&state=kFhS6d9foEMBupADIe3fxB1gOdh7XL3E&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=uS5em2wfxMp9&upm_answer=true&scope=openid+profile+email+address+phone'
2017-03-31 14:44:50,057 oic.oic:DEBUG Found 3 verify keys
2017-03-31 14:44:50,057 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'iqOqDlJJtgisdjPnWdiJiSbu7KTMIpFu', 'acr_values': 'SAML', 'state': 'kFhS6d9foEMBupADIe3fxB1gOdh7XL3E', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'uS5em2wfxMp9', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 14:44:50,058 oic.oic.provider:INFO authorization_request: {'nonce': 'iqOqDlJJtgisdjPnWdiJiSbu7KTMIpFu', 'acr_values': 'SAML', 'state': 'kFhS6d9foEMBupADIe3fxB1gOdh7XL3E', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'uS5em2wfxMp9', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 14:44:50,058 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 14:44:50,058 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 14:44:50,058 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 14:44:50,058 oic.oauth2.provider:INFO No active authentication
2017-03-31 14:44:50,058 oic.oic.provider:DEBUG - authenticated -
2017-03-31 14:44:50,059 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-03-31 14:44:50,059 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['a198482f7377358c0cda9e6c82b5aa1ee294ec51f1674bb40764c924']}
2017-03-31 14:44:50,059 oic.oauth2.provider:DEBUG - in authenticated() -
2017-03-31 14:44:50,059 oic.oauth2.provider:DEBUG response type: ['code']
2017-03-31 14:44:50,059 oic.oic.provider:INFO authorization response: {'iss': 'https://localhost:8040/', 'scope': 'openid profile email address phone', 'state': 'kFhS6d9foEMBupADIe3fxB1gOdh7XL3E', 'code': '<REDACTED>', 'client_id': 'uS5em2wfxMp9'}
2017-03-31 14:44:50,061 oic.oic.provider:DEBUG Redirected to: '{base}authz_cb?iss=https%3A%2F%2Flocalhost%3A8040%2F&scope=openid+profile+email+address+phone&state=kFhS6d9foEMBupADIe3fxB1gOdh7XL3E&code=<REDACTED>&client_id=uS5em2wfxMp9' (<type 'unicode'>)
2017-03-31 14:44:50,065 root:DEBUG unknown side: {base}authz_cb
2017-03-31 14:47:14,421 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-31 14:47:14,422 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-31 14:47:14,439 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-31 14:47:14,440 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 14:47:14,450 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490996834, 'registration_client_uri': 'https://localhost:8040/registration?client_id=gvcocFBRVJpp', 'registration_access_token': '6FLiAI8kukgAeNnlrHLe5wMCEmTEBEjO', 'client_salt': 'vvHMuaTG', 'client_id': 'gvcocFBRVJpp', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491083234}
2017-03-31 14:47:14,450 oic.utils.keyio:DEBUG loading keys for issuer: gvcocFBRVJpp
2017-03-31 14:47:14,450 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 14:47:14,450 oic.oic.provider:DEBUG found 0 keys for client_id=gvcocFBRVJpp
2017-03-31 14:47:14,451 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490996834, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=gvcocFBRVJpp', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': '6FLiAI8kukgAeNnlrHLe5wMCEmTEBEjO', 'response_types': [u'code'], 'client_id': 'gvcocFBRVJpp', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491083234}
2017-03-31 14:47:50,219 oic.oauth2.provider:DEBUG Request: 'nonce=CbrNStRDKEcq0OG4RohzbkIWZIm1AIvT&acr_values=SAML&state=C1VOedfXT9C7DXYFBPOFEVfFgtGYT3Oq&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=gvcocFBRVJpp&scope=openid+profile+email+address+phone'
2017-03-31 14:47:50,220 oic.oic:DEBUG Found 3 verify keys
2017-03-31 14:47:50,220 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'CbrNStRDKEcq0OG4RohzbkIWZIm1AIvT', 'acr_values': 'SAML', 'state': 'C1VOedfXT9C7DXYFBPOFEVfFgtGYT3Oq', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'gvcocFBRVJpp', 'scope': 'openid profile email address phone'}
2017-03-31 14:47:50,226 oic.oic.provider:INFO authorization_request: {'nonce': 'CbrNStRDKEcq0OG4RohzbkIWZIm1AIvT', 'acr_values': 'SAML', 'state': 'C1VOedfXT9C7DXYFBPOFEVfFgtGYT3Oq', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'gvcocFBRVJpp', 'scope': 'openid profile email address phone'}
2017-03-31 14:47:50,226 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 14:47:50,226 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 14:47:50,227 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 14:47:50,227 oic.oauth2.provider:INFO No active authentication
2017-03-31 14:47:50,227 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=CbrNStRDKEcq0OG4RohzbkIWZIm1AIvT&acr_values=SAML&state=C1VOedfXT9C7DXYFBPOFEVfFgtGYT3Oq&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=gvcocFBRVJpp&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-31 14:48:35,491 oic.utils.authn.user:DEBUG verify(query=nonce%3DCbrNStRDKEcq0OG4RohzbkIWZIm1AIvT%26acr_values%3DSAML%26state%3DC1VOedfXT9C7DXYFBPOFEVfFgtGYT3Oq%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3DgvcocFBRVJpp%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-03-31 14:48:35,491 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=CbrNStRDKEcq0OG4RohzbkIWZIm1AIvT&acr_values=SAML&state=C1VOedfXT9C7DXYFBPOFEVfFgtGYT3Oq&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=gvcocFBRVJpp&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-03-31 14:48:35,491 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-03-31 14:48:35,494 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'CbrNStRDKEcq0OG4RohzbkIWZIm1AIvT'], u'acr_values': [u'SAML'], u'state': [u'C1VOedfXT9C7DXYFBPOFEVfFgtGYT3Oq'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'gvcocFBRVJpp'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-03-31 14:48:35,501 oic.oauth2.provider:DEBUG Request: 'nonce=CbrNStRDKEcq0OG4RohzbkIWZIm1AIvT&acr_values=SAML&state=C1VOedfXT9C7DXYFBPOFEVfFgtGYT3Oq&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=gvcocFBRVJpp&upm_answer=true&scope=openid+profile+email+address+phone'
2017-03-31 14:48:35,502 oic.oic:DEBUG Found 3 verify keys
2017-03-31 14:48:35,502 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'CbrNStRDKEcq0OG4RohzbkIWZIm1AIvT', 'acr_values': 'SAML', 'state': 'C1VOedfXT9C7DXYFBPOFEVfFgtGYT3Oq', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'gvcocFBRVJpp', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 14:48:35,503 oic.oic.provider:INFO authorization_request: {'nonce': 'CbrNStRDKEcq0OG4RohzbkIWZIm1AIvT', 'acr_values': 'SAML', 'state': 'C1VOedfXT9C7DXYFBPOFEVfFgtGYT3Oq', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'gvcocFBRVJpp', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 14:48:35,503 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 14:48:35,503 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 14:48:35,503 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 14:48:35,504 oic.oauth2.provider:INFO No active authentication
2017-03-31 14:48:35,504 oic.oic.provider:DEBUG - authenticated -
2017-03-31 14:48:35,504 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-03-31 14:48:35,504 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['cf3cf5851999d11f9b96e8138764c18ccb2f77f6b823804313d306f5']}
2017-03-31 14:48:35,504 oic.oauth2.provider:DEBUG - in authenticated() -
2017-03-31 14:48:35,504 oic.oauth2.provider:DEBUG response type: ['code']
2017-03-31 14:48:35,505 oic.oic.provider:INFO authorization response: {'iss': 'https://localhost:8040/', 'scope': 'openid profile email address phone', 'state': 'C1VOedfXT9C7DXYFBPOFEVfFgtGYT3Oq', 'code': '<REDACTED>', 'client_id': 'gvcocFBRVJpp'}
2017-03-31 14:48:35,506 oic.oic.provider:DEBUG Redirected to: '{base}authz_cb?iss=https%3A%2F%2Flocalhost%3A8040%2F&scope=openid+profile+email+address+phone&state=C1VOedfXT9C7DXYFBPOFEVfFgtGYT3Oq&code=<REDACTED>&client_id=gvcocFBRVJpp' (<type 'unicode'>)
2017-03-31 14:48:35,511 root:DEBUG unknown side: {base}authz_cb
2017-03-31 14:57:20,849 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-31 14:57:20,851 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-31 14:57:20,868 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-31 14:57:20,868 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 14:57:20,878 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490997440, 'registration_client_uri': 'https://localhost:8040/registration?client_id=oV9Hq3NTVq4R', 'registration_access_token': 'A8RFK7gvGobq0379T878wxFp6R4wlRzp', 'client_salt': 'nyQSfEA6', 'client_id': 'oV9Hq3NTVq4R', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491083840}
2017-03-31 14:57:20,878 oic.utils.keyio:DEBUG loading keys for issuer: oV9Hq3NTVq4R
2017-03-31 14:57:20,878 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 14:57:20,878 oic.oic.provider:DEBUG found 0 keys for client_id=oV9Hq3NTVq4R
2017-03-31 14:57:20,879 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490997440, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=oV9Hq3NTVq4R', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'A8RFK7gvGobq0379T878wxFp6R4wlRzp', 'response_types': [u'code'], 'client_id': 'oV9Hq3NTVq4R', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491083840}
2017-03-31 14:57:33,254 oic.oauth2.provider:DEBUG Request: 'nonce=vUdU6KmKIxGdOLGc4BL8rv1VKxivABWS&acr_values=SAML&state=n2JWrR7Mz67jVuDa6ORs4LuUk5WvtIja&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=oV9Hq3NTVq4R&scope=openid+profile+email+address+phone'
2017-03-31 14:57:33,255 oic.oic:DEBUG Found 3 verify keys
2017-03-31 14:57:33,255 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'vUdU6KmKIxGdOLGc4BL8rv1VKxivABWS', 'acr_values': 'SAML', 'state': 'n2JWrR7Mz67jVuDa6ORs4LuUk5WvtIja', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'oV9Hq3NTVq4R', 'scope': 'openid profile email address phone'}
2017-03-31 14:57:33,261 oic.oic.provider:INFO authorization_request: {'nonce': 'vUdU6KmKIxGdOLGc4BL8rv1VKxivABWS', 'acr_values': 'SAML', 'state': 'n2JWrR7Mz67jVuDa6ORs4LuUk5WvtIja', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'oV9Hq3NTVq4R', 'scope': 'openid profile email address phone'}
2017-03-31 14:57:33,261 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 14:57:33,261 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 14:57:33,261 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 14:57:33,262 oic.oauth2.provider:INFO No active authentication
2017-03-31 14:57:33,262 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=vUdU6KmKIxGdOLGc4BL8rv1VKxivABWS&acr_values=SAML&state=n2JWrR7Mz67jVuDa6ORs4LuUk5WvtIja&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=oV9Hq3NTVq4R&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-31 14:57:42,700 oic.utils.authn.user:DEBUG verify(query=nonce%3DvUdU6KmKIxGdOLGc4BL8rv1VKxivABWS%26acr_values%3DSAML%26state%3Dn2JWrR7Mz67jVuDa6ORs4LuUk5WvtIja%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3DoV9Hq3NTVq4R%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-03-31 14:57:42,700 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=vUdU6KmKIxGdOLGc4BL8rv1VKxivABWS&acr_values=SAML&state=n2JWrR7Mz67jVuDa6ORs4LuUk5WvtIja&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=oV9Hq3NTVq4R&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-03-31 14:57:42,700 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-03-31 14:57:42,704 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'vUdU6KmKIxGdOLGc4BL8rv1VKxivABWS'], u'acr_values': [u'SAML'], u'state': [u'n2JWrR7Mz67jVuDa6ORs4LuUk5WvtIja'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'oV9Hq3NTVq4R'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-03-31 14:57:42,711 oic.oauth2.provider:DEBUG Request: 'nonce=vUdU6KmKIxGdOLGc4BL8rv1VKxivABWS&acr_values=SAML&state=n2JWrR7Mz67jVuDa6ORs4LuUk5WvtIja&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=oV9Hq3NTVq4R&upm_answer=true&scope=openid+profile+email+address+phone'
2017-03-31 14:57:42,711 oic.oic:DEBUG Found 3 verify keys
2017-03-31 14:57:42,712 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'vUdU6KmKIxGdOLGc4BL8rv1VKxivABWS', 'acr_values': 'SAML', 'state': 'n2JWrR7Mz67jVuDa6ORs4LuUk5WvtIja', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'oV9Hq3NTVq4R', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 14:57:42,712 oic.oic.provider:INFO authorization_request: {'nonce': 'vUdU6KmKIxGdOLGc4BL8rv1VKxivABWS', 'acr_values': 'SAML', 'state': 'n2JWrR7Mz67jVuDa6ORs4LuUk5WvtIja', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'oV9Hq3NTVq4R', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 14:57:42,713 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 14:57:42,713 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 14:57:42,713 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 14:57:42,713 oic.oauth2.provider:INFO No active authentication
2017-03-31 14:57:42,713 oic.oic.provider:DEBUG - authenticated -
2017-03-31 14:57:42,713 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-03-31 14:57:42,714 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['e9e01c5c9033fb4afbe87497f8f14c01976e2d1de0eadaa51a6b1031']}
2017-03-31 14:57:42,714 oic.oauth2.provider:DEBUG - in authenticated() -
2017-03-31 14:57:42,714 oic.oauth2.provider:DEBUG response type: ['code']
2017-03-31 14:57:42,714 oic.oic.provider:INFO authorization response: {'iss': 'https://localhost:8040/', 'scope': 'openid profile email address phone', 'state': 'n2JWrR7Mz67jVuDa6ORs4LuUk5WvtIja', 'code': '<REDACTED>', 'client_id': 'oV9Hq3NTVq4R'}
2017-03-31 14:57:42,716 oic.oic.provider:DEBUG Redirected to: '{base}authz_cb?iss=https%3A%2F%2Flocalhost%3A8040%2F&scope=openid+profile+email+address+phone&state=n2JWrR7Mz67jVuDa6ORs4LuUk5WvtIja&code=<REDACTED>&client_id=oV9Hq3NTVq4R' (<type 'unicode'>)
2017-03-31 14:57:42,720 root:DEBUG unknown side: {base}authz_cb
2017-03-31 14:59:04,145 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-31 14:59:04,147 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-31 14:59:04,164 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-31 14:59:04,164 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 14:59:04,174 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490997544, 'registration_client_uri': 'https://localhost:8040/registration?client_id=LOCnLlrZx9wQ', 'registration_access_token': 'Kz919VrS4i0xGPbJNnliB36XWMuD22ws', 'client_salt': 'naHooD89', 'client_id': 'LOCnLlrZx9wQ', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491083944}
2017-03-31 14:59:04,175 oic.utils.keyio:DEBUG loading keys for issuer: LOCnLlrZx9wQ
2017-03-31 14:59:04,175 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 14:59:04,175 oic.oic.provider:DEBUG found 0 keys for client_id=LOCnLlrZx9wQ
2017-03-31 14:59:04,176 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490997544, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=LOCnLlrZx9wQ', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'Kz919VrS4i0xGPbJNnliB36XWMuD22ws', 'response_types': [u'code'], 'client_id': 'LOCnLlrZx9wQ', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491083944}
2017-03-31 14:59:09,518 oic.oauth2.provider:DEBUG Request: 'nonce=tQusEkRxnU5U1sLLco64od7yLEwYNVqf&acr_values=SAML&state=Siz4j6DsyboDv6Xs8HwOFKwtvf4d6NCG&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=LOCnLlrZx9wQ&scope=openid+profile+email+address+phone'
2017-03-31 14:59:09,518 oic.oic:DEBUG Found 3 verify keys
2017-03-31 14:59:09,518 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'tQusEkRxnU5U1sLLco64od7yLEwYNVqf', 'acr_values': 'SAML', 'state': 'Siz4j6DsyboDv6Xs8HwOFKwtvf4d6NCG', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'LOCnLlrZx9wQ', 'scope': 'openid profile email address phone'}
2017-03-31 14:59:09,525 oic.oic.provider:INFO authorization_request: {'nonce': 'tQusEkRxnU5U1sLLco64od7yLEwYNVqf', 'acr_values': 'SAML', 'state': 'Siz4j6DsyboDv6Xs8HwOFKwtvf4d6NCG', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'LOCnLlrZx9wQ', 'scope': 'openid profile email address phone'}
2017-03-31 14:59:09,525 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 14:59:09,525 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 14:59:09,525 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 14:59:09,526 oic.oauth2.provider:INFO No active authentication
2017-03-31 14:59:09,526 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=tQusEkRxnU5U1sLLco64od7yLEwYNVqf&acr_values=SAML&state=Siz4j6DsyboDv6Xs8HwOFKwtvf4d6NCG&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=LOCnLlrZx9wQ&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-31 14:59:17,548 oic.utils.authn.user:DEBUG verify(query=nonce%3DtQusEkRxnU5U1sLLco64od7yLEwYNVqf%26acr_values%3DSAML%26state%3DSiz4j6DsyboDv6Xs8HwOFKwtvf4d6NCG%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3DLOCnLlrZx9wQ%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-03-31 14:59:17,548 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=tQusEkRxnU5U1sLLco64od7yLEwYNVqf&acr_values=SAML&state=Siz4j6DsyboDv6Xs8HwOFKwtvf4d6NCG&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=LOCnLlrZx9wQ&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-03-31 14:59:17,548 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-03-31 14:59:17,552 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'tQusEkRxnU5U1sLLco64od7yLEwYNVqf'], u'acr_values': [u'SAML'], u'state': [u'Siz4j6DsyboDv6Xs8HwOFKwtvf4d6NCG'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'LOCnLlrZx9wQ'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-03-31 14:59:17,559 oic.oauth2.provider:DEBUG Request: 'nonce=tQusEkRxnU5U1sLLco64od7yLEwYNVqf&acr_values=SAML&state=Siz4j6DsyboDv6Xs8HwOFKwtvf4d6NCG&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=LOCnLlrZx9wQ&upm_answer=true&scope=openid+profile+email+address+phone'
2017-03-31 14:59:17,559 oic.oic:DEBUG Found 3 verify keys
2017-03-31 14:59:17,559 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'tQusEkRxnU5U1sLLco64od7yLEwYNVqf', 'acr_values': 'SAML', 'state': 'Siz4j6DsyboDv6Xs8HwOFKwtvf4d6NCG', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'LOCnLlrZx9wQ', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 14:59:17,560 oic.oic.provider:INFO authorization_request: {'nonce': 'tQusEkRxnU5U1sLLco64od7yLEwYNVqf', 'acr_values': 'SAML', 'state': 'Siz4j6DsyboDv6Xs8HwOFKwtvf4d6NCG', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'LOCnLlrZx9wQ', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 14:59:17,560 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 14:59:17,560 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 14:59:17,560 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 14:59:17,561 oic.oauth2.provider:INFO No active authentication
2017-03-31 14:59:17,561 oic.oic.provider:DEBUG - authenticated -
2017-03-31 14:59:17,561 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-03-31 14:59:17,561 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['ed74c710d22c65587c40b55fa93d1e3e5ca8b59db2e6ce4887c99153']}
2017-03-31 14:59:17,561 oic.oauth2.provider:DEBUG - in authenticated() -
2017-03-31 14:59:17,561 oic.oauth2.provider:DEBUG response type: ['code']
2017-03-31 14:59:17,562 oic.oic.provider:INFO authorization response: {'iss': 'https://localhost:8040/', 'scope': 'openid profile email address phone', 'state': 'Siz4j6DsyboDv6Xs8HwOFKwtvf4d6NCG', 'code': '<REDACTED>', 'client_id': 'LOCnLlrZx9wQ'}
2017-03-31 14:59:17,563 oic.oic.provider:DEBUG Redirected to: '{base}authz_cb?iss=https%3A%2F%2Flocalhost%3A8040%2F&scope=openid+profile+email+address+phone&state=Siz4j6DsyboDv6Xs8HwOFKwtvf4d6NCG&code=<REDACTED>&client_id=LOCnLlrZx9wQ' (<type 'unicode'>)
2017-03-31 14:59:17,567 root:DEBUG unknown side: {base}authz_cb
2017-03-31 15:00:48,187 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-31 15:00:48,188 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-31 15:00:48,205 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-31 15:00:48,206 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 15:00:48,215 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490997648, 'registration_client_uri': 'https://localhost:8040/registration?client_id=YUReiqqUCz98', 'registration_access_token': '8dgXFbuqazpLFZZQMAyYfgc5b0JCuCIj', 'client_salt': 'GaM2Fvgy', 'client_id': 'YUReiqqUCz98', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491084048}
2017-03-31 15:00:48,215 oic.utils.keyio:DEBUG loading keys for issuer: YUReiqqUCz98
2017-03-31 15:00:48,215 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 15:00:48,215 oic.oic.provider:DEBUG found 0 keys for client_id=YUReiqqUCz98
2017-03-31 15:00:48,216 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490997648, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=YUReiqqUCz98', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': '8dgXFbuqazpLFZZQMAyYfgc5b0JCuCIj', 'response_types': [u'code'], 'client_id': 'YUReiqqUCz98', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491084048}
2017-03-31 15:00:57,153 oic.oauth2.provider:DEBUG Request: 'nonce=jJCCCSFep55ph16QhtpNaKrI1XJKOMCF&acr_values=SAML&state=TKgcQ144q6oD6UzbVGON6vByiPAOJXAz&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=YUReiqqUCz98&scope=openid+profile+email+address+phone'
2017-03-31 15:00:57,153 oic.oic:DEBUG Found 3 verify keys
2017-03-31 15:00:57,154 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'jJCCCSFep55ph16QhtpNaKrI1XJKOMCF', 'acr_values': 'SAML', 'state': 'TKgcQ144q6oD6UzbVGON6vByiPAOJXAz', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'YUReiqqUCz98', 'scope': 'openid profile email address phone'}
2017-03-31 15:00:57,160 oic.oic.provider:INFO authorization_request: {'nonce': 'jJCCCSFep55ph16QhtpNaKrI1XJKOMCF', 'acr_values': 'SAML', 'state': 'TKgcQ144q6oD6UzbVGON6vByiPAOJXAz', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'YUReiqqUCz98', 'scope': 'openid profile email address phone'}
2017-03-31 15:00:57,160 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 15:00:57,160 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 15:00:57,160 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 15:00:57,161 oic.oauth2.provider:INFO No active authentication
2017-03-31 15:00:57,161 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=jJCCCSFep55ph16QhtpNaKrI1XJKOMCF&acr_values=SAML&state=TKgcQ144q6oD6UzbVGON6vByiPAOJXAz&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=YUReiqqUCz98&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-31 15:01:14,035 oic.utils.authn.user:DEBUG verify(query=nonce%3DjJCCCSFep55ph16QhtpNaKrI1XJKOMCF%26acr_values%3DSAML%26state%3DTKgcQ144q6oD6UzbVGON6vByiPAOJXAz%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3DYUReiqqUCz98%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=&form.commit=Submit)
2017-03-31 15:01:14,036 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=jJCCCSFep55ph16QhtpNaKrI1XJKOMCF&acr_values=SAML&state=TKgcQ144q6oD6UzbVGON6vByiPAOJXAz&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=YUReiqqUCz98&scope=openid+profile+email+address+phone', u'login': u'user1', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-03-31 15:01:14,036 oic.utils.authn.user:DEBUG Password verification failed: 'password'
2017-03-31 15:33:59,845 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-31 15:33:59,846 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-31 15:33:59,864 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-31 15:33:59,864 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 15:33:59,868 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490999639, 'registration_client_uri': 'https://localhost:8040/registration?client_id=WmVYhRURPwhI', 'registration_access_token': 'NVGEJILMFUz59OhUZm5gXa9LDwwfxkcw', 'client_salt': 'x8K5RonR', 'client_id': 'WmVYhRURPwhI', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491086039}
2017-03-31 15:33:59,868 oic.utils.keyio:DEBUG loading keys for issuer: WmVYhRURPwhI
2017-03-31 15:33:59,868 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 15:33:59,869 oic.oic.provider:DEBUG found 0 keys for client_id=WmVYhRURPwhI
2017-03-31 15:33:59,869 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490999639, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=WmVYhRURPwhI', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'NVGEJILMFUz59OhUZm5gXa9LDwwfxkcw', 'response_types': [u'code'], 'client_id': 'WmVYhRURPwhI', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491086039}
2017-03-31 15:37:03,196 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-31 15:37:03,198 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-31 15:37:03,215 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-31 15:37:03,216 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 15:37:03,226 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490999823, 'registration_client_uri': 'https://localhost:8040/registration?client_id=ItldZOvmDOS5', 'registration_access_token': 'SCGan40BsSc4qyrL3lqnE3gqJkJC7tf3', 'client_salt': '1kNAnEDW', 'client_id': 'ItldZOvmDOS5', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491086223}
2017-03-31 15:37:03,227 oic.utils.keyio:DEBUG loading keys for issuer: ItldZOvmDOS5
2017-03-31 15:37:03,227 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 15:37:03,227 oic.oic.provider:DEBUG found 0 keys for client_id=ItldZOvmDOS5
2017-03-31 15:37:03,228 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490999823, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=ItldZOvmDOS5', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'SCGan40BsSc4qyrL3lqnE3gqJkJC7tf3', 'response_types': [u'code'], 'client_id': 'ItldZOvmDOS5', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491086223}
2017-03-31 15:37:14,549 oic.oauth2.provider:DEBUG Request: 'nonce=pFCRAnIDE00PqWwkE9FpZ3DxxzyvjPwm&acr_values=SAML&state=XeCfZnjGvFDjDkMLp3yYxE35y0uJZFGS&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=ItldZOvmDOS5&scope=openid+profile+email+address+phone'
2017-03-31 15:37:14,549 oic.oic:DEBUG Found 3 verify keys
2017-03-31 15:37:14,550 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'pFCRAnIDE00PqWwkE9FpZ3DxxzyvjPwm', 'acr_values': 'SAML', 'state': 'XeCfZnjGvFDjDkMLp3yYxE35y0uJZFGS', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'ItldZOvmDOS5', 'scope': 'openid profile email address phone'}
2017-03-31 15:37:14,556 oic.oic.provider:INFO authorization_request: {'nonce': 'pFCRAnIDE00PqWwkE9FpZ3DxxzyvjPwm', 'acr_values': 'SAML', 'state': 'XeCfZnjGvFDjDkMLp3yYxE35y0uJZFGS', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'ItldZOvmDOS5', 'scope': 'openid profile email address phone'}
2017-03-31 15:37:14,557 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 15:37:14,557 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 15:37:14,557 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 15:37:14,557 oic.oauth2.provider:INFO No active authentication
2017-03-31 15:37:14,557 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=pFCRAnIDE00PqWwkE9FpZ3DxxzyvjPwm&acr_values=SAML&state=XeCfZnjGvFDjDkMLp3yYxE35y0uJZFGS&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=ItldZOvmDOS5&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-31 15:37:20,696 oic.utils.authn.user:DEBUG verify(query=nonce%3DpFCRAnIDE00PqWwkE9FpZ3DxxzyvjPwm%26acr_values%3DSAML%26state%3DXeCfZnjGvFDjDkMLp3yYxE35y0uJZFGS%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3DItldZOvmDOS5%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-03-31 15:37:20,696 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=pFCRAnIDE00PqWwkE9FpZ3DxxzyvjPwm&acr_values=SAML&state=XeCfZnjGvFDjDkMLp3yYxE35y0uJZFGS&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=ItldZOvmDOS5&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-03-31 15:37:20,697 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-03-31 15:37:20,700 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'pFCRAnIDE00PqWwkE9FpZ3DxxzyvjPwm'], u'acr_values': [u'SAML'], u'state': [u'XeCfZnjGvFDjDkMLp3yYxE35y0uJZFGS'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'ItldZOvmDOS5'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-03-31 15:37:20,707 oic.oauth2.provider:DEBUG Request: 'nonce=pFCRAnIDE00PqWwkE9FpZ3DxxzyvjPwm&acr_values=SAML&state=XeCfZnjGvFDjDkMLp3yYxE35y0uJZFGS&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=ItldZOvmDOS5&upm_answer=true&scope=openid+profile+email+address+phone'
2017-03-31 15:37:20,708 oic.oic:DEBUG Found 3 verify keys
2017-03-31 15:37:20,708 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'pFCRAnIDE00PqWwkE9FpZ3DxxzyvjPwm', 'acr_values': 'SAML', 'state': 'XeCfZnjGvFDjDkMLp3yYxE35y0uJZFGS', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'ItldZOvmDOS5', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 15:37:20,709 oic.oic.provider:INFO authorization_request: {'nonce': 'pFCRAnIDE00PqWwkE9FpZ3DxxzyvjPwm', 'acr_values': 'SAML', 'state': 'XeCfZnjGvFDjDkMLp3yYxE35y0uJZFGS', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'ItldZOvmDOS5', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 15:37:20,709 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 15:37:20,709 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 15:37:20,709 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 15:37:20,709 oic.oauth2.provider:INFO No active authentication
2017-03-31 15:37:20,709 oic.oic.provider:DEBUG - authenticated -
2017-03-31 15:37:20,710 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-03-31 15:37:20,710 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['0b54b34682643eaac8deef16d234170357e1cdf279b99d03b8e06a64']}
2017-03-31 15:37:20,710 oic.oauth2.provider:DEBUG - in authenticated() -
2017-03-31 15:37:20,710 oic.oauth2.provider:DEBUG response type: ['code']
2017-03-31 15:37:20,712 oicServer:ERROR 'newstr' object has no attribute 'items'
Traceback (most recent call last):
  File "./server.py", line 316, in application
    return callback(environ, start_response)
  File "./server.py", line 198, in authorization
    self.oas.authorization_endpoint, logger=logger)  # cookies required.
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/oic/utils/http_util.py", line 411, in wsgi_wrapper
    args = func(**kwargs)
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/oic/oic/provider.py", line 773, in authorization_endpoint
    return self.authz_part2(authnres["user"], areq, sid, cookie=cookie)
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/oic/oic/provider.py", line 776, in authz_part2
    result = self._complete_authz(user, areq, sid, **kwargs)
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/oic/oauth2/provider.py", line 724, in _complete_authz
    _c.load(_kaka)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/Cookie.py", line 643, in load
    for k, v in rawdata.items():
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/future/types/newstr.py", line 331, in __getattribute__
    return super(newstr, self).__getattribute__(name)
AttributeError: 'newstr' object has no attribute 'items'
2017-03-31 15:38:56,175 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-31 15:38:56,177 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-31 15:38:56,196 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-31 15:38:56,196 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 15:38:56,206 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1490999936, 'registration_client_uri': 'https://localhost:8040/registration?client_id=9xNVIOR3b36R', 'registration_access_token': 'a9u9xIxEzFIwIumSfMK2fWxWIS1s3RG3', 'client_salt': 'GFJNN6l6', 'client_id': '9xNVIOR3b36R', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491086336}
2017-03-31 15:38:56,206 oic.utils.keyio:DEBUG loading keys for issuer: 9xNVIOR3b36R
2017-03-31 15:38:56,206 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 15:38:56,206 oic.oic.provider:DEBUG found 0 keys for client_id=9xNVIOR3b36R
2017-03-31 15:38:56,208 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1490999936, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=9xNVIOR3b36R', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'a9u9xIxEzFIwIumSfMK2fWxWIS1s3RG3', 'response_types': [u'code'], 'client_id': '9xNVIOR3b36R', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491086336}
2017-03-31 15:39:00,708 oic.oauth2.provider:DEBUG Request: 'nonce=JjFA2peZePiNz5eNgZiOHuB1mceOguUP&acr_values=SAML&state=we9iHzVhOia8677SEnm3Id8S6Pyn4up8&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=9xNVIOR3b36R&scope=openid+profile+email+address+phone'
2017-03-31 15:39:00,708 oic.oic:DEBUG Found 3 verify keys
2017-03-31 15:39:00,709 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'JjFA2peZePiNz5eNgZiOHuB1mceOguUP', 'acr_values': 'SAML', 'state': 'we9iHzVhOia8677SEnm3Id8S6Pyn4up8', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': '9xNVIOR3b36R', 'scope': 'openid profile email address phone'}
2017-03-31 15:39:00,715 oic.oic.provider:INFO authorization_request: {'nonce': 'JjFA2peZePiNz5eNgZiOHuB1mceOguUP', 'acr_values': 'SAML', 'state': 'we9iHzVhOia8677SEnm3Id8S6Pyn4up8', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': '9xNVIOR3b36R', 'scope': 'openid profile email address phone'}
2017-03-31 15:39:00,715 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 15:39:00,715 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 15:39:00,715 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 15:39:00,715 oic.oauth2.provider:INFO No active authentication
2017-03-31 15:39:00,715 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=JjFA2peZePiNz5eNgZiOHuB1mceOguUP&acr_values=SAML&state=we9iHzVhOia8677SEnm3Id8S6Pyn4up8&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=9xNVIOR3b36R&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-31 15:39:06,689 oic.utils.authn.user:DEBUG verify(query=nonce%3DJjFA2peZePiNz5eNgZiOHuB1mceOguUP%26acr_values%3DSAML%26state%3Dwe9iHzVhOia8677SEnm3Id8S6Pyn4up8%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3D9xNVIOR3b36R%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-03-31 15:39:06,689 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=JjFA2peZePiNz5eNgZiOHuB1mceOguUP&acr_values=SAML&state=we9iHzVhOia8677SEnm3Id8S6Pyn4up8&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=9xNVIOR3b36R&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-03-31 15:39:06,689 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-03-31 15:39:06,693 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'JjFA2peZePiNz5eNgZiOHuB1mceOguUP'], u'acr_values': [u'SAML'], u'state': [u'we9iHzVhOia8677SEnm3Id8S6Pyn4up8'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'9xNVIOR3b36R'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-03-31 15:39:06,701 oic.oauth2.provider:DEBUG Request: 'nonce=JjFA2peZePiNz5eNgZiOHuB1mceOguUP&acr_values=SAML&state=we9iHzVhOia8677SEnm3Id8S6Pyn4up8&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=9xNVIOR3b36R&upm_answer=true&scope=openid+profile+email+address+phone'
2017-03-31 15:39:06,701 oic.oic:DEBUG Found 3 verify keys
2017-03-31 15:39:06,701 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'JjFA2peZePiNz5eNgZiOHuB1mceOguUP', 'acr_values': 'SAML', 'state': 'we9iHzVhOia8677SEnm3Id8S6Pyn4up8', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': '9xNVIOR3b36R', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 15:39:06,702 oic.oic.provider:INFO authorization_request: {'nonce': 'JjFA2peZePiNz5eNgZiOHuB1mceOguUP', 'acr_values': 'SAML', 'state': 'we9iHzVhOia8677SEnm3Id8S6Pyn4up8', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': '9xNVIOR3b36R', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 15:39:06,702 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 15:39:06,702 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 15:39:06,702 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 15:39:06,702 oic.oauth2.provider:INFO No active authentication
2017-03-31 15:39:06,703 oic.oic.provider:DEBUG - authenticated -
2017-03-31 15:39:06,703 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-03-31 15:39:06,703 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['d89c7875a447daa30062e0210c7109f9e49d5ca4f2e7bdbcc0e4d058']}
2017-03-31 15:39:06,703 oic.oauth2.provider:DEBUG - in authenticated() -
2017-03-31 15:39:06,703 oic.oauth2.provider:DEBUG response type: ['code']
2017-03-31 15:39:06,705 oicServer:ERROR 'newstr' object has no attribute 'items'
Traceback (most recent call last):
  File "./server.py", line 316, in application
    return callback(environ, start_response)
  File "./server.py", line 198, in authorization
    self.oas.authorization_endpoint, logger=logger)  # cookies required.
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/oic/utils/http_util.py", line 411, in wsgi_wrapper
    args = func(**kwargs)
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/oic/oic/provider.py", line 773, in authorization_endpoint
    return self.authz_part2(authnres["user"], areq, sid, cookie=cookie)
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/oic/oic/provider.py", line 776, in authz_part2
    result = self._complete_authz(user, areq, sid, **kwargs)
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/oic/oauth2/provider.py", line 724, in _complete_authz
    _c.load(_kaka)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/Cookie.py", line 643, in load
    for k, v in rawdata.items():
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/future/types/newstr.py", line 331, in __getattribute__
    return super(newstr, self).__getattribute__(name)
AttributeError: 'newstr' object has no attribute 'items'
2017-03-31 15:40:22,849 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-31 15:40:22,850 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-31 15:40:22,868 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-31 15:40:22,868 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 15:40:22,878 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1491000022, 'registration_client_uri': 'https://localhost:8040/registration?client_id=FBX9T85UIz51', 'registration_access_token': 'zBxcfwE2gzAJ8cPZLLiBV5Cx4LWbnNno', 'client_salt': 'Y33wmSmL', 'client_id': 'FBX9T85UIz51', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491086422}
2017-03-31 15:40:22,879 oic.utils.keyio:DEBUG loading keys for issuer: FBX9T85UIz51
2017-03-31 15:40:22,879 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 15:40:22,879 oic.oic.provider:DEBUG found 0 keys for client_id=FBX9T85UIz51
2017-03-31 15:40:22,880 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1491000022, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=FBX9T85UIz51', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'zBxcfwE2gzAJ8cPZLLiBV5Cx4LWbnNno', 'response_types': [u'code'], 'client_id': 'FBX9T85UIz51', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491086422}
2017-03-31 15:40:27,772 oic.oauth2.provider:DEBUG Request: 'nonce=jcLxXObDQuoxzbDZ2q0fKJplRp3Rx9Ic&acr_values=SAML&state=5Ww6gIFImbxT7BptXIDn01X7urSNGVTH&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=FBX9T85UIz51&scope=openid+profile+email+address+phone'
2017-03-31 15:40:27,772 oic.oic:DEBUG Found 3 verify keys
2017-03-31 15:40:27,773 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'jcLxXObDQuoxzbDZ2q0fKJplRp3Rx9Ic', 'acr_values': 'SAML', 'state': '5Ww6gIFImbxT7BptXIDn01X7urSNGVTH', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'FBX9T85UIz51', 'scope': 'openid profile email address phone'}
2017-03-31 15:40:27,779 oic.oic.provider:INFO authorization_request: {'nonce': 'jcLxXObDQuoxzbDZ2q0fKJplRp3Rx9Ic', 'acr_values': 'SAML', 'state': '5Ww6gIFImbxT7BptXIDn01X7urSNGVTH', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'FBX9T85UIz51', 'scope': 'openid profile email address phone'}
2017-03-31 15:40:27,780 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 15:40:27,780 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 15:40:27,780 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 15:40:27,781 oic.oauth2.provider:INFO No active authentication
2017-03-31 15:40:27,781 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=jcLxXObDQuoxzbDZ2q0fKJplRp3Rx9Ic&acr_values=SAML&state=5Ww6gIFImbxT7BptXIDn01X7urSNGVTH&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=FBX9T85UIz51&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-31 15:40:32,821 oic.utils.authn.user:DEBUG verify(query=nonce%3DjcLxXObDQuoxzbDZ2q0fKJplRp3Rx9Ic%26acr_values%3DSAML%26state%3D5Ww6gIFImbxT7BptXIDn01X7urSNGVTH%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3DFBX9T85UIz51%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-03-31 15:40:32,822 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=jcLxXObDQuoxzbDZ2q0fKJplRp3Rx9Ic&acr_values=SAML&state=5Ww6gIFImbxT7BptXIDn01X7urSNGVTH&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=FBX9T85UIz51&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-03-31 15:40:32,822 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-03-31 15:40:32,825 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'jcLxXObDQuoxzbDZ2q0fKJplRp3Rx9Ic'], u'acr_values': [u'SAML'], u'state': [u'5Ww6gIFImbxT7BptXIDn01X7urSNGVTH'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'FBX9T85UIz51'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-03-31 15:40:32,837 oic.oauth2.provider:DEBUG Request: 'nonce=jcLxXObDQuoxzbDZ2q0fKJplRp3Rx9Ic&acr_values=SAML&state=5Ww6gIFImbxT7BptXIDn01X7urSNGVTH&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=FBX9T85UIz51&upm_answer=true&scope=openid+profile+email+address+phone'
2017-03-31 15:40:32,837 oic.oic:DEBUG Found 3 verify keys
2017-03-31 15:40:32,838 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'jcLxXObDQuoxzbDZ2q0fKJplRp3Rx9Ic', 'acr_values': 'SAML', 'state': '5Ww6gIFImbxT7BptXIDn01X7urSNGVTH', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'FBX9T85UIz51', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 15:40:32,838 oic.oic.provider:INFO authorization_request: {'nonce': 'jcLxXObDQuoxzbDZ2q0fKJplRp3Rx9Ic', 'acr_values': 'SAML', 'state': '5Ww6gIFImbxT7BptXIDn01X7urSNGVTH', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'FBX9T85UIz51', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 15:40:32,838 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 15:40:32,838 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 15:40:32,838 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 15:40:32,839 oic.oauth2.provider:INFO No active authentication
2017-03-31 15:40:32,839 oic.oic.provider:DEBUG - authenticated -
2017-03-31 15:40:32,839 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-03-31 15:40:32,839 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['7f4a3ddc28a0fdb93d26276f0fb2cac7938ccc3a6d3679d0a12b066d']}
2017-03-31 15:40:32,839 oic.oauth2.provider:DEBUG - in authenticated() -
2017-03-31 15:40:32,839 oic.oauth2.provider:DEBUG response type: ['code']
2017-03-31 15:40:32,841 oicServer:ERROR 'newstr' object has no attribute 'items'
Traceback (most recent call last):
  File "./server.py", line 316, in application
    return callback(environ, start_response)
  File "./server.py", line 198, in authorization
    self.oas.authorization_endpoint, logger=logger)  # cookies required.
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/oic/utils/http_util.py", line 411, in wsgi_wrapper
    args = func(**kwargs)
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/oic/oic/provider.py", line 773, in authorization_endpoint
    return self.authz_part2(authnres["user"], areq, sid, cookie=cookie)
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/oic/oic/provider.py", line 776, in authz_part2
    result = self._complete_authz(user, areq, sid, **kwargs)
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/oic/oauth2/provider.py", line 724, in _complete_authz
    _c.load(_kaka)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/Cookie.py", line 643, in load
    for k, v in rawdata.items():
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/future/types/newstr.py", line 331, in __getattribute__
    return super(newstr, self).__getattribute__(name)
AttributeError: 'newstr' object has no attribute 'items'
2017-03-31 15:45:38,840 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-31 15:45:38,842 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-31 15:45:38,859 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-31 15:45:38,859 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 15:45:38,869 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1491000338, 'registration_client_uri': 'https://localhost:8040/registration?client_id=v7P5t5Rq49Mh', 'registration_access_token': 'eVvUtIlRU7eAIYaIqnoHk0vRV7xWiTeQ', 'client_salt': '0N86Pwa2', 'client_id': 'v7P5t5Rq49Mh', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491086738}
2017-03-31 15:45:38,869 oic.utils.keyio:DEBUG loading keys for issuer: v7P5t5Rq49Mh
2017-03-31 15:45:38,870 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 15:45:38,870 oic.oic.provider:DEBUG found 0 keys for client_id=v7P5t5Rq49Mh
2017-03-31 15:45:38,871 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1491000338, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=v7P5t5Rq49Mh', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'eVvUtIlRU7eAIYaIqnoHk0vRV7xWiTeQ', 'response_types': [u'code'], 'client_id': 'v7P5t5Rq49Mh', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491086738}
2017-03-31 15:45:47,939 oic.oauth2.provider:DEBUG Request: 'nonce=rO8qCvu0tw9aB1LeywQdwlj4hsHeXKgR&acr_values=SAML&state=48IDmhGbpXJ0FdG1l3l4xgZeej5DCNWt&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=v7P5t5Rq49Mh&scope=openid+profile+email+address+phone'
2017-03-31 15:45:47,939 oic.oic:DEBUG Found 3 verify keys
2017-03-31 15:45:47,939 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'rO8qCvu0tw9aB1LeywQdwlj4hsHeXKgR', 'acr_values': 'SAML', 'state': '48IDmhGbpXJ0FdG1l3l4xgZeej5DCNWt', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'v7P5t5Rq49Mh', 'scope': 'openid profile email address phone'}
2017-03-31 15:45:47,945 oic.oic.provider:INFO authorization_request: {'nonce': 'rO8qCvu0tw9aB1LeywQdwlj4hsHeXKgR', 'acr_values': 'SAML', 'state': '48IDmhGbpXJ0FdG1l3l4xgZeej5DCNWt', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'v7P5t5Rq49Mh', 'scope': 'openid profile email address phone'}
2017-03-31 15:45:47,946 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 15:45:47,946 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 15:45:47,946 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 15:45:47,946 oic.oauth2.provider:INFO No active authentication
2017-03-31 15:45:47,946 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=rO8qCvu0tw9aB1LeywQdwlj4hsHeXKgR&acr_values=SAML&state=48IDmhGbpXJ0FdG1l3l4xgZeej5DCNWt&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=v7P5t5Rq49Mh&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-31 15:45:55,705 oic.utils.authn.user:DEBUG verify(query=nonce%3DrO8qCvu0tw9aB1LeywQdwlj4hsHeXKgR%26acr_values%3DSAML%26state%3D48IDmhGbpXJ0FdG1l3l4xgZeej5DCNWt%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3Dv7P5t5Rq49Mh%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-03-31 15:45:55,706 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=rO8qCvu0tw9aB1LeywQdwlj4hsHeXKgR&acr_values=SAML&state=48IDmhGbpXJ0FdG1l3l4xgZeej5DCNWt&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=v7P5t5Rq49Mh&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-03-31 15:45:55,706 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-03-31 15:45:55,709 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'rO8qCvu0tw9aB1LeywQdwlj4hsHeXKgR'], u'acr_values': [u'SAML'], u'state': [u'48IDmhGbpXJ0FdG1l3l4xgZeej5DCNWt'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'v7P5t5Rq49Mh'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-03-31 15:45:55,720 oic.oauth2.provider:DEBUG Request: 'nonce=rO8qCvu0tw9aB1LeywQdwlj4hsHeXKgR&acr_values=SAML&state=48IDmhGbpXJ0FdG1l3l4xgZeej5DCNWt&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=v7P5t5Rq49Mh&upm_answer=true&scope=openid+profile+email+address+phone'
2017-03-31 15:45:55,720 oic.oic:DEBUG Found 3 verify keys
2017-03-31 15:45:55,720 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'rO8qCvu0tw9aB1LeywQdwlj4hsHeXKgR', 'acr_values': 'SAML', 'state': '48IDmhGbpXJ0FdG1l3l4xgZeej5DCNWt', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'v7P5t5Rq49Mh', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 15:45:55,721 oic.oic.provider:INFO authorization_request: {'nonce': 'rO8qCvu0tw9aB1LeywQdwlj4hsHeXKgR', 'acr_values': 'SAML', 'state': '48IDmhGbpXJ0FdG1l3l4xgZeej5DCNWt', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'v7P5t5Rq49Mh', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 15:45:55,721 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 15:45:55,721 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 15:45:55,721 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 15:45:55,722 oic.oauth2.provider:INFO No active authentication
2017-03-31 15:45:55,722 oic.oic.provider:DEBUG - authenticated -
2017-03-31 15:45:55,722 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-03-31 15:45:55,722 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['20b1fba9504f23b6fdbd2f6e09bae7c6514cde3846336f029ee95e92']}
2017-03-31 15:45:55,722 oic.oauth2.provider:DEBUG - in authenticated() -
2017-03-31 15:45:55,722 oic.oauth2.provider:DEBUG response type: ['code']
2017-03-31 15:45:55,724 oicServer:ERROR 'newstr' object has no attribute 'items'
Traceback (most recent call last):
  File "./server.py", line 316, in application
    return callback(environ, start_response)
  File "./server.py", line 198, in authorization
    self.oas.authorization_endpoint, logger=logger)  # cookies required.
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/oic/utils/http_util.py", line 411, in wsgi_wrapper
    args = func(**kwargs)
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/oic/oic/provider.py", line 773, in authorization_endpoint
    return self.authz_part2(authnres["user"], areq, sid, cookie=cookie)
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/oic/oic/provider.py", line 776, in authz_part2
    result = self._complete_authz(user, areq, sid, **kwargs)
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/oic/oauth2/provider.py", line 724, in _complete_authz
    _c.load(_kaka)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/Cookie.py", line 643, in load
    for k, v in rawdata.items():
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/future/types/newstr.py", line 331, in __getattribute__
    return super(newstr, self).__getattribute__(name)
AttributeError: 'newstr' object has no attribute 'items'
2017-03-31 15:50:29,703 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-31 15:50:29,704 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-31 15:50:29,718 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-31 15:50:29,718 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 15:50:29,728 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1491000629, 'registration_client_uri': 'https://localhost:8040/registration?client_id=QH8af0QiWKNk', 'registration_access_token': 'IIvuucVuPkZbsIVQV6SiBMnwRvPxBc99', 'client_salt': 'b867c0xD', 'client_id': 'QH8af0QiWKNk', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491087029}
2017-03-31 15:50:29,728 oic.utils.keyio:DEBUG loading keys for issuer: QH8af0QiWKNk
2017-03-31 15:50:29,728 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 15:50:29,728 oic.oic.provider:DEBUG found 0 keys for client_id=QH8af0QiWKNk
2017-03-31 15:50:29,730 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1491000629, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=QH8af0QiWKNk', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'IIvuucVuPkZbsIVQV6SiBMnwRvPxBc99', 'response_types': [u'code'], 'client_id': 'QH8af0QiWKNk', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491087029}
2017-03-31 15:53:21,562 oic.oauth2.provider:DEBUG Request: 'nonce=Kuf7p07NCTF9SwEgBWzE0KFRENSek7as&acr_values=SAML&state=UGQGqnbw62aYBA2SIOozLjWaEii8IDKG&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=QH8af0QiWKNk&scope=openid+profile+email+address+phone'
2017-03-31 15:53:21,562 oic.oic:DEBUG Found 3 verify keys
2017-03-31 15:53:21,563 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'Kuf7p07NCTF9SwEgBWzE0KFRENSek7as', 'acr_values': 'SAML', 'state': 'UGQGqnbw62aYBA2SIOozLjWaEii8IDKG', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'QH8af0QiWKNk', 'scope': 'openid profile email address phone'}
2017-03-31 15:53:21,569 oic.oic.provider:INFO authorization_request: {'nonce': 'Kuf7p07NCTF9SwEgBWzE0KFRENSek7as', 'acr_values': 'SAML', 'state': 'UGQGqnbw62aYBA2SIOozLjWaEii8IDKG', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'QH8af0QiWKNk', 'scope': 'openid profile email address phone'}
2017-03-31 15:53:21,569 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 15:53:21,569 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 15:53:21,569 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 15:53:21,570 oic.oauth2.provider:INFO No active authentication
2017-03-31 15:53:21,570 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=Kuf7p07NCTF9SwEgBWzE0KFRENSek7as&acr_values=SAML&state=UGQGqnbw62aYBA2SIOozLjWaEii8IDKG&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=QH8af0QiWKNk&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-31 15:53:28,833 oic.utils.authn.user:DEBUG verify(query=nonce%3DKuf7p07NCTF9SwEgBWzE0KFRENSek7as%26acr_values%3DSAML%26state%3DUGQGqnbw62aYBA2SIOozLjWaEii8IDKG%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3DQH8af0QiWKNk%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-03-31 15:53:28,833 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=Kuf7p07NCTF9SwEgBWzE0KFRENSek7as&acr_values=SAML&state=UGQGqnbw62aYBA2SIOozLjWaEii8IDKG&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=QH8af0QiWKNk&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-03-31 15:53:28,833 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-03-31 15:53:28,837 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'Kuf7p07NCTF9SwEgBWzE0KFRENSek7as'], u'acr_values': [u'SAML'], u'state': [u'UGQGqnbw62aYBA2SIOozLjWaEii8IDKG'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'QH8af0QiWKNk'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-03-31 15:53:28,845 oic.oauth2.provider:DEBUG Request: 'nonce=Kuf7p07NCTF9SwEgBWzE0KFRENSek7as&acr_values=SAML&state=UGQGqnbw62aYBA2SIOozLjWaEii8IDKG&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=QH8af0QiWKNk&upm_answer=true&scope=openid+profile+email+address+phone'
2017-03-31 15:53:28,845 oic.oic:DEBUG Found 3 verify keys
2017-03-31 15:53:28,845 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'Kuf7p07NCTF9SwEgBWzE0KFRENSek7as', 'acr_values': 'SAML', 'state': 'UGQGqnbw62aYBA2SIOozLjWaEii8IDKG', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'QH8af0QiWKNk', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 15:53:28,846 oic.oic.provider:INFO authorization_request: {'nonce': 'Kuf7p07NCTF9SwEgBWzE0KFRENSek7as', 'acr_values': 'SAML', 'state': 'UGQGqnbw62aYBA2SIOozLjWaEii8IDKG', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'QH8af0QiWKNk', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 15:53:28,846 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 15:53:28,846 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 15:53:28,846 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 15:53:28,846 oic.oauth2.provider:INFO No active authentication
2017-03-31 15:53:28,847 oic.oic.provider:DEBUG - authenticated -
2017-03-31 15:53:28,847 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-03-31 15:53:28,847 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['cfc8ddd610542ab97500bdea4394069ea86f85315fcf433714375126']}
2017-03-31 15:53:28,847 oic.oauth2.provider:DEBUG - in authenticated() -
2017-03-31 15:53:28,847 oic.oauth2.provider:DEBUG response type: ['code']
2017-03-31 15:53:28,849 oicServer:ERROR 'newstr' object has no attribute 'items'
Traceback (most recent call last):
  File "./server.py", line 316, in application
    return callback(environ, start_response)
  File "./server.py", line 198, in authorization
    self.oas.authorization_endpoint, logger=logger)  # cookies required.
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/oic/utils/http_util.py", line 411, in wsgi_wrapper
    args = func(**kwargs)
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/oic/oic/provider.py", line 773, in authorization_endpoint
    return self.authz_part2(authnres["user"], areq, sid, cookie=cookie)
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/oic/oic/provider.py", line 776, in authz_part2
    result = self._complete_authz(user, areq, sid, **kwargs)
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/oic/oauth2/provider.py", line 724, in _complete_authz
    _c.load(_kaka)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/Cookie.py", line 643, in load
    for k, v in rawdata.items():
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/future/types/newstr.py", line 331, in __getattribute__
    return super(newstr, self).__getattribute__(name)
AttributeError: 'newstr' object has no attribute 'items'
2017-03-31 15:59:39,299 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-31 15:59:39,301 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-31 15:59:39,318 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-31 15:59:39,318 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 15:59:39,329 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1491001179, 'registration_client_uri': 'https://localhost:8040/registration?client_id=95smJlt0euzp', 'registration_access_token': 'nvmGTPPmNBdnpSdI4WijvvwXFVSFDVnP', 'client_salt': 'ViEFaD9i', 'client_id': '95smJlt0euzp', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491087579}
2017-03-31 15:59:39,329 oic.utils.keyio:DEBUG loading keys for issuer: 95smJlt0euzp
2017-03-31 15:59:39,329 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 15:59:39,329 oic.oic.provider:DEBUG found 0 keys for client_id=95smJlt0euzp
2017-03-31 15:59:39,330 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1491001179, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=95smJlt0euzp', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'nvmGTPPmNBdnpSdI4WijvvwXFVSFDVnP', 'response_types': [u'code'], 'client_id': '95smJlt0euzp', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491087579}
2017-03-31 15:59:52,178 oic.oauth2.provider:DEBUG Request: 'nonce=elUjVEk2d4e7x9Nr8wtnmyDrebtgX2UP&acr_values=SAML&state=XuJQX8QncnMPAswjKpysHPPy4Hs62eEn&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=95smJlt0euzp&scope=openid+profile+email+address+phone'
2017-03-31 15:59:52,178 oic.oic:DEBUG Found 3 verify keys
2017-03-31 15:59:52,179 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'elUjVEk2d4e7x9Nr8wtnmyDrebtgX2UP', 'acr_values': 'SAML', 'state': 'XuJQX8QncnMPAswjKpysHPPy4Hs62eEn', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': '95smJlt0euzp', 'scope': 'openid profile email address phone'}
2017-03-31 15:59:52,184 oic.oic.provider:INFO authorization_request: {'nonce': 'elUjVEk2d4e7x9Nr8wtnmyDrebtgX2UP', 'acr_values': 'SAML', 'state': 'XuJQX8QncnMPAswjKpysHPPy4Hs62eEn', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': '95smJlt0euzp', 'scope': 'openid profile email address phone'}
2017-03-31 15:59:52,185 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 15:59:52,185 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 15:59:52,185 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 15:59:52,185 oic.oauth2.provider:INFO No active authentication
2017-03-31 15:59:52,185 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=elUjVEk2d4e7x9Nr8wtnmyDrebtgX2UP&acr_values=SAML&state=XuJQX8QncnMPAswjKpysHPPy4Hs62eEn&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=95smJlt0euzp&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-31 15:59:58,239 oic.utils.authn.user:DEBUG verify(query=nonce%3DelUjVEk2d4e7x9Nr8wtnmyDrebtgX2UP%26acr_values%3DSAML%26state%3DXuJQX8QncnMPAswjKpysHPPy4Hs62eEn%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3D95smJlt0euzp%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-03-31 15:59:58,239 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=elUjVEk2d4e7x9Nr8wtnmyDrebtgX2UP&acr_values=SAML&state=XuJQX8QncnMPAswjKpysHPPy4Hs62eEn&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=95smJlt0euzp&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-03-31 15:59:58,239 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-03-31 15:59:58,243 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'elUjVEk2d4e7x9Nr8wtnmyDrebtgX2UP'], u'acr_values': [u'SAML'], u'state': [u'XuJQX8QncnMPAswjKpysHPPy4Hs62eEn'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'95smJlt0euzp'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-03-31 15:59:58,252 oic.oauth2.provider:DEBUG Request: 'nonce=elUjVEk2d4e7x9Nr8wtnmyDrebtgX2UP&acr_values=SAML&state=XuJQX8QncnMPAswjKpysHPPy4Hs62eEn&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=95smJlt0euzp&upm_answer=true&scope=openid+profile+email+address+phone'
2017-03-31 15:59:58,252 oic.oic:DEBUG Found 3 verify keys
2017-03-31 15:59:58,252 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'elUjVEk2d4e7x9Nr8wtnmyDrebtgX2UP', 'acr_values': 'SAML', 'state': 'XuJQX8QncnMPAswjKpysHPPy4Hs62eEn', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': '95smJlt0euzp', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 15:59:58,253 oic.oic.provider:INFO authorization_request: {'nonce': 'elUjVEk2d4e7x9Nr8wtnmyDrebtgX2UP', 'acr_values': 'SAML', 'state': 'XuJQX8QncnMPAswjKpysHPPy4Hs62eEn', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': '95smJlt0euzp', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 15:59:58,253 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 15:59:58,253 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 15:59:58,253 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 15:59:58,254 oic.oauth2.provider:INFO No active authentication
2017-03-31 15:59:58,254 oic.oic.provider:DEBUG - authenticated -
2017-03-31 15:59:58,254 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-03-31 15:59:58,254 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['b23d65e1ef6df6d4184a7a01160f32d54703a26bca4ba87cb1649e4c']}
2017-03-31 15:59:58,254 oic.oauth2.provider:DEBUG - in authenticated() -
2017-03-31 15:59:58,254 oic.oauth2.provider:DEBUG response type: ['code']
2017-03-31 15:59:58,256 oicServer:ERROR 'newstr' object has no attribute 'items'
Traceback (most recent call last):
  File "./server.py", line 316, in application
    return callback(environ, start_response)
  File "./server.py", line 198, in authorization
    self.oas.authorization_endpoint, logger=logger)  # cookies required.
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/oic/utils/http_util.py", line 411, in wsgi_wrapper
    args = func(**kwargs)
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/oic/oic/provider.py", line 773, in authorization_endpoint
    return self.authz_part2(authnres["user"], areq, sid, cookie=cookie)
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/oic/oic/provider.py", line 776, in authz_part2
    result = self._complete_authz(user, areq, sid, **kwargs)
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/oic/oauth2/provider.py", line 724, in _complete_authz
    _c.load(_kaka)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/Cookie.py", line 643, in load
    for k, v in rawdata.items():
  File "/Users/vahid/vens/pyoidc/lib/python2.7/site-packages/future/types/newstr.py", line 331, in __getattribute__
    return super(newstr, self).__getattribute__(name)
AttributeError: 'newstr' object has no attribute 'items'
2017-03-31 16:11:04,107 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-31 16:11:04,109 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-31 16:11:04,128 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-31 16:11:04,128 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 16:11:04,134 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1491001864, 'registration_client_uri': 'https://localhost:8040/registration?client_id=NVm3AcROutEI', 'registration_access_token': '6tyfQ8jCrvNvsBjXjlwDVWkotQMZLL9n', 'client_salt': 'K3AUALb2', 'client_id': 'NVm3AcROutEI', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491088264}
2017-03-31 16:11:04,134 oic.utils.keyio:DEBUG loading keys for issuer: NVm3AcROutEI
2017-03-31 16:11:04,134 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 16:11:04,134 oic.oic.provider:DEBUG found 0 keys for client_id=NVm3AcROutEI
2017-03-31 16:11:04,135 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1491001864, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=NVm3AcROutEI', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': '6tyfQ8jCrvNvsBjXjlwDVWkotQMZLL9n', 'response_types': [u'code'], 'client_id': 'NVm3AcROutEI', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491088264}
2017-03-31 16:11:16,417 oic.oauth2.provider:DEBUG Request: 'nonce=450VBS7JgJIqg4bGB8bPjedReV8k3Pkj&acr_values=SAML&state=NPbEUG47imt88sYTtEDadtEJVMMqwd7Q&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=NVm3AcROutEI&scope=openid+profile+email+address+phone'
2017-03-31 16:11:16,417 oic.oic:DEBUG Found 3 verify keys
2017-03-31 16:11:16,417 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': '450VBS7JgJIqg4bGB8bPjedReV8k3Pkj', 'acr_values': 'SAML', 'state': 'NPbEUG47imt88sYTtEDadtEJVMMqwd7Q', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'NVm3AcROutEI', 'scope': 'openid profile email address phone'}
2017-03-31 16:11:16,418 oic.oic.provider:INFO authorization_request: {'nonce': '450VBS7JgJIqg4bGB8bPjedReV8k3Pkj', 'acr_values': 'SAML', 'state': 'NPbEUG47imt88sYTtEDadtEJVMMqwd7Q', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'NVm3AcROutEI', 'scope': 'openid profile email address phone'}
2017-03-31 16:11:16,418 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 16:11:16,418 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 16:11:16,418 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 16:11:16,418 oic.oauth2.provider:INFO No active authentication
2017-03-31 16:11:16,418 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=450VBS7JgJIqg4bGB8bPjedReV8k3Pkj&acr_values=SAML&state=NPbEUG47imt88sYTtEDadtEJVMMqwd7Q&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=NVm3AcROutEI&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-31 16:11:16,458 root:DEBUG unknown side: favicon.ico
2017-03-31 16:12:31,563 oic.utils.authn.user:DEBUG verify(query=nonce%3D450VBS7JgJIqg4bGB8bPjedReV8k3Pkj%26acr_values%3DSAML%26state%3DNPbEUG47imt88sYTtEDadtEJVMMqwd7Q%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3DNVm3AcROutEI%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-03-31 16:12:31,564 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=450VBS7JgJIqg4bGB8bPjedReV8k3Pkj&acr_values=SAML&state=NPbEUG47imt88sYTtEDadtEJVMMqwd7Q&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=NVm3AcROutEI&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-03-31 16:12:31,564 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-03-31 16:12:31,567 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'450VBS7JgJIqg4bGB8bPjedReV8k3Pkj'], u'acr_values': [u'SAML'], u'state': [u'NPbEUG47imt88sYTtEDadtEJVMMqwd7Q'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'NVm3AcROutEI'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-03-31 16:12:31,574 oic.oauth2.provider:DEBUG Request: 'nonce=450VBS7JgJIqg4bGB8bPjedReV8k3Pkj&acr_values=SAML&state=NPbEUG47imt88sYTtEDadtEJVMMqwd7Q&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=NVm3AcROutEI&upm_answer=true&scope=openid+profile+email+address+phone'
2017-03-31 16:12:31,574 oic.oic:DEBUG Found 3 verify keys
2017-03-31 16:12:31,575 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': '450VBS7JgJIqg4bGB8bPjedReV8k3Pkj', 'acr_values': 'SAML', 'state': 'NPbEUG47imt88sYTtEDadtEJVMMqwd7Q', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'NVm3AcROutEI', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 16:12:31,575 oic.oic.provider:INFO authorization_request: {'nonce': '450VBS7JgJIqg4bGB8bPjedReV8k3Pkj', 'acr_values': 'SAML', 'state': 'NPbEUG47imt88sYTtEDadtEJVMMqwd7Q', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'NVm3AcROutEI', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 16:12:31,575 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 16:12:31,575 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 16:12:31,575 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 16:12:31,576 oic.oauth2.provider:INFO No active authentication
2017-03-31 16:12:31,576 oic.oic.provider:DEBUG - authenticated -
2017-03-31 16:12:31,576 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-03-31 16:12:31,576 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['f4051e8643419a9b8f981f32cd6e408bae47341fe9f0d8cb3de75996']}
2017-03-31 16:12:31,576 oic.oauth2.provider:DEBUG - in authenticated() -
2017-03-31 16:12:31,576 oic.oauth2.provider:DEBUG response type: ['code']
2017-03-31 16:12:31,577 oic.oic.provider:INFO authorization response: {'iss': 'https://localhost:8040/', 'scope': 'openid profile email address phone', 'state': 'NPbEUG47imt88sYTtEDadtEJVMMqwd7Q', 'code': '<REDACTED>', 'client_id': 'NVm3AcROutEI'}
2017-03-31 16:12:31,578 oic.oic.provider:DEBUG Redirected to: '{base}authz_cb?iss=https%3A%2F%2Flocalhost%3A8040%2F&scope=openid+profile+email+address+phone&state=NPbEUG47imt88sYTtEDadtEJVMMqwd7Q&code=<REDACTED>&client_id=NVm3AcROutEI' (<type 'unicode'>)
2017-03-31 16:12:31,583 root:DEBUG unknown side: {base}authz_cb
2017-03-31 16:15:11,023 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-31 16:15:11,024 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-31 16:15:11,042 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-31 16:15:11,042 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 16:15:11,052 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1491002111, 'registration_client_uri': 'https://localhost:8040/registration?client_id=9Ghc3H9UAefr', 'registration_access_token': 'Xcl1NIlrSJL8jbwqN5JK0xB9TcEaswqQ', 'client_salt': '0zfYCzdk', 'client_id': '9Ghc3H9UAefr', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491088511}
2017-03-31 16:15:11,052 oic.utils.keyio:DEBUG loading keys for issuer: 9Ghc3H9UAefr
2017-03-31 16:15:11,052 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 16:15:11,052 oic.oic.provider:DEBUG found 0 keys for client_id=9Ghc3H9UAefr
2017-03-31 16:15:11,053 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1491002111, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=9Ghc3H9UAefr', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'Xcl1NIlrSJL8jbwqN5JK0xB9TcEaswqQ', 'response_types': [u'code'], 'client_id': '9Ghc3H9UAefr', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491088511}
2017-03-31 16:15:22,835 oic.oauth2.provider:DEBUG Request: 'nonce=8nz4UPz9Agtr53S3HoAwRsmzKsAdqTZq&acr_values=SAML&state=clcL5XjyBtrWPiiV8O8K3Ut8l8MbTRMJ&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=9Ghc3H9UAefr&scope=openid+profile+email+address+phone'
2017-03-31 16:15:22,835 oic.oic:DEBUG Found 3 verify keys
2017-03-31 16:15:22,836 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': '8nz4UPz9Agtr53S3HoAwRsmzKsAdqTZq', 'acr_values': 'SAML', 'state': 'clcL5XjyBtrWPiiV8O8K3Ut8l8MbTRMJ', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': '9Ghc3H9UAefr', 'scope': 'openid profile email address phone'}
2017-03-31 16:15:22,841 oic.oic.provider:INFO authorization_request: {'nonce': '8nz4UPz9Agtr53S3HoAwRsmzKsAdqTZq', 'acr_values': 'SAML', 'state': 'clcL5XjyBtrWPiiV8O8K3Ut8l8MbTRMJ', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': '9Ghc3H9UAefr', 'scope': 'openid profile email address phone'}
2017-03-31 16:15:22,842 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 16:15:22,842 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 16:15:22,842 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 16:15:22,842 oic.oauth2.provider:INFO No active authentication
2017-03-31 16:15:22,842 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=8nz4UPz9Agtr53S3HoAwRsmzKsAdqTZq&acr_values=SAML&state=clcL5XjyBtrWPiiV8O8K3Ut8l8MbTRMJ&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=9Ghc3H9UAefr&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-03-31 16:15:28,795 oic.utils.authn.user:DEBUG verify(query=nonce%3D8nz4UPz9Agtr53S3HoAwRsmzKsAdqTZq%26acr_values%3DSAML%26state%3DclcL5XjyBtrWPiiV8O8K3Ut8l8MbTRMJ%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3D9Ghc3H9UAefr%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-03-31 16:15:28,795 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=8nz4UPz9Agtr53S3HoAwRsmzKsAdqTZq&acr_values=SAML&state=clcL5XjyBtrWPiiV8O8K3Ut8l8MbTRMJ&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=9Ghc3H9UAefr&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-03-31 16:15:28,795 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-03-31 16:15:28,799 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'8nz4UPz9Agtr53S3HoAwRsmzKsAdqTZq'], u'acr_values': [u'SAML'], u'state': [u'clcL5XjyBtrWPiiV8O8K3Ut8l8MbTRMJ'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'9Ghc3H9UAefr'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-03-31 16:15:28,806 oic.oauth2.provider:DEBUG Request: 'nonce=8nz4UPz9Agtr53S3HoAwRsmzKsAdqTZq&acr_values=SAML&state=clcL5XjyBtrWPiiV8O8K3Ut8l8MbTRMJ&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=9Ghc3H9UAefr&upm_answer=true&scope=openid+profile+email+address+phone'
2017-03-31 16:15:28,806 oic.oic:DEBUG Found 3 verify keys
2017-03-31 16:15:28,807 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': '8nz4UPz9Agtr53S3HoAwRsmzKsAdqTZq', 'acr_values': 'SAML', 'state': 'clcL5XjyBtrWPiiV8O8K3Ut8l8MbTRMJ', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': '9Ghc3H9UAefr', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 16:15:28,807 oic.oic.provider:INFO authorization_request: {'nonce': '8nz4UPz9Agtr53S3HoAwRsmzKsAdqTZq', 'acr_values': 'SAML', 'state': 'clcL5XjyBtrWPiiV8O8K3Ut8l8MbTRMJ', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': '9Ghc3H9UAefr', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-03-31 16:15:28,808 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 16:15:28,808 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-03-31 16:15:28,808 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-03-31 16:15:28,808 oic.oauth2.provider:INFO No active authentication
2017-03-31 16:15:28,808 oic.oic.provider:DEBUG - authenticated -
2017-03-31 16:15:28,808 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-03-31 16:15:28,809 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['0dba8332cbd98ef2eaca836dbdd5fbfabebe9946b320c7663db08226']}
2017-03-31 16:15:28,809 oic.oauth2.provider:DEBUG - in authenticated() -
2017-03-31 16:15:28,809 oic.oauth2.provider:DEBUG response type: ['code']
2017-03-31 16:15:28,809 oic.oic.provider:INFO authorization response: {'iss': 'https://localhost:8040/', 'scope': 'openid profile email address phone', 'state': 'clcL5XjyBtrWPiiV8O8K3Ut8l8MbTRMJ', 'code': '<REDACTED>', 'client_id': '9Ghc3H9UAefr'}
2017-03-31 16:15:28,811 oic.oic.provider:DEBUG Redirected to: '{base}authz_cb?iss=https%3A%2F%2Flocalhost%3A8040%2F&scope=openid+profile+email+address+phone&state=clcL5XjyBtrWPiiV8O8K3Ut8l8MbTRMJ&code=<REDACTED>&client_id=9Ghc3H9UAefr' (<type 'unicode'>)
2017-03-31 16:15:28,815 root:DEBUG unknown side: {base}authz_cb
2017-03-31 18:24:41,393 oic.oic.provider:INFO @providerinfo_endpoint
2017-03-31 18:24:41,395 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-03-31 18:24:41,412 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-03-31 18:24:41,412 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 18:24:41,422 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1491009881, 'registration_client_uri': 'https://localhost:8040/registration?client_id=SGer4IQssBxc', 'registration_access_token': 'P3fifjRrpzd3Nc2iIKw3bySSgi1G58nl', 'client_salt': 'DXacCjQw', 'client_id': 'SGer4IQssBxc', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491096281}
2017-03-31 18:24:41,423 oic.utils.keyio:DEBUG loading keys for issuer: SGer4IQssBxc
2017-03-31 18:24:41,423 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-03-31 18:24:41,423 oic.oic.provider:DEBUG found 0 keys for client_id=SGer4IQssBxc
2017-03-31 18:24:41,424 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1491009881, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=SGer4IQssBxc', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'P3fifjRrpzd3Nc2iIKw3bySSgi1G58nl', 'response_types': [u'code'], 'client_id': 'SGer4IQssBxc', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491096281}
2017-04-03 09:39:39,947 oic.oic.provider:INFO @providerinfo_endpoint
2017-04-03 09:39:39,949 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-04-03 09:39:40,000 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-04-03 09:39:40,001 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-04-03 09:39:40,005 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1491237580, 'registration_client_uri': 'https://localhost:8040/registration?client_id=q4QDKb1faX5g', 'registration_access_token': 'lEMda8wgYM2Wq6dJM3RPS6a0Woh3EPEN', 'client_salt': 'GtuyDMKj', 'client_id': 'q4QDKb1faX5g', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491323980}
2017-04-03 09:39:40,005 oic.utils.keyio:DEBUG loading keys for issuer: q4QDKb1faX5g
2017-04-03 09:39:40,005 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-04-03 09:39:40,005 oic.oic.provider:DEBUG found 0 keys for client_id=q4QDKb1faX5g
2017-04-03 09:39:40,006 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1491237580, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=q4QDKb1faX5g', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'lEMda8wgYM2Wq6dJM3RPS6a0Woh3EPEN', 'response_types': [u'code'], 'client_id': 'q4QDKb1faX5g', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491323980}
2017-04-03 09:39:50,244 oic.oauth2.provider:DEBUG Request: 'nonce=C1lTsh2UgL9qnxE1vK2ZQtnh6HbpXyus&acr_values=SAML&state=tOpjsYMvD2r2pKzcjPzUy4TYtoFL1S7D&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=q4QDKb1faX5g&scope=openid+profile+email+address+phone'
2017-04-03 09:39:50,244 oic.oic:DEBUG Found 3 verify keys
2017-04-03 09:39:50,245 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'C1lTsh2UgL9qnxE1vK2ZQtnh6HbpXyus', 'acr_values': 'SAML', 'state': 'tOpjsYMvD2r2pKzcjPzUy4TYtoFL1S7D', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'q4QDKb1faX5g', 'scope': 'openid profile email address phone'}
2017-04-03 09:39:50,246 oic.oic.provider:INFO authorization_request: {'nonce': 'C1lTsh2UgL9qnxE1vK2ZQtnh6HbpXyus', 'acr_values': 'SAML', 'state': 'tOpjsYMvD2r2pKzcjPzUy4TYtoFL1S7D', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'q4QDKb1faX5g', 'scope': 'openid profile email address phone'}
2017-04-03 09:39:50,246 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 09:39:50,246 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 09:39:50,246 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-04-03 09:39:50,246 oic.oauth2.provider:INFO No active authentication
2017-04-03 09:39:50,247 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=C1lTsh2UgL9qnxE1vK2ZQtnh6HbpXyus&acr_values=SAML&state=tOpjsYMvD2r2pKzcjPzUy4TYtoFL1S7D&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=q4QDKb1faX5g&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-04-03 09:39:54,654 oic.utils.authn.user:DEBUG verify(query=nonce%3DC1lTsh2UgL9qnxE1vK2ZQtnh6HbpXyus%26acr_values%3DSAML%26state%3DtOpjsYMvD2r2pKzcjPzUy4TYtoFL1S7D%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3Dq4QDKb1faX5g%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-04-03 09:39:54,654 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=C1lTsh2UgL9qnxE1vK2ZQtnh6HbpXyus&acr_values=SAML&state=tOpjsYMvD2r2pKzcjPzUy4TYtoFL1S7D&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=q4QDKb1faX5g&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-04-03 09:39:54,654 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-04-03 09:39:54,657 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'C1lTsh2UgL9qnxE1vK2ZQtnh6HbpXyus'], u'acr_values': [u'SAML'], u'state': [u'tOpjsYMvD2r2pKzcjPzUy4TYtoFL1S7D'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'q4QDKb1faX5g'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-04-03 09:39:54,665 oic.oauth2.provider:DEBUG Request: 'nonce=C1lTsh2UgL9qnxE1vK2ZQtnh6HbpXyus&acr_values=SAML&state=tOpjsYMvD2r2pKzcjPzUy4TYtoFL1S7D&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=q4QDKb1faX5g&upm_answer=true&scope=openid+profile+email+address+phone'
2017-04-03 09:39:54,666 oic.oic:DEBUG Found 3 verify keys
2017-04-03 09:39:54,666 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'C1lTsh2UgL9qnxE1vK2ZQtnh6HbpXyus', 'acr_values': 'SAML', 'state': 'tOpjsYMvD2r2pKzcjPzUy4TYtoFL1S7D', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'q4QDKb1faX5g', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-04-03 09:39:54,667 oic.oic.provider:INFO authorization_request: {'nonce': 'C1lTsh2UgL9qnxE1vK2ZQtnh6HbpXyus', 'acr_values': 'SAML', 'state': 'tOpjsYMvD2r2pKzcjPzUy4TYtoFL1S7D', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'q4QDKb1faX5g', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-04-03 09:39:54,667 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 09:39:54,667 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 09:39:54,667 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-04-03 09:39:54,667 oic.oauth2.provider:INFO No active authentication
2017-04-03 09:39:54,667 oic.oic.provider:DEBUG - authenticated -
2017-04-03 09:39:54,667 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-04-03 09:39:54,668 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['c43485fc719b91a371c824e8e9784b3f7fba692469d071eda640e318']}
2017-04-03 09:39:54,668 oic.oauth2.provider:DEBUG - in authenticated() -
2017-04-03 09:39:54,668 oic.oauth2.provider:DEBUG response type: ['code']
2017-04-03 09:39:54,668 oic.oic.provider:INFO authorization response: {'iss': 'https://localhost:8040/', 'scope': 'openid profile email address phone', 'state': 'tOpjsYMvD2r2pKzcjPzUy4TYtoFL1S7D', 'code': '<REDACTED>', 'client_id': 'q4QDKb1faX5g'}
2017-04-03 09:39:54,670 oic.oic.provider:DEBUG Redirected to: '{base}authz_cb?iss=https%3A%2F%2Flocalhost%3A8040%2F&scope=openid+profile+email+address+phone&state=tOpjsYMvD2r2pKzcjPzUy4TYtoFL1S7D&code=<REDACTED>&client_id=q4QDKb1faX5g' (<type 'unicode'>)
2017-04-03 09:39:54,674 root:DEBUG unknown side: {base}authz_cb
2017-04-03 09:57:25,887 oic.oic.provider:INFO @providerinfo_endpoint
2017-04-03 09:57:25,889 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-04-03 09:57:25,906 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-04-03 09:57:25,906 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-04-03 09:57:25,916 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1491238645, 'registration_client_uri': 'https://localhost:8040/registration?client_id=KfNdXDUuVRUa', 'registration_access_token': '3Nar2GgWO1nCXdnLKqGqWav8LIitAr0R', 'client_salt': 'pC7F7GTc', 'client_id': 'KfNdXDUuVRUa', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491325045}
2017-04-03 09:57:25,916 oic.utils.keyio:DEBUG loading keys for issuer: KfNdXDUuVRUa
2017-04-03 09:57:25,916 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-04-03 09:57:25,916 oic.oic.provider:DEBUG found 0 keys for client_id=KfNdXDUuVRUa
2017-04-03 09:57:25,917 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1491238645, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=KfNdXDUuVRUa', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': '3Nar2GgWO1nCXdnLKqGqWav8LIitAr0R', 'response_types': [u'code'], 'client_id': 'KfNdXDUuVRUa', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491325045}
2017-04-03 09:57:38,112 oic.oauth2.provider:DEBUG Request: 'nonce=J6NSLUc7WK9czBiXOxfJB5F9tTExcZCL&acr_values=SAML&state=KkjKjH7N53SftVfxoMSn0IJxaE8jtvVl&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=KfNdXDUuVRUa&scope=openid+profile+email+address+phone'
2017-04-03 09:57:38,113 oic.oic:DEBUG Found 3 verify keys
2017-04-03 09:57:38,113 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'J6NSLUc7WK9czBiXOxfJB5F9tTExcZCL', 'acr_values': 'SAML', 'state': 'KkjKjH7N53SftVfxoMSn0IJxaE8jtvVl', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'KfNdXDUuVRUa', 'scope': 'openid profile email address phone'}
2017-04-03 09:57:38,119 oic.oic.provider:INFO authorization_request: {'nonce': 'J6NSLUc7WK9czBiXOxfJB5F9tTExcZCL', 'acr_values': 'SAML', 'state': 'KkjKjH7N53SftVfxoMSn0IJxaE8jtvVl', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'KfNdXDUuVRUa', 'scope': 'openid profile email address phone'}
2017-04-03 09:57:38,119 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 09:57:38,120 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 09:57:38,120 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-04-03 09:57:38,120 oic.oauth2.provider:INFO No active authentication
2017-04-03 09:57:38,120 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=J6NSLUc7WK9czBiXOxfJB5F9tTExcZCL&acr_values=SAML&state=KkjKjH7N53SftVfxoMSn0IJxaE8jtvVl&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=KfNdXDUuVRUa&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-04-03 09:57:42,326 oic.utils.authn.user:DEBUG verify(query=nonce%3DJ6NSLUc7WK9czBiXOxfJB5F9tTExcZCL%26acr_values%3DSAML%26state%3DKkjKjH7N53SftVfxoMSn0IJxaE8jtvVl%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3DKfNdXDUuVRUa%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-04-03 09:57:42,326 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=J6NSLUc7WK9czBiXOxfJB5F9tTExcZCL&acr_values=SAML&state=KkjKjH7N53SftVfxoMSn0IJxaE8jtvVl&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=KfNdXDUuVRUa&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-04-03 09:57:42,326 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-04-03 09:57:42,330 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'J6NSLUc7WK9czBiXOxfJB5F9tTExcZCL'], u'acr_values': [u'SAML'], u'state': [u'KkjKjH7N53SftVfxoMSn0IJxaE8jtvVl'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'KfNdXDUuVRUa'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-04-03 09:57:42,337 oic.oauth2.provider:DEBUG Request: 'nonce=J6NSLUc7WK9czBiXOxfJB5F9tTExcZCL&acr_values=SAML&state=KkjKjH7N53SftVfxoMSn0IJxaE8jtvVl&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=KfNdXDUuVRUa&upm_answer=true&scope=openid+profile+email+address+phone'
2017-04-03 09:57:42,338 oic.oic:DEBUG Found 3 verify keys
2017-04-03 09:57:42,338 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'J6NSLUc7WK9czBiXOxfJB5F9tTExcZCL', 'acr_values': 'SAML', 'state': 'KkjKjH7N53SftVfxoMSn0IJxaE8jtvVl', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'KfNdXDUuVRUa', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-04-03 09:57:42,338 oic.oic.provider:INFO authorization_request: {'nonce': 'J6NSLUc7WK9czBiXOxfJB5F9tTExcZCL', 'acr_values': 'SAML', 'state': 'KkjKjH7N53SftVfxoMSn0IJxaE8jtvVl', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'KfNdXDUuVRUa', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-04-03 09:57:42,339 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 09:57:42,339 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 09:57:42,339 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-04-03 09:57:42,339 oic.oauth2.provider:INFO No active authentication
2017-04-03 09:57:42,339 oic.oic.provider:DEBUG - authenticated -
2017-04-03 09:57:42,339 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-04-03 09:57:42,340 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['ab9760696804ebb7b5fbce32832f25a233f0309bb693959c4e336d30']}
2017-04-03 09:57:42,340 oic.oauth2.provider:DEBUG - in authenticated() -
2017-04-03 09:57:42,340 oic.oauth2.provider:DEBUG response type: ['code']
2017-04-03 09:57:42,340 oic.oic.provider:INFO authorization response: {'iss': 'https://localhost:8040/', 'scope': 'openid profile email address phone', 'state': 'KkjKjH7N53SftVfxoMSn0IJxaE8jtvVl', 'code': '<REDACTED>', 'client_id': 'KfNdXDUuVRUa'}
2017-04-03 09:57:42,342 oic.oic.provider:DEBUG Redirected to: '{base}authz_cb?iss=https%3A%2F%2Flocalhost%3A8040%2F&scope=openid+profile+email+address+phone&state=KkjKjH7N53SftVfxoMSn0IJxaE8jtvVl&code=<REDACTED>&client_id=KfNdXDUuVRUa' (<type 'unicode'>)
2017-04-03 09:57:42,346 root:DEBUG unknown side: {base}authz_cb
2017-04-03 09:59:21,947 oicServer:INFO PATH: ".well-known/openid-configuration"
2017-04-03 09:59:21,948 oic.oic.provider:INFO @providerinfo_endpoint
2017-04-03 09:59:21,950 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-04-03 09:59:21,966 oicServer:INFO PATH: "registration"
2017-04-03 09:59:21,967 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-04-03 09:59:21,967 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-04-03 09:59:21,977 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1491238761, 'registration_client_uri': 'https://localhost:8040/registration?client_id=tr9tGFPNmhIh', 'registration_access_token': '8PCWAo29Bb0VmqnEljI9J0pv0oP78IH0', 'client_salt': 'bfwDTzQx', 'client_id': 'tr9tGFPNmhIh', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491325161}
2017-04-03 09:59:21,977 oic.utils.keyio:DEBUG loading keys for issuer: tr9tGFPNmhIh
2017-04-03 09:59:21,977 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-04-03 09:59:21,977 oic.oic.provider:DEBUG found 0 keys for client_id=tr9tGFPNmhIh
2017-04-03 09:59:21,978 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1491238761, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=tr9tGFPNmhIh', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': '8PCWAo29Bb0VmqnEljI9J0pv0oP78IH0', 'response_types': [u'code'], 'client_id': 'tr9tGFPNmhIh', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491325161}
2017-04-03 09:59:28,204 oicServer:INFO PATH: "authorization"
2017-04-03 09:59:28,205 oic.oauth2.provider:DEBUG Request: 'nonce=eZPIqI7D1I37tt60Z6OqSFM9qPCwvH30&acr_values=SAML&state=zjB6RM7DRDzhlCt5GbOH8r4czaG5oF8E&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=tr9tGFPNmhIh&scope=openid+profile+email+address+phone'
2017-04-03 09:59:28,205 oic.oic:DEBUG Found 3 verify keys
2017-04-03 09:59:28,205 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'eZPIqI7D1I37tt60Z6OqSFM9qPCwvH30', 'acr_values': 'SAML', 'state': 'zjB6RM7DRDzhlCt5GbOH8r4czaG5oF8E', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'tr9tGFPNmhIh', 'scope': 'openid profile email address phone'}
2017-04-03 09:59:28,212 oic.oic.provider:INFO authorization_request: {'nonce': 'eZPIqI7D1I37tt60Z6OqSFM9qPCwvH30', 'acr_values': 'SAML', 'state': 'zjB6RM7DRDzhlCt5GbOH8r4czaG5oF8E', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'tr9tGFPNmhIh', 'scope': 'openid profile email address phone'}
2017-04-03 09:59:28,212 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 09:59:28,212 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 09:59:28,212 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-04-03 09:59:28,213 oic.oauth2.provider:INFO No active authentication
2017-04-03 09:59:28,213 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=eZPIqI7D1I37tt60Z6OqSFM9qPCwvH30&acr_values=SAML&state=zjB6RM7DRDzhlCt5GbOH8r4czaG5oF8E&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=tr9tGFPNmhIh&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-04-03 09:59:28,222 oicServer:INFO PATH: "css/main.css"
2017-04-03 09:59:31,572 oicServer:INFO PATH: "verify"
2017-04-03 09:59:31,572 oic.utils.authn.user:DEBUG verify(query=nonce%3DeZPIqI7D1I37tt60Z6OqSFM9qPCwvH30%26acr_values%3DSAML%26state%3DzjB6RM7DRDzhlCt5GbOH8r4czaG5oF8E%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3Dtr9tGFPNmhIh%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-04-03 09:59:31,572 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=eZPIqI7D1I37tt60Z6OqSFM9qPCwvH30&acr_values=SAML&state=zjB6RM7DRDzhlCt5GbOH8r4czaG5oF8E&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=tr9tGFPNmhIh&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-04-03 09:59:31,572 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-04-03 09:59:31,577 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'eZPIqI7D1I37tt60Z6OqSFM9qPCwvH30'], u'acr_values': [u'SAML'], u'state': [u'zjB6RM7DRDzhlCt5GbOH8r4czaG5oF8E'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'tr9tGFPNmhIh'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-04-03 09:59:31,583 oicServer:INFO PATH: "authorization"
2017-04-03 09:59:31,584 oic.oauth2.provider:DEBUG Request: 'nonce=eZPIqI7D1I37tt60Z6OqSFM9qPCwvH30&acr_values=SAML&state=zjB6RM7DRDzhlCt5GbOH8r4czaG5oF8E&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=tr9tGFPNmhIh&upm_answer=true&scope=openid+profile+email+address+phone'
2017-04-03 09:59:31,584 oic.oic:DEBUG Found 3 verify keys
2017-04-03 09:59:31,585 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'eZPIqI7D1I37tt60Z6OqSFM9qPCwvH30', 'acr_values': 'SAML', 'state': 'zjB6RM7DRDzhlCt5GbOH8r4czaG5oF8E', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'tr9tGFPNmhIh', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-04-03 09:59:31,585 oic.oic.provider:INFO authorization_request: {'nonce': 'eZPIqI7D1I37tt60Z6OqSFM9qPCwvH30', 'acr_values': 'SAML', 'state': 'zjB6RM7DRDzhlCt5GbOH8r4czaG5oF8E', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'tr9tGFPNmhIh', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-04-03 09:59:31,585 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 09:59:31,585 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 09:59:31,585 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-04-03 09:59:31,586 oic.oauth2.provider:INFO No active authentication
2017-04-03 09:59:31,586 oic.oic.provider:DEBUG - authenticated -
2017-04-03 09:59:31,586 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-04-03 09:59:31,586 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['5ab2628fbf682e35130fd31afebee1523ebad28f31bf0b20f440b823']}
2017-04-03 09:59:31,586 oic.oauth2.provider:DEBUG - in authenticated() -
2017-04-03 09:59:31,586 oic.oauth2.provider:DEBUG response type: ['code']
2017-04-03 09:59:31,587 oic.oic.provider:INFO authorization response: {'iss': 'https://localhost:8040/', 'scope': 'openid profile email address phone', 'state': 'zjB6RM7DRDzhlCt5GbOH8r4czaG5oF8E', 'code': '<REDACTED>', 'client_id': 'tr9tGFPNmhIh'}
2017-04-03 09:59:31,588 oic.oic.provider:DEBUG Redirected to: '{base}authz_cb?iss=https%3A%2F%2Flocalhost%3A8040%2F&scope=openid+profile+email+address+phone&state=zjB6RM7DRDzhlCt5GbOH8r4czaG5oF8E&code=<REDACTED>&client_id=tr9tGFPNmhIh' (<type 'unicode'>)
2017-04-03 09:59:31,592 oicServer:INFO PATH: "{base}authz_cb"
2017-04-03 09:59:31,593 root:DEBUG unknown side: {base}authz_cb
2017-04-03 10:02:54,918 oic.oic.provider:INFO @providerinfo_endpoint
2017-04-03 10:02:54,920 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-04-03 10:02:54,937 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-04-03 10:02:54,937 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-04-03 10:02:54,947 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1491238974, 'registration_client_uri': 'https://localhost:8040/registration?client_id=pLy2Z6VHGgk0', 'registration_access_token': 'aRhn3AHsHYA9lrdCe0mCLKylENZuOUbU', 'client_salt': 'Eaft11y1', 'client_id': 'pLy2Z6VHGgk0', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491325374}
2017-04-03 10:02:54,948 oic.utils.keyio:DEBUG loading keys for issuer: pLy2Z6VHGgk0
2017-04-03 10:02:54,948 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-04-03 10:02:54,948 oic.oic.provider:DEBUG found 0 keys for client_id=pLy2Z6VHGgk0
2017-04-03 10:02:54,949 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1491238974, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=pLy2Z6VHGgk0', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'aRhn3AHsHYA9lrdCe0mCLKylENZuOUbU', 'response_types': [u'code'], 'client_id': 'pLy2Z6VHGgk0', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491325374}
2017-04-03 10:07:18,460 oic.oic.provider:INFO @providerinfo_endpoint
2017-04-03 10:07:18,462 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-04-03 10:07:18,480 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-04-03 10:07:18,480 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-04-03 10:07:18,484 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1491239238, 'registration_client_uri': 'https://localhost:8040/registration?client_id=butVU9INh57T', 'registration_access_token': '0jRKkrNWM0eO47pwB0ZPrC1GM75hjMci', 'client_salt': 'NJwT417s', 'client_id': 'butVU9INh57T', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491325638}
2017-04-03 10:07:18,484 oic.utils.keyio:DEBUG loading keys for issuer: butVU9INh57T
2017-04-03 10:07:18,484 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-04-03 10:07:18,484 oic.oic.provider:DEBUG found 0 keys for client_id=butVU9INh57T
2017-04-03 10:07:18,485 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1491239238, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=butVU9INh57T', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': '0jRKkrNWM0eO47pwB0ZPrC1GM75hjMci', 'response_types': [u'code'], 'client_id': 'butVU9INh57T', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491325638}
2017-04-03 10:07:26,832 oic.oauth2.provider:DEBUG Request: 'nonce=0wzDUBA0YEYlEqvmGbTKnTCeBuuLVbCv&acr_values=SAML&state=nNfma0uPNeo7FlCYITvjkG4SAwFZ3juT&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=butVU9INh57T&scope=openid+profile+email+address+phone'
2017-04-03 10:07:26,833 oic.oic:DEBUG Found 3 verify keys
2017-04-03 10:07:26,833 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': '0wzDUBA0YEYlEqvmGbTKnTCeBuuLVbCv', 'acr_values': 'SAML', 'state': 'nNfma0uPNeo7FlCYITvjkG4SAwFZ3juT', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'butVU9INh57T', 'scope': 'openid profile email address phone'}
2017-04-03 10:07:26,839 oic.oic.provider:INFO authorization_request: {'nonce': '0wzDUBA0YEYlEqvmGbTKnTCeBuuLVbCv', 'acr_values': 'SAML', 'state': 'nNfma0uPNeo7FlCYITvjkG4SAwFZ3juT', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'butVU9INh57T', 'scope': 'openid profile email address phone'}
2017-04-03 10:07:26,840 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 10:07:26,840 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 10:07:26,840 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-04-03 10:07:26,841 oic.oauth2.provider:INFO No active authentication
2017-04-03 10:07:26,841 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=0wzDUBA0YEYlEqvmGbTKnTCeBuuLVbCv&acr_values=SAML&state=nNfma0uPNeo7FlCYITvjkG4SAwFZ3juT&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=butVU9INh57T&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-04-03 10:07:29,756 oic.utils.authn.user:DEBUG verify(query=nonce%3D0wzDUBA0YEYlEqvmGbTKnTCeBuuLVbCv%26acr_values%3DSAML%26state%3DnNfma0uPNeo7FlCYITvjkG4SAwFZ3juT%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3DbutVU9INh57T%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-04-03 10:07:29,756 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=0wzDUBA0YEYlEqvmGbTKnTCeBuuLVbCv&acr_values=SAML&state=nNfma0uPNeo7FlCYITvjkG4SAwFZ3juT&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=butVU9INh57T&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-04-03 10:07:29,756 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-04-03 10:07:29,760 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'0wzDUBA0YEYlEqvmGbTKnTCeBuuLVbCv'], u'acr_values': [u'SAML'], u'state': [u'nNfma0uPNeo7FlCYITvjkG4SAwFZ3juT'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'butVU9INh57T'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-04-03 10:07:29,768 oic.oauth2.provider:DEBUG Request: 'nonce=0wzDUBA0YEYlEqvmGbTKnTCeBuuLVbCv&acr_values=SAML&state=nNfma0uPNeo7FlCYITvjkG4SAwFZ3juT&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=butVU9INh57T&upm_answer=true&scope=openid+profile+email+address+phone'
2017-04-03 10:07:29,768 oic.oic:DEBUG Found 3 verify keys
2017-04-03 10:07:29,768 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': '0wzDUBA0YEYlEqvmGbTKnTCeBuuLVbCv', 'acr_values': 'SAML', 'state': 'nNfma0uPNeo7FlCYITvjkG4SAwFZ3juT', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'butVU9INh57T', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-04-03 10:07:29,769 oic.oic.provider:INFO authorization_request: {'nonce': '0wzDUBA0YEYlEqvmGbTKnTCeBuuLVbCv', 'acr_values': 'SAML', 'state': 'nNfma0uPNeo7FlCYITvjkG4SAwFZ3juT', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'butVU9INh57T', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-04-03 10:07:29,769 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 10:07:29,769 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 10:07:29,769 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-04-03 10:07:29,770 oic.oauth2.provider:INFO No active authentication
2017-04-03 10:07:29,770 oic.oic.provider:DEBUG - authenticated -
2017-04-03 10:07:29,770 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-04-03 10:07:29,770 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['718a2e0ac3e3d6363960ce30a076ba5c5da1837e6dab9e10875fb67e']}
2017-04-03 10:07:29,770 oic.oauth2.provider:DEBUG - in authenticated() -
2017-04-03 10:07:29,770 oic.oauth2.provider:DEBUG response type: ['code']
2017-04-03 10:07:29,771 oic.oic.provider:INFO authorization response: {'iss': 'https://localhost:8040/', 'scope': 'openid profile email address phone', 'state': 'nNfma0uPNeo7FlCYITvjkG4SAwFZ3juT', 'code': '<REDACTED>', 'client_id': 'butVU9INh57T'}
2017-04-03 10:07:29,773 oic.oic.provider:DEBUG Redirected to: '{base}authz_cb?iss=https%3A%2F%2Flocalhost%3A8040%2F&scope=openid+profile+email+address+phone&state=nNfma0uPNeo7FlCYITvjkG4SAwFZ3juT&code=<REDACTED>&client_id=butVU9INh57T' (<type 'unicode'>)
2017-04-03 10:07:29,778 root:DEBUG unknown side: {base}authz_cb
2017-04-03 10:11:49,339 oic.oic.provider:INFO @providerinfo_endpoint
2017-04-03 10:11:49,340 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-04-03 10:11:49,358 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-04-03 10:11:49,358 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-04-03 10:11:49,368 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1491239509, 'registration_client_uri': 'https://localhost:8040/registration?client_id=fgUaZ7vVbQZX', 'registration_access_token': 'gtlFu629gd2SJ0RJXCox2qc88VHcNRTL', 'client_salt': 'kJgHScZs', 'client_id': 'fgUaZ7vVbQZX', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491325909}
2017-04-03 10:11:49,369 oic.utils.keyio:DEBUG loading keys for issuer: fgUaZ7vVbQZX
2017-04-03 10:11:49,369 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-04-03 10:11:49,369 oic.oic.provider:DEBUG found 0 keys for client_id=fgUaZ7vVbQZX
2017-04-03 10:11:49,370 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1491239509, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=fgUaZ7vVbQZX', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'gtlFu629gd2SJ0RJXCox2qc88VHcNRTL', 'response_types': [u'code'], 'client_id': 'fgUaZ7vVbQZX', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491325909}
2017-04-03 10:12:07,866 oic.oauth2.provider:DEBUG Request: 'nonce=HyG8s6o3vmqTjdYEpwOSSooeyn0uDW7z&acr_values=SAML&state=tEBwSnZw3OFMc2M0GK8N3d7dBzjhYaNC&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=fgUaZ7vVbQZX&scope=openid+profile+email+address+phone'
2017-04-03 10:12:07,866 oic.oic:DEBUG Found 3 verify keys
2017-04-03 10:12:07,866 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'HyG8s6o3vmqTjdYEpwOSSooeyn0uDW7z', 'acr_values': 'SAML', 'state': 'tEBwSnZw3OFMc2M0GK8N3d7dBzjhYaNC', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'fgUaZ7vVbQZX', 'scope': 'openid profile email address phone'}
2017-04-03 10:12:07,872 oic.oic.provider:INFO authorization_request: {'nonce': 'HyG8s6o3vmqTjdYEpwOSSooeyn0uDW7z', 'acr_values': 'SAML', 'state': 'tEBwSnZw3OFMc2M0GK8N3d7dBzjhYaNC', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'fgUaZ7vVbQZX', 'scope': 'openid profile email address phone'}
2017-04-03 10:12:07,873 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 10:12:07,873 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 10:12:07,873 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-04-03 10:12:07,873 oic.oauth2.provider:INFO No active authentication
2017-04-03 10:12:07,873 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=HyG8s6o3vmqTjdYEpwOSSooeyn0uDW7z&acr_values=SAML&state=tEBwSnZw3OFMc2M0GK8N3d7dBzjhYaNC&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=fgUaZ7vVbQZX&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-04-03 10:12:13,806 oic.utils.authn.user:DEBUG verify(query=nonce%3DHyG8s6o3vmqTjdYEpwOSSooeyn0uDW7z%26acr_values%3DSAML%26state%3DtEBwSnZw3OFMc2M0GK8N3d7dBzjhYaNC%26redirect_uri%3D%257Bbase%257Dauthz_cb%26response_type%3Dcode%26client_id%3DfgUaZ7vVbQZX%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-04-03 10:12:13,807 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=HyG8s6o3vmqTjdYEpwOSSooeyn0uDW7z&acr_values=SAML&state=tEBwSnZw3OFMc2M0GK8N3d7dBzjhYaNC&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=fgUaZ7vVbQZX&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-04-03 10:12:13,807 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-04-03 10:12:13,810 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'HyG8s6o3vmqTjdYEpwOSSooeyn0uDW7z'], u'acr_values': [u'SAML'], u'state': [u'tEBwSnZw3OFMc2M0GK8N3d7dBzjhYaNC'], u'redirect_uri': [u'{base}authz_cb'], u'response_type': [u'code'], u'client_id': [u'fgUaZ7vVbQZX'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-04-03 10:12:13,821 oic.oauth2.provider:DEBUG Request: 'nonce=HyG8s6o3vmqTjdYEpwOSSooeyn0uDW7z&acr_values=SAML&state=tEBwSnZw3OFMc2M0GK8N3d7dBzjhYaNC&redirect_uri=%7Bbase%7Dauthz_cb&response_type=code&client_id=fgUaZ7vVbQZX&upm_answer=true&scope=openid+profile+email+address+phone'
2017-04-03 10:12:13,822 oic.oic:DEBUG Found 3 verify keys
2017-04-03 10:12:13,822 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'HyG8s6o3vmqTjdYEpwOSSooeyn0uDW7z', 'acr_values': 'SAML', 'state': 'tEBwSnZw3OFMc2M0GK8N3d7dBzjhYaNC', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'fgUaZ7vVbQZX', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-04-03 10:12:13,822 oic.oic.provider:INFO authorization_request: {'nonce': 'HyG8s6o3vmqTjdYEpwOSSooeyn0uDW7z', 'acr_values': 'SAML', 'state': 'tEBwSnZw3OFMc2M0GK8N3d7dBzjhYaNC', 'redirect_uri': '{base}authz_cb', 'response_type': 'code', 'client_id': 'fgUaZ7vVbQZX', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-04-03 10:12:13,823 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 10:12:13,823 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 10:12:13,823 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-04-03 10:12:13,823 oic.oauth2.provider:INFO No active authentication
2017-04-03 10:12:13,823 oic.oic.provider:DEBUG - authenticated -
2017-04-03 10:12:13,823 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-04-03 10:12:13,824 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['e4232957241832c7a51e12400473ac39569b2271d5a8779c2e963f74']}
2017-04-03 10:12:13,824 oic.oauth2.provider:DEBUG - in authenticated() -
2017-04-03 10:12:13,824 oic.oauth2.provider:DEBUG response type: ['code']
2017-04-03 10:12:13,824 oic.oic.provider:INFO authorization response: {'iss': 'https://localhost:8040/', 'scope': 'openid profile email address phone', 'state': 'tEBwSnZw3OFMc2M0GK8N3d7dBzjhYaNC', 'code': '<REDACTED>', 'client_id': 'fgUaZ7vVbQZX'}
2017-04-03 10:12:13,826 oic.oic.provider:DEBUG Redirected to: '{base}authz_cb?iss=https%3A%2F%2Flocalhost%3A8040%2F&scope=openid+profile+email+address+phone&state=tEBwSnZw3OFMc2M0GK8N3d7dBzjhYaNC&code=<REDACTED>&client_id=fgUaZ7vVbQZX' (<type 'unicode'>)
2017-04-03 10:12:13,831 root:DEBUG unknown side: {base}authz_cb
2017-04-03 10:15:31,162 oic.oic.provider:INFO @providerinfo_endpoint
2017-04-03 10:15:31,163 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-04-03 10:15:31,181 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-04-03 10:15:31,181 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-04-03 10:15:31,190 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1491239731, 'registration_client_uri': 'https://localhost:8040/registration?client_id=FaSVV0Uqj4bm', 'registration_access_token': 'R5bCwuBibieqOFWReF7ZqA8kylHTpO1T', 'client_salt': 'BwFWtZ3Y', 'client_id': 'FaSVV0Uqj4bm', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491326131}
2017-04-03 10:15:31,191 oic.utils.keyio:DEBUG loading keys for issuer: FaSVV0Uqj4bm
2017-04-03 10:15:31,191 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-04-03 10:15:31,191 oic.oic.provider:DEBUG found 0 keys for client_id=FaSVV0Uqj4bm
2017-04-03 10:15:31,192 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1491239731, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=FaSVV0Uqj4bm', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'R5bCwuBibieqOFWReF7ZqA8kylHTpO1T', 'response_types': [u'code'], 'client_id': 'FaSVV0Uqj4bm', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491326131}
2017-04-03 10:16:59,760 oic.oic.provider:INFO @providerinfo_endpoint
2017-04-03 10:16:59,762 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-04-03 10:16:59,780 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-04-03 10:16:59,780 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-04-03 10:16:59,790 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1491239819, 'registration_client_uri': 'https://localhost:8040/registration?client_id=EJ3CyGbhCAI9', 'registration_access_token': 'VjSfA8ICQ7LcNseDiiO7pbhvEcG5iglh', 'client_salt': 'WDYzQLld', 'client_id': 'EJ3CyGbhCAI9', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491326219}
2017-04-03 10:16:59,791 oic.utils.keyio:DEBUG loading keys for issuer: EJ3CyGbhCAI9
2017-04-03 10:16:59,791 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-04-03 10:16:59,791 oic.oic.provider:DEBUG found 0 keys for client_id=EJ3CyGbhCAI9
2017-04-03 10:16:59,792 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1491239819, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=EJ3CyGbhCAI9', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'VjSfA8ICQ7LcNseDiiO7pbhvEcG5iglh', 'response_types': [u'code'], 'client_id': 'EJ3CyGbhCAI9', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491326219}
2017-04-03 10:40:41,016 oic.oic.provider:INFO @providerinfo_endpoint
2017-04-03 10:40:41,018 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-04-03 10:40:41,036 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["{base}authz_cb"], "response_types": ["code"]}>>
2017-04-03 10:40:41,037 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-04-03 10:40:41,046 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1491241241, 'registration_client_uri': 'https://localhost:8040/registration?client_id=8ajRLrcX5s7K', 'registration_access_token': 'ZfbGEnbMJ6COY4d88K3sPxchszs3MMmP', 'client_salt': 'DUD3g1AY', 'client_id': '8ajRLrcX5s7K', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491327641}
2017-04-03 10:40:41,046 oic.utils.keyio:DEBUG loading keys for issuer: 8ajRLrcX5s7K
2017-04-03 10:40:41,046 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'{base}authz_cb'], 'response_types': [u'code']}
2017-04-03 10:40:41,046 oic.oic.provider:DEBUG found 0 keys for client_id=8ajRLrcX5s7K
2017-04-03 10:40:41,047 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1491241241, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'{base}authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=8ajRLrcX5s7K', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'ZfbGEnbMJ6COY4d88K3sPxchszs3MMmP', 'response_types': [u'code'], 'client_id': '8ajRLrcX5s7K', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491327641}
2017-04-03 10:43:25,112 oic.oic.provider:INFO @providerinfo_endpoint
2017-04-03 10:43:25,114 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-04-03 10:43:25,130 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["http://localhost/authz_cb"], "response_types": ["code"]}>>
2017-04-03 10:43:25,130 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'http://localhost/authz_cb'], 'response_types': [u'code']}
2017-04-03 10:43:25,134 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1491241405, 'registration_client_uri': 'https://localhost:8040/registration?client_id=6uoOS2sKjSxo', 'registration_access_token': 'YZJBFAYtqRKhWyCZJtYet8O8BMWn6ytQ', 'client_salt': 'GSqGfIMO', 'client_id': '6uoOS2sKjSxo', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491327805}
2017-04-03 10:43:25,135 oic.utils.keyio:DEBUG loading keys for issuer: 6uoOS2sKjSxo
2017-04-03 10:43:25,135 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'http://localhost/authz_cb'], 'response_types': [u'code']}
2017-04-03 10:43:25,135 oic.oic.provider:DEBUG found 0 keys for client_id=6uoOS2sKjSxo
2017-04-03 10:43:25,135 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1491241405, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'http://localhost/authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=6uoOS2sKjSxo', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'YZJBFAYtqRKhWyCZJtYet8O8BMWn6ytQ', 'response_types': [u'code'], 'client_id': '6uoOS2sKjSxo', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491327805}
2017-04-03 10:43:47,259 oic.oauth2.provider:DEBUG Request: 'nonce=ZPLRgbf0vaf4eVg1PTq0SHI2nQi53IMl&acr_values=SAML&state=IIf7wEhMwqrrKhA613PYo0IRnISNq4yx&redirect_uri=http%3A%2F%2Flocalhost%2Fauthz_cb&response_type=code&client_id=6uoOS2sKjSxo&scope=openid+profile+email+address+phone'
2017-04-03 10:43:47,260 oic.oic:DEBUG Found 3 verify keys
2017-04-03 10:43:47,261 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'ZPLRgbf0vaf4eVg1PTq0SHI2nQi53IMl', 'acr_values': 'SAML', 'state': 'IIf7wEhMwqrrKhA613PYo0IRnISNq4yx', 'redirect_uri': 'http://localhost/authz_cb', 'response_type': 'code', 'client_id': '6uoOS2sKjSxo', 'scope': 'openid profile email address phone'}
2017-04-03 10:43:47,266 oic.oic.provider:INFO authorization_request: {'nonce': 'ZPLRgbf0vaf4eVg1PTq0SHI2nQi53IMl', 'acr_values': 'SAML', 'state': 'IIf7wEhMwqrrKhA613PYo0IRnISNq4yx', 'redirect_uri': 'http://localhost/authz_cb', 'response_type': 'code', 'client_id': '6uoOS2sKjSxo', 'scope': 'openid profile email address phone'}
2017-04-03 10:43:47,266 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 10:43:47,266 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 10:43:47,267 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-04-03 10:43:47,267 oic.oauth2.provider:INFO No active authentication
2017-04-03 10:43:47,267 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=ZPLRgbf0vaf4eVg1PTq0SHI2nQi53IMl&acr_values=SAML&state=IIf7wEhMwqrrKhA613PYo0IRnISNq4yx&redirect_uri=http%3A%2F%2Flocalhost%2Fauthz_cb&response_type=code&client_id=6uoOS2sKjSxo&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-04-03 10:43:50,927 oic.utils.authn.user:DEBUG verify(query=nonce%3DZPLRgbf0vaf4eVg1PTq0SHI2nQi53IMl%26acr_values%3DSAML%26state%3DIIf7wEhMwqrrKhA613PYo0IRnISNq4yx%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%252Fauthz_cb%26response_type%3Dcode%26client_id%3D6uoOS2sKjSxo%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-04-03 10:43:50,927 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=ZPLRgbf0vaf4eVg1PTq0SHI2nQi53IMl&acr_values=SAML&state=IIf7wEhMwqrrKhA613PYo0IRnISNq4yx&redirect_uri=http%3A%2F%2Flocalhost%2Fauthz_cb&response_type=code&client_id=6uoOS2sKjSxo&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-04-03 10:43:50,927 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-04-03 10:43:50,931 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'ZPLRgbf0vaf4eVg1PTq0SHI2nQi53IMl'], u'acr_values': [u'SAML'], u'state': [u'IIf7wEhMwqrrKhA613PYo0IRnISNq4yx'], u'redirect_uri': [u'http://localhost/authz_cb'], u'response_type': [u'code'], u'client_id': [u'6uoOS2sKjSxo'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-04-03 10:43:50,939 oic.oauth2.provider:DEBUG Request: 'nonce=ZPLRgbf0vaf4eVg1PTq0SHI2nQi53IMl&acr_values=SAML&state=IIf7wEhMwqrrKhA613PYo0IRnISNq4yx&redirect_uri=http%3A%2F%2Flocalhost%2Fauthz_cb&response_type=code&client_id=6uoOS2sKjSxo&upm_answer=true&scope=openid+profile+email+address+phone'
2017-04-03 10:43:50,939 oic.oic:DEBUG Found 3 verify keys
2017-04-03 10:43:50,940 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'ZPLRgbf0vaf4eVg1PTq0SHI2nQi53IMl', 'acr_values': 'SAML', 'state': 'IIf7wEhMwqrrKhA613PYo0IRnISNq4yx', 'redirect_uri': 'http://localhost/authz_cb', 'response_type': 'code', 'client_id': '6uoOS2sKjSxo', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-04-03 10:43:50,940 oic.oic.provider:INFO authorization_request: {'nonce': 'ZPLRgbf0vaf4eVg1PTq0SHI2nQi53IMl', 'acr_values': 'SAML', 'state': 'IIf7wEhMwqrrKhA613PYo0IRnISNq4yx', 'redirect_uri': 'http://localhost/authz_cb', 'response_type': 'code', 'client_id': '6uoOS2sKjSxo', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-04-03 10:43:50,940 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 10:43:50,940 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 10:43:50,940 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-04-03 10:43:50,941 oic.oauth2.provider:INFO No active authentication
2017-04-03 10:43:50,941 oic.oic.provider:DEBUG - authenticated -
2017-04-03 10:43:50,941 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-04-03 10:43:50,941 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['ca51939b938de1d1cc761f8c839dce8e606d28253070d04c57bbc32c']}
2017-04-03 10:43:50,941 oic.oauth2.provider:DEBUG - in authenticated() -
2017-04-03 10:43:50,941 oic.oauth2.provider:DEBUG response type: ['code']
2017-04-03 10:43:50,942 oic.oic.provider:INFO authorization response: {'iss': 'https://localhost:8040/', 'scope': 'openid profile email address phone', 'state': 'IIf7wEhMwqrrKhA613PYo0IRnISNq4yx', 'code': '<REDACTED>', 'client_id': '6uoOS2sKjSxo'}
2017-04-03 10:43:50,944 oic.oic.provider:DEBUG Redirected to: 'http://localhost/authz_cb?iss=https%3A%2F%2Flocalhost%3A8040%2F&scope=openid+profile+email+address+phone&state=IIf7wEhMwqrrKhA613PYo0IRnISNq4yx&code=<REDACTED>&client_id=6uoOS2sKjSxo' (<type 'unicode'>)
2017-04-03 11:37:23,854 oic.oic.provider:INFO @providerinfo_endpoint
2017-04-03 11:37:23,856 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-04-03 11:37:23,879 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["http://localhost/authz_cb"], "response_types": ["code"]}>>
2017-04-03 11:37:23,879 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'http://localhost/authz_cb'], 'response_types': [u'code']}
2017-04-03 11:37:23,888 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1491244643, 'registration_client_uri': 'https://localhost:8040/registration?client_id=B5KrikvoadQw', 'registration_access_token': 'ezL23hLBlN4UqQie9nsN7unOiGNnBaFr', 'client_salt': 'aoDocqnp', 'client_id': 'B5KrikvoadQw', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491331043}
2017-04-03 11:37:23,889 oic.utils.keyio:DEBUG loading keys for issuer: B5KrikvoadQw
2017-04-03 11:37:23,889 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'http://localhost/authz_cb'], 'response_types': [u'code']}
2017-04-03 11:37:23,889 oic.oic.provider:DEBUG found 0 keys for client_id=B5KrikvoadQw
2017-04-03 11:37:23,890 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1491244643, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'http://localhost/authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=B5KrikvoadQw', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'ezL23hLBlN4UqQie9nsN7unOiGNnBaFr', 'response_types': [u'code'], 'client_id': 'B5KrikvoadQw', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491331043}
2017-04-03 11:38:21,628 oic.oic.provider:INFO @providerinfo_endpoint
2017-04-03 11:38:21,630 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-04-03 11:38:21,644 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["http://localhost/authz_cb"], "response_types": ["code"]}>>
2017-04-03 11:38:21,645 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'http://localhost/authz_cb'], 'response_types': [u'code']}
2017-04-03 11:38:21,654 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1491244701, 'registration_client_uri': 'https://localhost:8040/registration?client_id=B6Z9nz68NWcS', 'registration_access_token': 'Z9Kher11ftTnMXI6S04abjW5G2oCnxnm', 'client_salt': 'uOzf2WLM', 'client_id': 'B6Z9nz68NWcS', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491331101}
2017-04-03 11:38:21,654 oic.utils.keyio:DEBUG loading keys for issuer: B6Z9nz68NWcS
2017-04-03 11:38:21,654 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'http://localhost/authz_cb'], 'response_types': [u'code']}
2017-04-03 11:38:21,654 oic.oic.provider:DEBUG found 0 keys for client_id=B6Z9nz68NWcS
2017-04-03 11:38:21,655 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1491244701, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'http://localhost/authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=B6Z9nz68NWcS', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'Z9Kher11ftTnMXI6S04abjW5G2oCnxnm', 'response_types': [u'code'], 'client_id': 'B6Z9nz68NWcS', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491331101}
2017-04-03 11:38:32,359 oic.oauth2.provider:DEBUG Request: 'nonce=fp4MHhoGwB7YiJ5wAvlNmkzljgfmwKNh&acr_values=SAML&state=qOC9X4VDLHvPDYUpn2eKm3KN6NGRwgJ1&redirect_uri=http%3A%2F%2Flocalhost%2Fauthz_cb&response_type=code&client_id=B6Z9nz68NWcS&scope=openid+profile+email+address+phone'
2017-04-03 11:38:32,359 oic.oic:DEBUG Found 3 verify keys
2017-04-03 11:38:32,360 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'fp4MHhoGwB7YiJ5wAvlNmkzljgfmwKNh', 'acr_values': 'SAML', 'state': 'qOC9X4VDLHvPDYUpn2eKm3KN6NGRwgJ1', 'redirect_uri': 'http://localhost/authz_cb', 'response_type': 'code', 'client_id': 'B6Z9nz68NWcS', 'scope': 'openid profile email address phone'}
2017-04-03 11:38:32,366 oic.oic.provider:INFO authorization_request: {'nonce': 'fp4MHhoGwB7YiJ5wAvlNmkzljgfmwKNh', 'acr_values': 'SAML', 'state': 'qOC9X4VDLHvPDYUpn2eKm3KN6NGRwgJ1', 'redirect_uri': 'http://localhost/authz_cb', 'response_type': 'code', 'client_id': 'B6Z9nz68NWcS', 'scope': 'openid profile email address phone'}
2017-04-03 11:38:32,366 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 11:38:32,366 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 11:38:32,367 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-04-03 11:38:32,367 oic.oauth2.provider:INFO No active authentication
2017-04-03 11:38:32,367 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=fp4MHhoGwB7YiJ5wAvlNmkzljgfmwKNh&acr_values=SAML&state=qOC9X4VDLHvPDYUpn2eKm3KN6NGRwgJ1&redirect_uri=http%3A%2F%2Flocalhost%2Fauthz_cb&response_type=code&client_id=B6Z9nz68NWcS&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-04-03 11:38:36,206 oic.utils.authn.user:DEBUG verify(query=nonce%3Dfp4MHhoGwB7YiJ5wAvlNmkzljgfmwKNh%26acr_values%3DSAML%26state%3DqOC9X4VDLHvPDYUpn2eKm3KN6NGRwgJ1%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%252Fauthz_cb%26response_type%3Dcode%26client_id%3DB6Z9nz68NWcS%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-04-03 11:38:36,206 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=fp4MHhoGwB7YiJ5wAvlNmkzljgfmwKNh&acr_values=SAML&state=qOC9X4VDLHvPDYUpn2eKm3KN6NGRwgJ1&redirect_uri=http%3A%2F%2Flocalhost%2Fauthz_cb&response_type=code&client_id=B6Z9nz68NWcS&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-04-03 11:38:36,206 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-04-03 11:38:36,210 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'fp4MHhoGwB7YiJ5wAvlNmkzljgfmwKNh'], u'acr_values': [u'SAML'], u'state': [u'qOC9X4VDLHvPDYUpn2eKm3KN6NGRwgJ1'], u'redirect_uri': [u'http://localhost/authz_cb'], u'response_type': [u'code'], u'client_id': [u'B6Z9nz68NWcS'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-04-03 11:38:36,218 oic.oauth2.provider:DEBUG Request: 'nonce=fp4MHhoGwB7YiJ5wAvlNmkzljgfmwKNh&acr_values=SAML&state=qOC9X4VDLHvPDYUpn2eKm3KN6NGRwgJ1&redirect_uri=http%3A%2F%2Flocalhost%2Fauthz_cb&response_type=code&client_id=B6Z9nz68NWcS&upm_answer=true&scope=openid+profile+email+address+phone'
2017-04-03 11:38:36,218 oic.oic:DEBUG Found 3 verify keys
2017-04-03 11:38:36,219 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'fp4MHhoGwB7YiJ5wAvlNmkzljgfmwKNh', 'acr_values': 'SAML', 'state': 'qOC9X4VDLHvPDYUpn2eKm3KN6NGRwgJ1', 'redirect_uri': 'http://localhost/authz_cb', 'response_type': 'code', 'client_id': 'B6Z9nz68NWcS', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-04-03 11:38:36,219 oic.oic.provider:INFO authorization_request: {'nonce': 'fp4MHhoGwB7YiJ5wAvlNmkzljgfmwKNh', 'acr_values': 'SAML', 'state': 'qOC9X4VDLHvPDYUpn2eKm3KN6NGRwgJ1', 'redirect_uri': 'http://localhost/authz_cb', 'response_type': 'code', 'client_id': 'B6Z9nz68NWcS', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-04-03 11:38:36,219 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 11:38:36,219 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 11:38:36,220 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-04-03 11:38:36,220 oic.oauth2.provider:INFO No active authentication
2017-04-03 11:38:36,220 oic.oic.provider:DEBUG - authenticated -
2017-04-03 11:38:36,220 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-04-03 11:38:36,220 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['eb493e9c0bbab97656b63038f5a7d0ce55c0873e6b52b1bba90d52a5']}
2017-04-03 11:38:36,220 oic.oauth2.provider:DEBUG - in authenticated() -
2017-04-03 11:38:36,220 oic.oauth2.provider:DEBUG response type: ['code']
2017-04-03 11:38:36,221 oic.oic.provider:INFO authorization response: {'iss': 'https://localhost:8040/', 'scope': 'openid profile email address phone', 'state': 'qOC9X4VDLHvPDYUpn2eKm3KN6NGRwgJ1', 'code': '<REDACTED>', 'client_id': 'B6Z9nz68NWcS'}
2017-04-03 11:38:36,222 oic.oic.provider:DEBUG Redirected to: 'http://localhost/authz_cb?iss=https%3A%2F%2Flocalhost%3A8040%2F&scope=openid+profile+email+address+phone&state=qOC9X4VDLHvPDYUpn2eKm3KN6NGRwgJ1&code=<REDACTED>&client_id=B6Z9nz68NWcS' (<type 'unicode'>)
2017-04-03 11:40:10,585 oic.oic.provider:INFO @providerinfo_endpoint
2017-04-03 11:40:10,587 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-04-03 11:40:10,604 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["http://localhost:8040/authz_cb"], "response_types": ["code"]}>>
2017-04-03 11:40:10,604 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'http://localhost:8040/authz_cb'], 'response_types': [u'code']}
2017-04-03 11:40:10,608 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1491244810, 'registration_client_uri': 'https://localhost:8040/registration?client_id=rHULVtfOe6ra', 'registration_access_token': 'Ke09lSWg0cMQ8ildkikZSLPju9d1DqgF', 'client_salt': 'UKz5mNV3', 'client_id': 'rHULVtfOe6ra', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491331210}
2017-04-03 11:40:10,608 oic.utils.keyio:DEBUG loading keys for issuer: rHULVtfOe6ra
2017-04-03 11:40:10,608 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'http://localhost:8040/authz_cb'], 'response_types': [u'code']}
2017-04-03 11:40:10,608 oic.oic.provider:DEBUG found 0 keys for client_id=rHULVtfOe6ra
2017-04-03 11:40:10,609 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1491244810, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'http://localhost:8040/authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=rHULVtfOe6ra', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'Ke09lSWg0cMQ8ildkikZSLPju9d1DqgF', 'response_types': [u'code'], 'client_id': 'rHULVtfOe6ra', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491331210}
2017-04-03 11:40:17,480 oic.oauth2.provider:DEBUG Request: 'nonce=3bvflY8Xw0VG4iWxsUj9nFV99bd5bVEo&acr_values=SAML&state=GLPtqBT3F1jK1y0tHbqJqyA5X2d19Nid&redirect_uri=http%3A%2F%2Flocalhost%3A8040%2Fauthz_cb&response_type=code&client_id=rHULVtfOe6ra&scope=openid+profile+email+address+phone'
2017-04-03 11:40:17,480 oic.oic:DEBUG Found 3 verify keys
2017-04-03 11:40:17,480 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': '3bvflY8Xw0VG4iWxsUj9nFV99bd5bVEo', 'acr_values': 'SAML', 'state': 'GLPtqBT3F1jK1y0tHbqJqyA5X2d19Nid', 'redirect_uri': 'http://localhost:8040/authz_cb', 'response_type': 'code', 'client_id': 'rHULVtfOe6ra', 'scope': 'openid profile email address phone'}
2017-04-03 11:40:17,486 oic.oic.provider:INFO authorization_request: {'nonce': '3bvflY8Xw0VG4iWxsUj9nFV99bd5bVEo', 'acr_values': 'SAML', 'state': 'GLPtqBT3F1jK1y0tHbqJqyA5X2d19Nid', 'redirect_uri': 'http://localhost:8040/authz_cb', 'response_type': 'code', 'client_id': 'rHULVtfOe6ra', 'scope': 'openid profile email address phone'}
2017-04-03 11:40:17,487 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 11:40:17,487 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 11:40:17,487 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-04-03 11:40:17,487 oic.oauth2.provider:INFO No active authentication
2017-04-03 11:40:17,487 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=3bvflY8Xw0VG4iWxsUj9nFV99bd5bVEo&acr_values=SAML&state=GLPtqBT3F1jK1y0tHbqJqyA5X2d19Nid&redirect_uri=http%3A%2F%2Flocalhost%3A8040%2Fauthz_cb&response_type=code&client_id=rHULVtfOe6ra&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-04-03 11:40:20,276 oic.utils.authn.user:DEBUG verify(query=nonce%3D3bvflY8Xw0VG4iWxsUj9nFV99bd5bVEo%26acr_values%3DSAML%26state%3DGLPtqBT3F1jK1y0tHbqJqyA5X2d19Nid%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A8040%252Fauthz_cb%26response_type%3Dcode%26client_id%3DrHULVtfOe6ra%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-04-03 11:40:20,276 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=3bvflY8Xw0VG4iWxsUj9nFV99bd5bVEo&acr_values=SAML&state=GLPtqBT3F1jK1y0tHbqJqyA5X2d19Nid&redirect_uri=http%3A%2F%2Flocalhost%3A8040%2Fauthz_cb&response_type=code&client_id=rHULVtfOe6ra&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-04-03 11:40:20,276 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-04-03 11:40:20,280 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'3bvflY8Xw0VG4iWxsUj9nFV99bd5bVEo'], u'acr_values': [u'SAML'], u'state': [u'GLPtqBT3F1jK1y0tHbqJqyA5X2d19Nid'], u'redirect_uri': [u'http://localhost:8040/authz_cb'], u'response_type': [u'code'], u'client_id': [u'rHULVtfOe6ra'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-04-03 11:40:20,287 oic.oauth2.provider:DEBUG Request: 'nonce=3bvflY8Xw0VG4iWxsUj9nFV99bd5bVEo&acr_values=SAML&state=GLPtqBT3F1jK1y0tHbqJqyA5X2d19Nid&redirect_uri=http%3A%2F%2Flocalhost%3A8040%2Fauthz_cb&response_type=code&client_id=rHULVtfOe6ra&upm_answer=true&scope=openid+profile+email+address+phone'
2017-04-03 11:40:20,287 oic.oic:DEBUG Found 3 verify keys
2017-04-03 11:40:20,288 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': '3bvflY8Xw0VG4iWxsUj9nFV99bd5bVEo', 'acr_values': 'SAML', 'state': 'GLPtqBT3F1jK1y0tHbqJqyA5X2d19Nid', 'redirect_uri': 'http://localhost:8040/authz_cb', 'response_type': 'code', 'client_id': 'rHULVtfOe6ra', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-04-03 11:40:20,288 oic.oic.provider:INFO authorization_request: {'nonce': '3bvflY8Xw0VG4iWxsUj9nFV99bd5bVEo', 'acr_values': 'SAML', 'state': 'GLPtqBT3F1jK1y0tHbqJqyA5X2d19Nid', 'redirect_uri': 'http://localhost:8040/authz_cb', 'response_type': 'code', 'client_id': 'rHULVtfOe6ra', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-04-03 11:40:20,289 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 11:40:20,289 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 11:40:20,289 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-04-03 11:40:20,289 oic.oauth2.provider:INFO No active authentication
2017-04-03 11:40:20,289 oic.oic.provider:DEBUG - authenticated -
2017-04-03 11:40:20,289 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-04-03 11:40:20,290 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['e2550333449c6f167741ee753052998861a346d544203be8f7e3632f']}
2017-04-03 11:40:20,290 oic.oauth2.provider:DEBUG - in authenticated() -
2017-04-03 11:40:20,290 oic.oauth2.provider:DEBUG response type: ['code']
2017-04-03 11:40:20,290 oic.oic.provider:INFO authorization response: {'iss': 'https://localhost:8040/', 'scope': 'openid profile email address phone', 'state': 'GLPtqBT3F1jK1y0tHbqJqyA5X2d19Nid', 'code': '<REDACTED>', 'client_id': 'rHULVtfOe6ra'}
2017-04-03 11:40:20,292 oic.oic.provider:DEBUG Redirected to: 'http://localhost:8040/authz_cb?iss=https%3A%2F%2Flocalhost%3A8040%2F&scope=openid+profile+email+address+phone&state=GLPtqBT3F1jK1y0tHbqJqyA5X2d19Nid&code=<REDACTED>&client_id=rHULVtfOe6ra' (<type 'unicode'>)
2017-04-03 11:41:00,671 oic.oic.provider:INFO @providerinfo_endpoint
2017-04-03 11:41:00,673 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-04-03 11:41:00,690 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["https://localhost:8040/authz_cb"], "response_types": ["code"]}>>
2017-04-03 11:41:00,691 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'https://localhost:8040/authz_cb'], 'response_types': [u'code']}
2017-04-03 11:41:00,694 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1491244860, 'registration_client_uri': 'https://localhost:8040/registration?client_id=uLzyY9bFbkBP', 'registration_access_token': 'uLKxezf3nCIU8AXpWPJLmRpaQKmjFl4c', 'client_salt': 'ti6H6LCI', 'client_id': 'uLzyY9bFbkBP', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491331260}
2017-04-03 11:41:00,695 oic.utils.keyio:DEBUG loading keys for issuer: uLzyY9bFbkBP
2017-04-03 11:41:00,695 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'https://localhost:8040/authz_cb'], 'response_types': [u'code']}
2017-04-03 11:41:00,695 oic.oic.provider:DEBUG found 0 keys for client_id=uLzyY9bFbkBP
2017-04-03 11:41:00,696 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1491244860, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'https://localhost:8040/authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=uLzyY9bFbkBP', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'uLKxezf3nCIU8AXpWPJLmRpaQKmjFl4c', 'response_types': [u'code'], 'client_id': 'uLzyY9bFbkBP', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491331260}
2017-04-03 11:41:05,905 oic.oauth2.provider:DEBUG Request: 'nonce=VH40jeQ39TCZFUDLc71MmWGNCrNwv3Fd&acr_values=SAML&state=xhoZ3hunlC00SjV4Sny4Yw6hwRD34Yt2&redirect_uri=https%3A%2F%2Flocalhost%3A8040%2Fauthz_cb&response_type=code&client_id=uLzyY9bFbkBP&scope=openid+profile+email+address+phone'
2017-04-03 11:41:05,905 oic.oic:DEBUG Found 3 verify keys
2017-04-03 11:41:05,906 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'VH40jeQ39TCZFUDLc71MmWGNCrNwv3Fd', 'acr_values': 'SAML', 'state': 'xhoZ3hunlC00SjV4Sny4Yw6hwRD34Yt2', 'redirect_uri': 'https://localhost:8040/authz_cb', 'response_type': 'code', 'client_id': 'uLzyY9bFbkBP', 'scope': 'openid profile email address phone'}
2017-04-03 11:41:05,912 oic.oic.provider:INFO authorization_request: {'nonce': 'VH40jeQ39TCZFUDLc71MmWGNCrNwv3Fd', 'acr_values': 'SAML', 'state': 'xhoZ3hunlC00SjV4Sny4Yw6hwRD34Yt2', 'redirect_uri': 'https://localhost:8040/authz_cb', 'response_type': 'code', 'client_id': 'uLzyY9bFbkBP', 'scope': 'openid profile email address phone'}
2017-04-03 11:41:05,912 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 11:41:05,912 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 11:41:05,912 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-04-03 11:41:05,913 oic.oauth2.provider:INFO No active authentication
2017-04-03 11:41:05,913 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=VH40jeQ39TCZFUDLc71MmWGNCrNwv3Fd&acr_values=SAML&state=xhoZ3hunlC00SjV4Sny4Yw6hwRD34Yt2&redirect_uri=https%3A%2F%2Flocalhost%3A8040%2Fauthz_cb&response_type=code&client_id=uLzyY9bFbkBP&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-04-03 11:41:08,516 oic.utils.authn.user:DEBUG verify(query=nonce%3DVH40jeQ39TCZFUDLc71MmWGNCrNwv3Fd%26acr_values%3DSAML%26state%3DxhoZ3hunlC00SjV4Sny4Yw6hwRD34Yt2%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%253A8040%252Fauthz_cb%26response_type%3Dcode%26client_id%3DuLzyY9bFbkBP%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-04-03 11:41:08,516 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=VH40jeQ39TCZFUDLc71MmWGNCrNwv3Fd&acr_values=SAML&state=xhoZ3hunlC00SjV4Sny4Yw6hwRD34Yt2&redirect_uri=https%3A%2F%2Flocalhost%3A8040%2Fauthz_cb&response_type=code&client_id=uLzyY9bFbkBP&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-04-03 11:41:08,516 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-04-03 11:41:08,520 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'VH40jeQ39TCZFUDLc71MmWGNCrNwv3Fd'], u'acr_values': [u'SAML'], u'state': [u'xhoZ3hunlC00SjV4Sny4Yw6hwRD34Yt2'], u'redirect_uri': [u'https://localhost:8040/authz_cb'], u'response_type': [u'code'], u'client_id': [u'uLzyY9bFbkBP'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-04-03 11:41:08,527 oic.oauth2.provider:DEBUG Request: 'nonce=VH40jeQ39TCZFUDLc71MmWGNCrNwv3Fd&acr_values=SAML&state=xhoZ3hunlC00SjV4Sny4Yw6hwRD34Yt2&redirect_uri=https%3A%2F%2Flocalhost%3A8040%2Fauthz_cb&response_type=code&client_id=uLzyY9bFbkBP&upm_answer=true&scope=openid+profile+email+address+phone'
2017-04-03 11:41:08,527 oic.oic:DEBUG Found 3 verify keys
2017-04-03 11:41:08,528 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'VH40jeQ39TCZFUDLc71MmWGNCrNwv3Fd', 'acr_values': 'SAML', 'state': 'xhoZ3hunlC00SjV4Sny4Yw6hwRD34Yt2', 'redirect_uri': 'https://localhost:8040/authz_cb', 'response_type': 'code', 'client_id': 'uLzyY9bFbkBP', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-04-03 11:41:08,528 oic.oic.provider:INFO authorization_request: {'nonce': 'VH40jeQ39TCZFUDLc71MmWGNCrNwv3Fd', 'acr_values': 'SAML', 'state': 'xhoZ3hunlC00SjV4Sny4Yw6hwRD34Yt2', 'redirect_uri': 'https://localhost:8040/authz_cb', 'response_type': 'code', 'client_id': 'uLzyY9bFbkBP', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-04-03 11:41:08,528 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 11:41:08,529 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 11:41:08,529 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-04-03 11:41:08,529 oic.oauth2.provider:INFO No active authentication
2017-04-03 11:41:08,529 oic.oic.provider:DEBUG - authenticated -
2017-04-03 11:41:08,529 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-04-03 11:41:08,529 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['925da0550cd9e8deb3f36a49101a3143d5e4170c743962b0ea59a811']}
2017-04-03 11:41:08,529 oic.oauth2.provider:DEBUG - in authenticated() -
2017-04-03 11:41:08,530 oic.oauth2.provider:DEBUG response type: ['code']
2017-04-03 11:41:08,530 oic.oic.provider:INFO authorization response: {'iss': 'https://localhost:8040/', 'scope': 'openid profile email address phone', 'state': 'xhoZ3hunlC00SjV4Sny4Yw6hwRD34Yt2', 'code': '<REDACTED>', 'client_id': 'uLzyY9bFbkBP'}
2017-04-03 11:41:08,532 oic.oic.provider:DEBUG Redirected to: 'https://localhost:8040/authz_cb?iss=https%3A%2F%2Flocalhost%3A8040%2F&scope=openid+profile+email+address+phone&state=xhoZ3hunlC00SjV4Sny4Yw6hwRD34Yt2&code=<REDACTED>&client_id=uLzyY9bFbkBP' (<type 'unicode'>)
2017-04-03 11:41:08,536 root:DEBUG unknown side: authz_cb
2017-04-03 11:42:59,277 oic.oic.provider:INFO @providerinfo_endpoint
2017-04-03 11:42:59,279 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-04-03 11:42:59,296 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["http://localhost:8040/authz_cb"], "response_types": ["code"]}>>
2017-04-03 11:42:59,297 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'http://localhost:8040/authz_cb'], 'response_types': [u'code']}
2017-04-03 11:42:59,301 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1491244979, 'registration_client_uri': 'https://localhost:8040/registration?client_id=GkZm5BGIxAEH', 'registration_access_token': 'Nj9saJE0XQpfTsdEavvgS3Tsk709mwzY', 'client_salt': '7AvIkRJK', 'client_id': 'GkZm5BGIxAEH', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491331379}
2017-04-03 11:42:59,301 oic.utils.keyio:DEBUG loading keys for issuer: GkZm5BGIxAEH
2017-04-03 11:42:59,301 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'http://localhost:8040/authz_cb'], 'response_types': [u'code']}
2017-04-03 11:42:59,301 oic.oic.provider:DEBUG found 0 keys for client_id=GkZm5BGIxAEH
2017-04-03 11:42:59,302 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1491244979, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'http://localhost:8040/authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=GkZm5BGIxAEH', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'Nj9saJE0XQpfTsdEavvgS3Tsk709mwzY', 'response_types': [u'code'], 'client_id': 'GkZm5BGIxAEH', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491331379}
2017-04-03 11:43:04,156 oic.oauth2.provider:DEBUG Request: 'nonce=PEyKdZkZA7J5e8QlAkr22w2UTms8krYr&acr_values=SAML&state=LQaOJ1hPJQk6VEGYUFrT1BZtR491oQl3&redirect_uri=http%3A%2F%2Flocalhost%3A8040%2Fauthz_cb&response_type=code&client_id=GkZm5BGIxAEH&scope=openid+profile+email+address+phone'
2017-04-03 11:43:04,156 oic.oic:DEBUG Found 3 verify keys
2017-04-03 11:43:04,156 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'PEyKdZkZA7J5e8QlAkr22w2UTms8krYr', 'acr_values': 'SAML', 'state': 'LQaOJ1hPJQk6VEGYUFrT1BZtR491oQl3', 'redirect_uri': 'http://localhost:8040/authz_cb', 'response_type': 'code', 'client_id': 'GkZm5BGIxAEH', 'scope': 'openid profile email address phone'}
2017-04-03 11:43:04,162 oic.oic.provider:INFO authorization_request: {'nonce': 'PEyKdZkZA7J5e8QlAkr22w2UTms8krYr', 'acr_values': 'SAML', 'state': 'LQaOJ1hPJQk6VEGYUFrT1BZtR491oQl3', 'redirect_uri': 'http://localhost:8040/authz_cb', 'response_type': 'code', 'client_id': 'GkZm5BGIxAEH', 'scope': 'openid profile email address phone'}
2017-04-03 11:43:04,163 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 11:43:04,163 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 11:43:04,163 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-04-03 11:43:04,163 oic.oauth2.provider:INFO No active authentication
2017-04-03 11:43:04,163 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=PEyKdZkZA7J5e8QlAkr22w2UTms8krYr&acr_values=SAML&state=LQaOJ1hPJQk6VEGYUFrT1BZtR491oQl3&redirect_uri=http%3A%2F%2Flocalhost%3A8040%2Fauthz_cb&response_type=code&client_id=GkZm5BGIxAEH&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-04-03 11:43:06,994 oic.utils.authn.user:DEBUG verify(query=nonce%3DPEyKdZkZA7J5e8QlAkr22w2UTms8krYr%26acr_values%3DSAML%26state%3DLQaOJ1hPJQk6VEGYUFrT1BZtR491oQl3%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A8040%252Fauthz_cb%26response_type%3Dcode%26client_id%3DGkZm5BGIxAEH%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-04-03 11:43:06,994 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=PEyKdZkZA7J5e8QlAkr22w2UTms8krYr&acr_values=SAML&state=LQaOJ1hPJQk6VEGYUFrT1BZtR491oQl3&redirect_uri=http%3A%2F%2Flocalhost%3A8040%2Fauthz_cb&response_type=code&client_id=GkZm5BGIxAEH&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-04-03 11:43:06,994 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-04-03 11:43:06,998 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'PEyKdZkZA7J5e8QlAkr22w2UTms8krYr'], u'acr_values': [u'SAML'], u'state': [u'LQaOJ1hPJQk6VEGYUFrT1BZtR491oQl3'], u'redirect_uri': [u'http://localhost:8040/authz_cb'], u'response_type': [u'code'], u'client_id': [u'GkZm5BGIxAEH'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-04-03 11:43:07,005 oic.oauth2.provider:DEBUG Request: 'nonce=PEyKdZkZA7J5e8QlAkr22w2UTms8krYr&acr_values=SAML&state=LQaOJ1hPJQk6VEGYUFrT1BZtR491oQl3&redirect_uri=http%3A%2F%2Flocalhost%3A8040%2Fauthz_cb&response_type=code&client_id=GkZm5BGIxAEH&upm_answer=true&scope=openid+profile+email+address+phone'
2017-04-03 11:43:07,005 oic.oic:DEBUG Found 3 verify keys
2017-04-03 11:43:07,006 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'PEyKdZkZA7J5e8QlAkr22w2UTms8krYr', 'acr_values': 'SAML', 'state': 'LQaOJ1hPJQk6VEGYUFrT1BZtR491oQl3', 'redirect_uri': 'http://localhost:8040/authz_cb', 'response_type': 'code', 'client_id': 'GkZm5BGIxAEH', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-04-03 11:43:07,006 oic.oic.provider:INFO authorization_request: {'nonce': 'PEyKdZkZA7J5e8QlAkr22w2UTms8krYr', 'acr_values': 'SAML', 'state': 'LQaOJ1hPJQk6VEGYUFrT1BZtR491oQl3', 'redirect_uri': 'http://localhost:8040/authz_cb', 'response_type': 'code', 'client_id': 'GkZm5BGIxAEH', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-04-03 11:43:07,007 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 11:43:07,007 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-03 11:43:07,007 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-04-03 11:43:07,007 oic.oauth2.provider:INFO No active authentication
2017-04-03 11:43:07,007 oic.oic.provider:DEBUG - authenticated -
2017-04-03 11:43:07,007 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-04-03 11:43:07,008 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['d9151333c448a4cb45bc72896cceff1127159c65648079f41ae48a6c']}
2017-04-03 11:43:07,008 oic.oauth2.provider:DEBUG - in authenticated() -
2017-04-03 11:43:07,008 oic.oauth2.provider:DEBUG response type: ['code']
2017-04-03 11:43:07,008 oic.oic.provider:INFO authorization response: {'iss': 'https://localhost:8040/', 'scope': 'openid profile email address phone', 'state': 'LQaOJ1hPJQk6VEGYUFrT1BZtR491oQl3', 'code': '<REDACTED>', 'client_id': 'GkZm5BGIxAEH'}
2017-04-03 11:43:07,010 oic.oic.provider:DEBUG Redirected to: 'http://localhost:8040/authz_cb?iss=https%3A%2F%2Flocalhost%3A8040%2F&scope=openid+profile+email+address+phone&state=LQaOJ1hPJQk6VEGYUFrT1BZtR491oQl3&code=<REDACTED>&client_id=GkZm5BGIxAEH' (<type 'unicode'>)
2017-04-03 14:26:36,609 oic.oic.provider:INFO @providerinfo_endpoint
2017-04-03 14:26:36,610 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-04-03 14:26:36,650 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["http://localhost:8040/authz_cb"], "response_types": ["code"]}>>
2017-04-03 14:26:36,651 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'http://localhost:8040/authz_cb'], 'response_types': [u'code']}
2017-04-03 14:26:36,654 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1491254796, 'registration_client_uri': 'https://localhost:8040/registration?client_id=rnGYkAJiJdVu', 'registration_access_token': '31GxXcCZFJQeLMzZCl5MS0wBiUkT9SHS', 'client_salt': 'UAYv2lec', 'client_id': 'rnGYkAJiJdVu', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491341196}
2017-04-03 14:26:36,654 oic.utils.keyio:DEBUG loading keys for issuer: rnGYkAJiJdVu
2017-04-03 14:26:36,654 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'http://localhost:8040/authz_cb'], 'response_types': [u'code']}
2017-04-03 14:26:36,654 oic.oic.provider:DEBUG found 0 keys for client_id=rnGYkAJiJdVu
2017-04-03 14:26:36,654 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1491254796, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'http://localhost:8040/authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=rnGYkAJiJdVu', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': '31GxXcCZFJQeLMzZCl5MS0wBiUkT9SHS', 'response_types': [u'code'], 'client_id': 'rnGYkAJiJdVu', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491341196}
2017-04-04 11:01:45,396 oic.oic.provider:INFO @providerinfo_endpoint
2017-04-04 11:01:45,398 oic.oic.provider:INFO provider_info_response: {'claims_supported': ['profile', 'family_name', 'phone_number', 'email_verified', 'middle_name', 'name', 'phone_number_verified', 'picture', 'locale', 'gender', 'zoneinfo', 'preferred_username', 'updated_at', 'birthdate', 'website', 'given_name', 'address', 'nickname', 'email', 'sub'], 'subject_types_supported': ['public', 'pairwise'], 'request_parameter_supported': True, 'userinfo_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'acr_values_supported': ['PASSWORD'], 'issuer': 'https://localhost:8040/', 'id_token_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'require_request_uri_registration': True, 'grant_types_supported': ['authorization_code', 'implicit', 'urn:ietf:params:oauth:grant-type:jwt-bearer'], 'token_endpoint': 'https://localhost:8040/token', 'request_uri_parameter_supported': True, 'version': '3.0', 'registration_endpoint': 'https://localhost:8040/registration', 'response_modes_supported': ['query', 'fragment', 'form_post'], 'jwks_uri': 'https://localhost:8040/static/jwks.json', 'userinfo_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'scopes_supported': ['profile', 'openid', 'offline_access', 'phone', 'address', 'email', 'openid'], 'token_endpoint_auth_methods_supported': ['client_secret_post', 'client_secret_basic', 'client_secret_jwt', 'private_key_jwt'], 'userinfo_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'id_token_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_enc_values_supported': ['A128CBC-HS256', 'A192CBC-HS384', 'A256CBC-HS512', 'A128GCM', 'A192GCM', 'A256GCM'], 'claims_parameter_supported': True, 'end_session_endpoint': 'https://localhost:8040/end_session', 'token_endpoint_auth_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512'], 'userinfo_endpoint': 'https://localhost:8040/userinfo', 'request_object_signing_alg_values_supported': ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'PS256', 'PS384', 'PS512', 'none'], 'request_object_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'response_types_supported': ['code', 'token', 'id_token', 'code token', 'code id_token', 'id_token token', 'code token id_token', 'none'], 'id_token_encryption_alg_values_supported': ['RSA1_5', 'RSA-OAEP', 'A128KW', 'A192KW', 'A256KW', 'ECDH-ES', 'ECDH-ES+A128KW', 'ECDH-ES+A192KW', 'ECDH-ES+A256KW'], 'authorization_endpoint': 'https://localhost:8040/authorization', 'claim_types_supported': ['normal', 'aggregated', 'distributed']}
2017-04-04 11:01:45,441 oic.oic.provider:DEBUG @registration_endpoint: <<{"request_uris": ["requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22"], "contacts": ["ops@example.com"], "application_type": "web", "post_logout_redirect_uris": ["{base}logout_success"], "redirect_uris": ["http://localhost:8040/authz_cb"], "response_types": ["code"]}>>
2017-04-04 11:01:45,441 oic.oic.provider:INFO registration_request:{'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'http://localhost:8040/authz_cb'], 'response_types': [u'code']}
2017-04-04 11:01:45,447 oic.oic.provider:DEBUG _cinfo: {'client_id_issued_at': 1491328905, 'registration_client_uri': 'https://localhost:8040/registration?client_id=LzpNQBu9ad3d', 'registration_access_token': 'RJpUg3KolqlSDFfhR5ZppsHA0S7qOU4Y', 'client_salt': 'DEG579n3', 'client_id': 'LzpNQBu9ad3d', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491415305}
2017-04-04 11:01:45,448 oic.utils.keyio:DEBUG loading keys for issuer: LzpNQBu9ad3d
2017-04-04 11:01:45,448 oic.utils.keyio:DEBUG pcr: {'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'post_logout_redirect_uris': [u'{base}logout_success'], 'redirect_uris': [u'http://localhost:8040/authz_cb'], 'response_types': [u'code']}
2017-04-04 11:01:45,448 oic.oic.provider:DEBUG found 0 keys for client_id=LzpNQBu9ad3d
2017-04-04 11:01:45,449 oic.oic.provider:INFO registration_response: {'client_id_issued_at': 1491328905, 'request_uris': [u'requests/ba5f0b94d3cbd568ede198420b0f16433af8eab75a536b74d40c6f4d5c364a22'], 'redirect_uris': [u'http://localhost:8040/authz_cb'], 'contacts': [u'ops@example.com'], 'application_type': u'web', 'registration_client_uri': 'https://localhost:8040/registration?client_id=LzpNQBu9ad3d', 'post_logout_redirect_uris': [u'{base}logout_success'], 'registration_access_token': 'RJpUg3KolqlSDFfhR5ZppsHA0S7qOU4Y', 'response_types': [u'code'], 'client_id': 'LzpNQBu9ad3d', 'client_secret': '<REDACTED>', 'client_secret_expires_at': 1491415305}
2017-04-04 11:01:56,935 oic.oauth2.provider:DEBUG Request: 'nonce=KM3Mp5jhL2hOrKbyDc5XIdhH5Abz2Bsb&acr_values=SAML&state=nJDTr4FFIb1zLGdpXxtwgouG6pTi3XQ9&redirect_uri=http%3A%2F%2Flocalhost%3A8040%2Fauthz_cb&response_type=code&client_id=LzpNQBu9ad3d&scope=openid+profile+email+address+phone'
2017-04-04 11:01:56,935 oic.oic:DEBUG Found 3 verify keys
2017-04-04 11:01:56,936 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'KM3Mp5jhL2hOrKbyDc5XIdhH5Abz2Bsb', 'acr_values': 'SAML', 'state': 'nJDTr4FFIb1zLGdpXxtwgouG6pTi3XQ9', 'redirect_uri': 'http://localhost:8040/authz_cb', 'response_type': 'code', 'client_id': 'LzpNQBu9ad3d', 'scope': 'openid profile email address phone'}
2017-04-04 11:01:56,936 oic.oic.provider:INFO authorization_request: {'nonce': 'KM3Mp5jhL2hOrKbyDc5XIdhH5Abz2Bsb', 'acr_values': 'SAML', 'state': 'nJDTr4FFIb1zLGdpXxtwgouG6pTi3XQ9', 'redirect_uri': 'http://localhost:8040/authz_cb', 'response_type': 'code', 'client_id': 'LzpNQBu9ad3d', 'scope': 'openid profile email address phone'}
2017-04-04 11:01:56,936 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-04 11:01:56,936 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-04 11:01:56,936 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-04-04 11:01:56,937 oic.oauth2.provider:INFO No active authentication
2017-04-04 11:01:56,937 oic.utils.authn.user:INFO do_authentication argv: {'logo_uri': '', 'submit_text': 'Submit', 'policy_uri': '', 'title': 'User log in', 'login_title': 'Username', 'acr': ['SAML'], 'passwd_title': 'Password', 'tos_uri': '', 'action': 'https://localhost:8040/verify', 'query': 'nonce=KM3Mp5jhL2hOrKbyDc5XIdhH5Abz2Bsb&acr_values=SAML&state=nJDTr4FFIb1zLGdpXxtwgouG6pTi3XQ9&redirect_uri=http%3A%2F%2Flocalhost%3A8040%2Fauthz_cb&response_type=code&client_id=LzpNQBu9ad3d&scope=openid+profile+email+address+phone', 'login': '', 'password': '<REDACTED>', 'client_policy_title': 'Client Policy'}
2017-04-04 11:02:02,649 oic.utils.authn.user:DEBUG verify(query=nonce%3DKM3Mp5jhL2hOrKbyDc5XIdhH5Abz2Bsb%26acr_values%3DSAML%26state%3DnJDTr4FFIb1zLGdpXxtwgouG6pTi3XQ9%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A8040%252Fauthz_cb%26response_type%3Dcode%26client_id%3DLzpNQBu9ad3d%26scope%3Dopenid%2Bprofile%2Bemail%2Baddress%2Bphone&acr_values=%5B%27SAML%27%5D&login=user1&password=<REDACTED>&form.commit=Submit)
2017-04-04 11:02:02,649 oic.utils.authn.user:DEBUG dict: {u'query': u'nonce=KM3Mp5jhL2hOrKbyDc5XIdhH5Abz2Bsb&acr_values=SAML&state=nJDTr4FFIb1zLGdpXxtwgouG6pTi3XQ9&redirect_uri=http%3A%2F%2Flocalhost%3A8040%2Fauthz_cb&response_type=code&client_id=LzpNQBu9ad3d&scope=openid+profile+email+address+phone', u'login': u'user1', u'password': '<REDACTED>', u'form.commit': u'Submit', u'acr_values': u"['SAML']"}
2017-04-04 11:02:02,649 oic.utils.authn.user:DEBUG Password verification succeeded.
2017-04-04 11:02:02,653 oic.utils.authn.user:DEBUG kwargs: {u'nonce': [u'KM3Mp5jhL2hOrKbyDc5XIdhH5Abz2Bsb'], u'acr_values': [u'SAML'], u'state': [u'nJDTr4FFIb1zLGdpXxtwgouG6pTi3XQ9'], u'redirect_uri': [u'http://localhost:8040/authz_cb'], u'response_type': [u'code'], u'client_id': [u'LzpNQBu9ad3d'], 'upm_answer': 'true', u'scope': [u'openid profile email address phone']}
2017-04-04 11:02:02,660 oic.oauth2.provider:DEBUG Request: 'nonce=KM3Mp5jhL2hOrKbyDc5XIdhH5Abz2Bsb&acr_values=SAML&state=nJDTr4FFIb1zLGdpXxtwgouG6pTi3XQ9&redirect_uri=http%3A%2F%2Flocalhost%3A8040%2Fauthz_cb&response_type=code&client_id=LzpNQBu9ad3d&upm_answer=true&scope=openid+profile+email+address+phone'
2017-04-04 11:02:02,660 oic.oic:DEBUG Found 3 verify keys
2017-04-04 11:02:02,661 oic.oauth2.provider:DEBUG AuthzRequest: {'nonce': 'KM3Mp5jhL2hOrKbyDc5XIdhH5Abz2Bsb', 'acr_values': 'SAML', 'state': 'nJDTr4FFIb1zLGdpXxtwgouG6pTi3XQ9', 'redirect_uri': 'http://localhost:8040/authz_cb', 'response_type': 'code', 'client_id': 'LzpNQBu9ad3d', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-04-04 11:02:02,661 oic.oic.provider:INFO authorization_request: {'nonce': 'KM3Mp5jhL2hOrKbyDc5XIdhH5Abz2Bsb', 'acr_values': 'SAML', 'state': 'nJDTr4FFIb1zLGdpXxtwgouG6pTi3XQ9', 'redirect_uri': 'http://localhost:8040/authz_cb', 'response_type': 'code', 'client_id': 'LzpNQBu9ad3d', 'upm_answer': 'true', 'scope': 'openid profile email address phone'}
2017-04-04 11:02:02,661 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-04 11:02:02,661 oic.oic.provider:DEBUG Picked AuthN broker for ACR SAML: []
2017-04-04 11:02:02,662 oic.utils.authn.user:DEBUG kwargs: {'max_age': 0, 'authorization': '<REDACTED>'}
2017-04-04 11:02:02,662 oic.oauth2.provider:INFO No active authentication
2017-04-04 11:02:02,662 oic.oic.provider:DEBUG - authenticated -
2017-04-04 11:02:02,662 oic.oic.provider:DEBUG AREQ keys: ['nonce', 'acr_values', 'state', 'redirect_uri', 'response_type', 'client_id', 'upm_answer', 'scope']
2017-04-04 11:02:02,662 oic.utils.sdb:DEBUG uid2sid: {u'user1': ['980991427003eccb5f24ee0567b756cee8de331e06afdd02530ba857']}
2017-04-04 11:02:02,662 oic.oauth2.provider:DEBUG - in authenticated() -
2017-04-04 11:02:02,662 oic.oauth2.provider:DEBUG response type: ['code']
2017-04-04 11:02:02,663 oic.oic.provider:INFO authorization response: {'iss': 'https://localhost:8040/', 'scope': 'openid profile email address phone', 'state': 'nJDTr4FFIb1zLGdpXxtwgouG6pTi3XQ9', 'code': '<REDACTED>', 'client_id': 'LzpNQBu9ad3d'}
2017-04-04 11:02:02,664 oic.oic.provider:DEBUG Redirected to: 'http://localhost:8040/authz_cb?iss=https%3A%2F%2Flocalhost%3A8040%2F&scope=openid+profile+email+address+phone&state=nJDTr4FFIb1zLGdpXxtwgouG6pTi3XQ9&code=<REDACTED>&client_id=LzpNQBu9ad3d' (<type 'unicode'>)
